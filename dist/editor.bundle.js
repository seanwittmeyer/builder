!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=226)}({226:function(t,e,n){"use strict";n.r(e);n(227);window.ContentTools=n(234),console.log("editor.bundle loaded")},227:function(t,e,n){var i=n(228);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,o);i.locals&&(t.exports=i.locals)},228:function(t,e,n){var i=n(3),o=n(8),r=n(229),s=n(230),a=n(231),c=n(232),l=n(233);e=i(!1);var h=o(r),d=o(s),u=o(a),p=o(c),g=o(l);e.push([t.i,'/*! ContentTools v1.6.12 by Anthony Blackshaw <ant@getme.co.uk> (https://github.com/anthonyjb) */\n.ce--dragging, .ce--resizing {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none; }\n\n.ce--dragging {\n  cursor: move !important; }\n\n.ce--resizing {\n  cursor: nwse-resize !important; }\n\n.ce-element--type-image, .ce-element--type-video {\n  background-repeat: no-repeat;\n  position: relative;\n  cursor: pointer;\n  z-index: 1; }\n\n.ce-element--type-image:after, .ce-element--type-image:before, .ce-element--type-video:after, .ce-element--type-video:before {\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 2px;\n  color: #fff;\n  display: none;\n  font-family: arial,sans-serif;\n  font-size: 10px;\n  line-height: 10px;\n  padding: 4px 4px 3px;\n  position: absolute; }\n\n.ce-element--type-image:before, .ce-element--type-video:before {\n  content: attr(data-ce-size);\n  right: 10px;\n  top: 10px; }\n\n.ce-element--type-image.ce-element--over:before, .ce-element--type-image.ce-element--resizing:before, .ce-element--type-video.ce-element--over:before, .ce-element--type-video.ce-element--resizing:before {\n  display: block; }\n\n.ce-element--type-image {\n  background-position: 0 0;\n  background-size: cover; }\n\n.ce-element--type-image:after {\n  background: transparent;\n  content: "";\n  display: block;\n  left: 0;\n  position: relative;\n  top: 0;\n  height: 100%;\n  width: 100%; }\n\n.ce-element--type-video {\n  background: #333 url('+h+') 50%/auto 48px no-repeat; }\n\n.ce-element--type-video:after {\n  bottom: 10px;\n  content: attr(data-ce-title);\n  display: block;\n  left: 10px; }\n\n.ce-element--empty:after {\n  content: "...";\n  display: inline-block;\n  font-style: italic;\n  opacity: .5; }\n\n.ce-element--empty[data-ce-placeholder]:after {\n  content: attr(data-ce-placeholder); }\n\n.ce-element--dragging {\n  background-color: rgba(51, 51, 51, 0.1) !important;\n  opacity: .5;\n  z-index: -1; }\n\n.ce-element--dragging.ce-element--type-image, .ce-element--dragging.ce-element--type-video {\n  background-color: #333 !important;\n  opacity: 1;\n  outline-color: rgba(51, 51, 51, 0.1) !important; }\n\n.ce-element--drop {\n  position: relative !important; }\n\n.ce-element--drop:before {\n  background: #f39c12 url('+d+') 50%/auto 32px repeat;\n  bottom: 0;\n  content: "" !important;\n  left: 0;\n  opacity: .8;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 9; }\n\n.ce-element--drop-below:before {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.ce-element--drop-left:before {\n  background-image: url('+u+");\n  -webkit-transform: rotate(0deg);\n          transform: rotate(0deg); }\n\n.ce-element--drop-right:before {\n  background-image: url("+u+");\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.ce-element--drop.ce-element--type-table-row {\n  background: #f39c12 url("+d+") 50%/auto 32px repeat; }\n\n.ce-element--drop.ce-element--type-table-row:before {\n  display: none; }\n\n.ce-element--drop.ce-element--type-table-row.ce-element--drop-below {\n  background: #f39c12 url("+p+') 50%/auto 32px repeat; }\n\n.ce-element--focused, .ce-element--over {\n  background-color: rgba(243, 156, 18, 0.1);\n  outline: none; }\n\n.ce-element--focused.ce-element--type-image, .ce-element--focused.ce-element--type-image-fixture, .ce-element--focused.ce-element--type-video, .ce-element--over.ce-element--type-image, .ce-element--over.ce-element--type-image-fixture, .ce-element--over.ce-element--type-video {\n  background-color: #333;\n  outline: 4px solid rgba(243, 156, 18, 0.35); }\n\n.ce-element--resize-top-left {\n  cursor: nw-resize; }\n\n.ce-element--resize-top-right {\n  cursor: ne-resize; }\n\n.ce-element--resize-bottom-right {\n  cursor: se-resize; }\n\n.ce-element--resize-bottom-left {\n  cursor: sw-resize; }\n\n.ce-drag-helper {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.25);\n  color: #4e4e4e;\n  font: arial,sans-serif;\n  font-size: 12px;\n  height: 120px;\n  left: 0;\n  line-height: 135%;\n  margin: 5px 0 0 5px;\n  overflow: hidden;\n  padding: 15px;\n  position: absolute;\n  top: 0;\n  width: 120px;\n  word-wrap: break-word;\n  z-index: 9; }\n\n.ce-drag-helper:before {\n  background: #2980b9;\n  color: #fff;\n  content: attr(data-ce-type);\n  display: block;\n  font-family: arial,sans-serif;\n  font-size: 10px;\n  line-height: 10px;\n  padding: 4px 4px 3px;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.ce-drag-helper--type-list-item-text:after, .ce-drag-helper--type-list:after, .ce-drag-helper--type-pre-text:after, .ce-drag-helper--type-table-row:after, .ce-drag-helper--type-table:after, .ce-drag-helper--type-text:after {\n  background-image: linear-gradient(rgba(255, 255, 255, 0), #fff 66%);\n  bottom: 0;\n  content: "";\n  display: block;\n  height: 40px;\n  left: 0;\n  position: absolute;\n  width: 100%; }\n\n.ce-drag-helper--type-image {\n  background-repeat: no-repeat;\n  background-size: cover; }\n\n.ce-element--type-image, .ce-element--type-video {\n  display: block;\n  margin-left: auto;\n  margin-right: auto; }\n\n.ce-element--type-image.align-left, .ce-element--type-video.align-left {\n  clear: none;\n  float: left; }\n\n.ce-element--type-image.align-right, .ce-element--type-video.align-right {\n  clear: none;\n  float: right; }\n\n.ce-measure {\n  display: block !important; }\n\n@font-face {\n  font-family: icon;\n  src: url('+g+');\n  font-weight: 400;\n  font-style: normal; }\n\n.ct-widget, .ct-widget * {\n  box-sizing: border-box; }\n\n.ct-widget * a, .ct-widget * b, .ct-widget * caption, .ct-widget * div, .ct-widget * form, .ct-widget * i fieldset, .ct-widget * iframe, .ct-widget * label, .ct-widget * legend, .ct-widget * span, .ct-widget * table, .ct-widget * tbody, .ct-widget * td, .ct-widget * tfoot, .ct-widget * th, .ct-widget * thead, .ct-widget * tr, .ct-widget a, .ct-widget b, .ct-widget caption, .ct-widget div, .ct-widget form, .ct-widget i fieldset, .ct-widget iframe, .ct-widget label, .ct-widget legend, .ct-widget span, .ct-widget table, .ct-widget tbody, .ct-widget td, .ct-widget tfoot, .ct-widget th, .ct-widget thead, .ct-widget tr {\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  margin: 0;\n  padding: 0;\n  vertical-align: baseline; }\n\n.ct-widget * ol, .ct-widget * ul, .ct-widget ol, .ct-widget ul {\n  list-style: none; }\n\n.ct-widget * table, .ct-widget table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n.ct-widget {\n  opacity: 0;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 18px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  z-index: 9999; }\n\n.ct-widget, .ct-widget--active {\n  transition-property: opacity;\n  transition-duration: .25s;\n  transition-timing-function: ease-in; }\n\n.ct-widget--active {\n  opacity: 1; }\n\n.ct-widget .ct-attribute {\n  border-bottom: 1px solid #eee;\n  height: 48px;\n  vertical-align: top; }\n\n.ct-widget .ct-attribute:after {\n  clear: both;\n  content: "";\n  display: table; }\n\n.ct-widget .ct-attribute__name {\n  background: #f6f6f6;\n  border: none;\n  color: #646464;\n  float: left;\n  height: 47px;\n  outline: none;\n  padding: 0 16px;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 48px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 25%; }\n\n.ct-widget .ct-attribute__name--invalid {\n  color: #e74c3c; }\n\n.ct-widget .ct-attribute__value {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  background: #fff;\n  border: none;\n  color: #646464;\n  float: right;\n  height: 47px;\n  outline: none;\n  padding: 0 16px;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 48px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 75%; }\n\n.ct-widget .ct-crop-marks {\n  height: 320px;\n  left: 73px;\n  position: absolute;\n  top: 0;\n  width: 427px; }\n\n.ct-widget .ct-crop-marks__clipper {\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  width: 100%; }\n\n.ct-widget .ct-crop-marks__ruler--top-left {\n  position: absolute; }\n\n.ct-widget .ct-crop-marks__ruler--top-left:after {\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-bottom: none;\n  border-right: none;\n  box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.25), inset 1px 1px 1px rgba(0, 0, 0, 0.25);\n  content: "";\n  height: 999px;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 999px; }\n\n.ct-widget .ct-crop-marks__ruler--bottom-right {\n  position: absolute; }\n\n.ct-widget .ct-crop-marks__ruler--bottom-right:after {\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-top: none;\n  border-left: none;\n  bottom: 0;\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25), inset -1px -1px 1px rgba(0, 0, 0, 0.25);\n  content: "";\n  height: 999px;\n  position: absolute;\n  right: 0;\n  width: 999px; }\n\n.ct-widget .ct-crop-marks__handle {\n  background: #2980b9;\n  border: 1px solid #409ad5;\n  border-radius: 7px;\n  cursor: pointer;\n  height: 15px;\n  margin-left: -7px;\n  margin-top: -7px;\n  position: absolute;\n  width: 15px; }\n\n.ct-widget .ct-crop-marks__handle--bottom-right {\n  margin-left: -8px;\n  margin-top: -8px; }\n\n.ct-widget .ct-crop-marks__handle:hover {\n  background: #2e8ece; }\n\n@-webkit-keyframes a {\n  0% {\n    -webkit-transform: translate(-50%, -50%) rotate(0deg);\n            transform: translate(-50%, -50%) rotate(0deg);\n    -webkit-transform: transform;\n            transform: transform; }\n  to {\n    -webkit-transform: translate(-50%, -50%) rotate(359deg);\n            transform: translate(-50%, -50%) rotate(359deg);\n    -webkit-transform: transform;\n            transform: transform; } }\n\n@keyframes a {\n  0% {\n    -webkit-transform: translate(-50%, -50%) rotate(0deg);\n            transform: translate(-50%, -50%) rotate(0deg);\n    -webkit-transform: transform;\n            transform: transform; }\n  to {\n    -webkit-transform: translate(-50%, -50%) rotate(359deg);\n            transform: translate(-50%, -50%) rotate(359deg);\n    -webkit-transform: transform;\n            transform: transform; } }\n\n.ct-widget.ct-dialog {\n  background: #fff;\n  box-shadow: 0 8px 8px rgba(0, 0, 0, 0.35);\n  border-radius: 2px;\n  height: 480px;\n  left: 50%;\n  margin-left: -350px;\n  margin-top: -240px;\n  position: fixed;\n  top: 50%;\n  width: 700px;\n  z-index: 10099; }\n\n.ct-widget.ct-dialog--busy .ct-dialog__busy {\n  display: block; }\n\n.ct-widget.ct-dialog--busy .ct-dialog__body {\n  opacity: .1; }\n\n.ct-widget .ct-dialog__header {\n  color: #a4a4a4;\n  border-bottom: 1px solid #eee;\n  height: 48px;\n  padding: 0 16px;\n  position: relative; }\n\n.ct-widget .ct-dialog__caption {\n  font-family: arial,sans-serif;\n  font-size: 18px; }\n\n.ct-widget .ct-dialog__caption, .ct-widget .ct-dialog__close {\n  line-height: 48px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-dialog__close {\n  border-left: 1px solid #eee;\n  cursor: pointer;\n  height: 48px;\n  position: absolute;\n  right: 0;\n  text-align: center;\n  top: 0;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  width: 48px; }\n\n.ct-widget .ct-dialog__close:before {\n  content: "\\ea0f"; }\n\n.ct-widget .ct-dialog__close:hover:before {\n  color: #646464; }\n\n.ct-widget .ct-dialog__body {\n  margin: auto;\n  width: 572px; }\n\n.ct-widget .ct-dialog__view {\n  height: 320px;\n  margin-top: 32px; }\n\n.ct-widget .ct-dialog__controls {\n  margin-top: 16px; }\n\n.ct-widget .ct-dialog__controls:after {\n  clear: both;\n  content: "";\n  display: table; }\n\n.ct-widget .ct-dialog__busy {\n  display: none;\n  position: absolute; }\n\n.ct-widget .ct-dialog__busy:before {\n  -webkit-animation: a 5s linear;\n          animation: a 5s linear;\n  -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n  color: #a4a4a4;\n  content: "\\e994";\n  left: 50%;\n  position: fixed;\n  top: 50%;\n  font-family: icon;\n  font-size: 80px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-control-group {\n  font-size: 0; }\n\n.ct-widget .ct-control-group--center {\n  text-align: center; }\n\n.ct-widget .ct-control-group--left {\n  float: left; }\n\n.ct-widget .ct-control-group--right {\n  float: right; }\n\n.ct-widget .ct-control {\n  margin-left: 16px;\n  position: relative; }\n\n.ct-widget .ct-control:first-child {\n  margin-left: 0; }\n\n.ct-widget .ct-control--icon {\n  color: #a4a4a4;\n  cursor: pointer;\n  display: inline-block;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  width: 32px; }\n\n.ct-widget .ct-control--icon, .ct-widget .ct-control--icon:after {\n  border-radius: 2px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-control--icon:after {\n  background: #000;\n  color: #fff;\n  content: attr(data-ct-tooltip);\n  display: block;\n  -webkit-hyphens: auto;\n  -ms-hyphens: auto;\n  -moz-hyphens: auto;\n       hyphens: auto;\n  left: -26.5px;\n  opacity: 0;\n  padding: 0 8px;\n  pointer-events: none;\n  position: absolute;\n  bottom: 37px;\n  font-family: arial,sans-serif;\n  font-size: 12px;\n  line-height: 20px;\n  visibility: hidden;\n  width: 85px;\n  word-break: break-word; }\n\n.ct-widget .ct-control--icon:hover:after {\n  opacity: .8;\n  visibility: visible;\n  transition-property: opacity;\n  transition-duration: 0s;\n  transition-timing-function: ease-in;\n  transition-delay: 2s; }\n\n.ct-widget .ct-control--icon:before {\n  content: ""; }\n\n.ct-widget .ct-control--icon:hover {\n  background: #eee;\n  color: #646464; }\n\n.ct-widget .ct-control--active, .ct-widget .ct-control--on {\n  background: #a4a4a4;\n  color: #fff; }\n\n.ct-widget .ct-control--active:hover, .ct-widget .ct-control--on:hover {\n  background: #646464;\n  color: #fff; }\n\n.ct-widget .ct-control--rotate-ccw:before {\n  content: "\\e965"; }\n\n.ct-widget .ct-control--rotate-cw:before {\n  content: "\\e966"; }\n\n.ct-widget .ct-control--crop:before {\n  content: "\\ea57"; }\n\n.ct-widget .ct-control--remove:before {\n  content: "\\e9ac"; }\n\n.ct-widget .ct-control--styles:before {\n  content: "\\e90b"; }\n\n.ct-widget .ct-control--attributes:before {\n  content: "\\e994"; }\n\n.ct-widget .ct-control--code:before {\n  content: "\\ea80"; }\n\n.ct-widget .ct-control--icon.ct-control--muted {\n  cursor: default; }\n\n.ct-widget .ct-control--icon.ct-control--muted:before {\n  opacity: .5; }\n\n.ct-widget .ct-control--icon.ct-control--muted:hover {\n  color: #a4a4a4;\n  background: transparent; }\n\n.ct-widget .ct-control--text {\n  background: #2980b9;\n  border-radius: 2px;\n  color: #fff;\n  cursor: pointer;\n  display: inline-block;\n  font-weight: 700;\n  height: 32px;\n  overflow: hidden;\n  padding: 0 8px;\n  text-align: center;\n  text-overflow: ellipsis;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 32px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  vertical-align: top;\n  width: 100px; }\n\n.ct-widget .ct-control--text:hover {\n  background: #2e8ece; }\n\n.ct-widget .ct-control--apply, .ct-widget .ct-control--insert, .ct-widget .ct-control--ok {\n  background: #27ae60; }\n\n.ct-widget .ct-control--apply:hover, .ct-widget .ct-control--insert:hover, .ct-widget .ct-control--ok:hover {\n  background: #2cc36b; }\n\n.ct-widget .ct-control--cancel, .ct-widget .ct-control--clear {\n  background: #e74c3c; }\n\n.ct-widget .ct-control--cancel:hover, .ct-widget .ct-control--clear:hover {\n  background: #ea6153; }\n\n.ct-widget .ct-control--text.ct-control--muted {\n  background: #ccc;\n  cursor: default; }\n\n.ct-widget .ct-control--text.ct-control--muted:hover {\n  background: #ccc; }\n\n.ct-widget .ct-control--upload {\n  overflow: hidden; }\n\n.ct-widget.ct-image-dialog--empty .ct-control--cancel, .ct-widget.ct-image-dialog--empty .ct-control--clear, .ct-widget.ct-image-dialog--empty .ct-control--crop, .ct-widget.ct-image-dialog--empty .ct-control--insert, .ct-widget.ct-image-dialog--empty .ct-control--rotate-ccw, .ct-widget.ct-image-dialog--empty .ct-control--rotate-cw, .ct-widget.ct-image-dialog--empty .ct-progress-bar, .ct-widget.ct-image-dialog--populated .ct-control--cancel, .ct-widget.ct-image-dialog--populated .ct-control--upload, .ct-widget.ct-image-dialog--populated .ct-progress-bar, .ct-widget.ct-image-dialog--uploading .ct-control--clear, .ct-widget.ct-image-dialog--uploading .ct-control--crop, .ct-widget.ct-image-dialog--uploading .ct-control--insert, .ct-widget.ct-image-dialog--uploading .ct-control--rotate-ccw, .ct-widget.ct-image-dialog--uploading .ct-control--rotate-cw, .ct-widget.ct-image-dialog--uploading .ct-control--upload {\n  display: none; }\n\n.ct-widget .ct-image-dialog__view {\n  background: #eee;\n  position: relative; }\n\n.ct-widget .ct-image-dialog__view:empty {\n  font-family: icon;\n  font-size: 80px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: 320px;\n  text-align: center; }\n\n.ct-widget .ct-image-dialog__view:empty:before {\n  color: #fff;\n  content: "\\e90d"; }\n\n.ct-widget .ct-image-dialog__image {\n  background-color: transparent;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n  height: 100%;\n  width: 100%; }\n\n.ct-widget .ct-image-dialog__file-upload {\n  cursor: pointer;\n  font-size: 400px;\n  left: 0;\n  opacity: 0;\n  position: absolute;\n  top: 0; }\n\n.ct-widget.ct-properties-dialog--attributes .ct-properties-dialog__attributes, .ct-widget.ct-properties-dialog--styles .ct-properties-dialog__styles {\n  display: block; }\n\n.ct-widget.ct-properties-dialog--styles .ct-properties-dialog__styles:empty:before {\n  color: #a4a4a4;\n  content: attr(data-ct-empty);\n  display: block;\n  font-style: italic;\n  margin-top: 20px;\n  text-align: center; }\n\n.ct-widget.ct-properties-dialog--code .ct-properties-dialog__code {\n  display: block; }\n\n.ct-widget .ct-properties-dialog__view {\n  border: 1px solid #ddd;\n  overflow: auto; }\n\n.ct-widget .ct-properties-dialog__attributes, .ct-widget .ct-properties-dialog__code, .ct-widget .ct-properties-dialog__styles {\n  display: none; }\n\n.ct-widget .ct-properties-dialog__inner-html {\n  border: none;\n  display: block;\n  font-family: courier,Bitstream Vera Sans Mono,Consolas,Courier,monospace;\n  height: 318px;\n  padding: 16px;\n  outline: none;\n  resize: none;\n  width: 100%; }\n\n.ct-widget .ct-properties-dialog__inner-html--invalid {\n  color: #e74c3c; }\n\n.ct-widget .ct-table-dialog__view {\n  border: 1px solid #ddd;\n  overflow: auto; }\n\n.ct-widget .ct-video-dialog__preview:empty {\n  background: #eee;\n  font-family: icon;\n  font-size: 80px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: 320px;\n  text-align: center; }\n\n.ct-widget .ct-video-dialog__preview:empty:before {\n  color: #fff;\n  content: "\\ea98"; }\n\n.ct-widget .ct-video-dialog__input {\n  border: none;\n  border-bottom: 1px solid #eee;\n  height: 32px;\n  line-height: 32px;\n  outline: none;\n  padding: 0 4px;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 18px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  vertical-align: top;\n  width: 456px; }\n\n.ct-widget .ct-video-dialog__input:focus {\n  border-bottom: 1px solid #e1e1e1; }\n\n.ct-widget.ct-anchored-dialog {\n  border-bottom: 2px solid #27ae60;\n  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.35);\n  font-size: 0;\n  height: 34px;\n  left: 0;\n  margin-left: -160px;\n  margin-top: -48px;\n  position: absolute;\n  top: 0;\n  width: 320px;\n  z-index: 10099; }\n\n.ct-widget.ct-anchored-dialog:after {\n  border: 16px solid rgba(255, 255, 255, 0);\n  border-top-color: #27ae60;\n  content: "";\n  left: 144px;\n  position: absolute;\n  top: 34px; }\n\n.ct-widget .ct-anchored-dialog__input {\n  border: none;\n  color: #646464;\n  outline: none;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  padding: 0 8px 0 16px;\n  vertical-align: top;\n  width: 256px; }\n\n.ct-widget .ct-anchored-dialog__button, .ct-widget .ct-anchored-dialog__input {\n  height: 32px;\n  line-height: 32px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-anchored-dialog__button {\n  background: #27ae60;\n  cursor: pointer;\n  display: inline-block;\n  text-align: center;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  width: 32px; }\n\n.ct-widget .ct-anchored-dialog__button:before {\n  color: #fff;\n  content: "\\ea10"; }\n\n.ct-widget .ct-anchored-dialog__button:hover {\n  background: #2cc36b; }\n\n.ct-widget .ct-anchored-dialog__target-button {\n  background: #fff;\n  cursor: pointer;\n  display: inline-block;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 32px; }\n\n.ct-widget .ct-anchored-dialog__target-button:before {\n  color: #a4a4a4;\n  content: "\\ea7d"; }\n\n.ct-widget .ct-anchored-dialog__target-button:hover:before {\n  color: #b1b1b1; }\n\n.ct-widget .ct-anchored-dialog__target-button--active:before {\n  color: #27ae60; }\n\n.ct-widget .ct-anchored-dialog__target-button--active:hover:before {\n  color: #2cc36b; }\n\n@-webkit-keyframes b {\n  0% {\n    opacity: 0;\n    font-size: 32px;\n    -webkit-transform: font-size;\n            transform: font-size; }\n  25% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  50% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  75% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  to {\n    opacity: 0;\n    -webkit-transform: all;\n            transform: all; } }\n\n@keyframes b {\n  0% {\n    opacity: 0;\n    font-size: 32px;\n    -webkit-transform: font-size;\n            transform: font-size; }\n  25% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  50% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  75% {\n    font-size: 320px;\n    opacity: 1;\n    -webkit-transform: all;\n            transform: all; }\n  to {\n    opacity: 0;\n    -webkit-transform: all;\n            transform: all; } }\n\n@-webkit-keyframes c {\n  0% {\n    opacity: 1;\n    -webkit-transform: opacity;\n            transform: opacity; }\n  99% {\n    opacity: 1;\n    -webkit-transform: opacity;\n            transform: opacity; }\n  to {\n    opacity: 0;\n    -webkit-transform: opacity;\n            transform: opacity; } }\n\n@keyframes c {\n  0% {\n    opacity: 1;\n    -webkit-transform: opacity;\n            transform: opacity; }\n  99% {\n    opacity: 1;\n    -webkit-transform: opacity;\n            transform: opacity; }\n  to {\n    opacity: 0;\n    -webkit-transform: opacity;\n            transform: opacity; } }\n\n.ct-widget.ct-flash {\n  color: rgba(255, 255, 255, 0.9);\n  height: 0;\n  left: 0;\n  position: fixed;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  top: 0;\n  width: 0;\n  z-index: 10999; }\n\n.ct-widget.ct-flash:before {\n  left: 50%;\n  opacity: 0;\n  position: fixed;\n  text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%); }\n\n.ct-widget.ct-flash--active {\n  -webkit-animation: c 2s ease-in;\n          animation: c 2s ease-in;\n  -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.ct-widget.ct-flash--active:before {\n  -webkit-animation: b 2s ease-in;\n          animation: b 2s ease-in;\n  -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n  font-size: 320px;\n  opacity: 1; }\n\n.ct-widget.ct-flash--ok:before {\n  content: "\\ea10"; }\n\n.ct-widget.ct-flash--no:before {\n  content: "\\ea0f"; }\n\n.ct-widget .ct-grip {\n  cursor: move;\n  font-size: 0;\n  text-align: center;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none; }\n\n.ct-widget .ct-grip__bump {\n  background: rgba(70, 70, 70, 0.15);\n  border-radius: 12px;\n  display: inline-block;\n  height: 12px;\n  margin-left: 12px;\n  width: 12px; }\n\n.ct-widget .ct-grip__bump:first-child {\n  margin-left: 0; }\n\n@-webkit-keyframes d {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n    -webkit-transform: transform;\n            transform: transform; }\n  to {\n    -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n    -webkit-transform: transform;\n            transform: transform; } }\n\n@keyframes d {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n    -webkit-transform: transform;\n            transform: transform; }\n  to {\n    -webkit-transform: rotate(359deg);\n            transform: rotate(359deg);\n    -webkit-transform: transform;\n            transform: transform; } }\n\n.ct-widget.ct-ignition {\n  left: 16px;\n  position: fixed;\n  top: 16px; }\n\n.ct-widget.ct-ignition .ct-ignition__button {\n  display: none; }\n\n.ct-widget.ct-ignition--editing .ct-ignition__button--cancel, .ct-widget.ct-ignition--editing .ct-ignition__button--confirm, .ct-widget.ct-ignition--ready .ct-ignition__button--edit {\n  display: block; }\n\n.ct-widget.ct-ignition--busy .ct-ignition__button {\n  display: none; }\n\n.ct-widget.ct-ignition--busy .ct-ignition__button--busy {\n  display: block; }\n\n.ct-widget .ct-ignition__button {\n  border-radius: 24px;\n  content: "";\n  cursor: pointer;\n  display: block;\n  height: 48px;\n  line-height: 48px;\n  opacity: .9;\n  position: absolute;\n  text-align: center;\n  font-family: icon;\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 48px; }\n\n.ct-widget .ct-ignition__button:before {\n  color: #fff; }\n\n.ct-widget .ct-ignition__button--busy {\n  -webkit-animation: d 5s linear;\n          animation: d 5s linear;\n  -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n  background: #646464;\n  cursor: default; }\n\n.ct-widget .ct-ignition__button--busy:before {\n  content: "\\e994"; }\n\n.ct-widget .ct-ignition__button--busy:hover {\n  background: #646464; }\n\n.ct-widget .ct-ignition__button--confirm {\n  background: #27ae60; }\n\n.ct-widget .ct-ignition__button--confirm:before {\n  content: "\\ea10"; }\n\n.ct-widget .ct-ignition__button--confirm:hover {\n  background: #2cc36b; }\n\n.ct-widget .ct-ignition__button--cancel {\n  background: #e74c3c;\n  left: 64px; }\n\n.ct-widget .ct-ignition__button--cancel:before {\n  content: "\\ea0f"; }\n\n.ct-widget .ct-ignition__button--cancel:hover {\n  background: #ea6153; }\n\n.ct-widget .ct-ignition__button--edit {\n  background: #2980b9; }\n\n.ct-widget .ct-ignition__button--edit:before {\n  content: "\\e905";\n  transition-property: -webkit-transform;\n  transition-property: transform;\n  transition-property: transform, -webkit-transform;\n  transition-duration: .1s;\n  transition-timing-function: ease-in; }\n\n.ct-widget .ct-ignition__button--edit:hover {\n  background: #2e8ece; }\n\n.ct-widget .ct-ignition__button--edit:hover:before {\n  display: inline-block;\n  -webkit-transform: rotate(-15deg);\n          transform: rotate(-15deg); }\n\n.ct-widget.ct-inspector {\n  background: rgba(232, 232, 232, 0.2);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  bottom: 0;\n  height: 32px;\n  left: 0;\n  overflow: hidden;\n  padding: 3px 16px 0;\n  position: fixed;\n  width: 100%; }\n\n.ct-widget .ct-inspector__tags {\n  width: calc(100% - 128px); }\n\n.ct-widget .ct-inspector__tags:after {\n  clear: both;\n  content: "";\n  display: table; }\n\n.ct-widget .ct-inspector__tags:before {\n  color: #464646;\n  content: "\\ea80";\n  display: block;\n  float: left;\n  height: 24px;\n  line-height: 24px;\n  margin-right: 16px;\n  text-align: center;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 24px; }\n\n.ct-widget .ct-inspector__counter {\n  border-left: 1px solid rgba(0, 0, 0, 0.1);\n  height: 24px;\n  line-height: 24px;\n  margin-right: 16px;\n  position: absolute;\n  right: 0;\n  text-align: right;\n  top: 3px;\n  width: 128px; }\n\n.ct-widget .ct-tag {\n  background-color: #2980b9;\n  border-radius: 2px 0 0 2px;\n  color: #fff;\n  cursor: pointer;\n  float: left;\n  font-weight: 700;\n  height: 24px;\n  line-height: 24px;\n  margin-left: 24px;\n  padding: 0 8px;\n  position: relative;\n  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.35); }\n\n.ct-widget .ct-tag:after {\n  border-style: solid;\n  border-bottom: 12px solid rgba(255, 0, 0, 0);\n  border-left: 12px solid #2980b9;\n  border-right: none;\n  border-top: 12px solid rgba(255, 0, 0, 0);\n  content: "";\n  display: block;\n  height: 24px;\n  bottom: 0;\n  right: -24px;\n  position: absolute;\n  width: 24px;\n  -moz-transform: scale(0.9999); }\n\n.ct-widget .ct-tag:first-child {\n  margin-left: 0; }\n\n.ct-widget .ct-tag:hover {\n  background-color: #4aa3df; }\n\n.ct-widget .ct-tag:hover:after {\n  border-left-color: #4aa3df; }\n\n.ct-widget .ct-tag:first-child {\n  background-color: #8e44ad; }\n\n.ct-widget .ct-tag:first-child:after {\n  border-left-color: #8e44ad; }\n\n.ct-widget .ct-tag:first-child:hover {\n  background-color: #9b50ba; }\n\n.ct-widget .ct-tag:first-child:hover:after {\n  border-left-color: #9b50ba; }\n\n.ct-widget .ct-tag:nth-child(2) {\n  background-color: #2980b9; }\n\n.ct-widget .ct-tag:nth-child(2):after {\n  border-left-color: #2980b9; }\n\n.ct-widget .ct-tag:nth-child(2):hover {\n  background-color: #2e8ece; }\n\n.ct-widget .ct-tag:nth-child(2):hover:after {\n  border-left-color: #2e8ece; }\n\n.ct-widget .ct-tag:nth-child(3) {\n  background-color: #27ae60; }\n\n.ct-widget .ct-tag:nth-child(3):after {\n  border-left-color: #27ae60; }\n\n.ct-widget .ct-tag:nth-child(3):hover {\n  background-color: #2cc36b; }\n\n.ct-widget .ct-tag:nth-child(3):hover:after {\n  border-left-color: #2cc36b; }\n\n.ct-widget .ct-tag:nth-child(4) {\n  background-color: #d35400; }\n\n.ct-widget .ct-tag:nth-child(4):after {\n  border-left-color: #d35400; }\n\n.ct-widget .ct-tag:nth-child(4):hover {\n  background-color: #ed5e00; }\n\n.ct-widget .ct-tag:nth-child(4):hover:after {\n  border-left-color: #ed5e00; }\n\n.ct-widget .ct-tag:nth-child(5) {\n  background-color: #f39c12; }\n\n.ct-widget .ct-tag:nth-child(5):after {\n  border-left-color: #f39c12; }\n\n.ct-widget .ct-tag:nth-child(5):hover {\n  background-color: #f4a62a; }\n\n.ct-widget .ct-tag:nth-child(5):hover:after {\n  border-left-color: #f4a62a; }\n\n.ct-widget .ct-tag:nth-child(6) {\n  background-color: #16a085; }\n\n.ct-widget .ct-tag:nth-child(6):after {\n  border-left-color: #16a085; }\n\n.ct-widget .ct-tag:nth-child(6):hover {\n  background-color: #19b698; }\n\n.ct-widget .ct-tag:nth-child(6):hover:after {\n  border-left-color: #19b698; }\n\n.ct-widget.ct-modal {\n  background: rgba(0, 0, 0, 0.7);\n  height: 0;\n  left: 0;\n  position: fixed;\n  top: 0;\n  width: 0;\n  z-index: 10009; }\n\n.ct-widget.ct-modal--transparent {\n  background: transparent; }\n\n.ct-widget--active.ct-modal {\n  height: 100%;\n  width: 100%; }\n\n.ct-widget .ct-progress-bar {\n  border: 1px solid #eee;\n  height: 32px;\n  line-height: 32px;\n  padding: 1px;\n  width: 456px; }\n\n.ct-widget .ct-progress-bar__progress {\n  background: #2980b9;\n  height: 28px; }\n\n.ct-widget .ct-section {\n  border-bottom: 1px solid #eee;\n  color: #bdbdbd;\n  cursor: pointer;\n  font-style: italic;\n  height: 48px;\n  padding: 0 16px;\n  font-family: arial,sans-serif;\n  font-size: 16px;\n  line-height: 48px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-section:after {\n  clear: both;\n  content: "";\n  display: table; }\n\n.ct-widget .ct-section:hover {\n  background: #f6f6f6; }\n\n.ct-widget .ct-section--applied {\n  color: #646464;\n  font-style: normal; }\n\n.ct-widget .ct-section--applied .ct-section__switch {\n  background-color: #27ae60;\n  border: 1px solid #1e8449; }\n\n.ct-widget .ct-section--applied .ct-section__switch:before {\n  left: 25px;\n  transition-property: left;\n  transition-duration: .1s;\n  transition-timing-function: ease-in; }\n\n.ct-widget .ct-section--contains-input .ct-section__label {\n  width: 75%; }\n\n.ct-widget .ct-section__label {\n  float: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 472px;\n  white-space: nowrap; }\n\n.ct-widget .ct-section__switch {\n  background-color: #ccc;\n  border: 1px solid #b3b3b3;\n  border-radius: 12px;\n  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);\n  float: right;\n  height: 24px;\n  margin-top: 12px;\n  position: relative;\n  width: 48px; }\n\n.ct-widget .ct-section__switch:before {\n  background: #fff;\n  border-radius: 10px;\n  content: "";\n  height: 20px;\n  left: 1px;\n  position: absolute;\n  top: 1px;\n  transition-property: left;\n  transition-duration: .1s;\n  transition-timing-function: ease-in;\n  width: 20px; }\n\n.ct-widget .ct-section__input {\n  background: #fff;\n  border: none;\n  color: #646464;\n  float: right;\n  height: 47px;\n  outline: none;\n  padding: 0 16px;\n  text-align: right;\n  font-family: arial,sans-serif;\n  font-size: 14px;\n  line-height: 48px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 25%; }\n\n.ct-widget .ct-section__input--invalid {\n  color: #e74c3c; }\n\n.ct-widget.ct-toolbox {\n  background: rgba(232, 232, 232, 0.9);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.35);\n  left: 128px;\n  padding: 8px;\n  position: fixed;\n  top: 128px;\n  width: 138px; }\n\n.ct-widget.ct-toolbox--dragging {\n  opacity: .5; }\n\n.ct-widget .ct-toolbox__grip {\n  padding: 8px 0; }\n\n.ct-widget .ct-tool-group {\n  padding: 4px 0; }\n\n.ct-widget .ct-tool-group:after {\n  clear: both;\n  content: "";\n  display: table; }\n\n.ct-widget .ct-tool-group:first-child {\n  padding-top: 0; }\n\n.ct-widget .ct-tool {\n  color: #464646;\n  cursor: pointer;\n  float: left;\n  height: 32px;\n  margin: 4px;\n  margin-right: 4px;\n  position: relative;\n  text-align: center;\n  font-family: icon;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  font-variant: normal;\n  speak: none;\n  text-transform: none;\n  width: 32px; }\n\n.ct-widget .ct-tool, .ct-widget .ct-tool:after {\n  border-radius: 2px;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale; }\n\n.ct-widget .ct-tool:after {\n  background: #000;\n  color: #fff;\n  content: attr(data-ct-tooltip);\n  display: block;\n  -webkit-hyphens: auto;\n  -ms-hyphens: auto;\n  -moz-hyphens: auto;\n       hyphens: auto;\n  left: -26.5px;\n  opacity: 0;\n  padding: 0 8px;\n  pointer-events: none;\n  position: absolute;\n  bottom: 37px;\n  font-family: arial,sans-serif;\n  font-size: 12px;\n  line-height: 20px;\n  visibility: hidden;\n  width: 85px;\n  word-break: break-word; }\n\n.ct-widget .ct-tool:hover:after {\n  opacity: .8;\n  visibility: visible;\n  transition-property: opacity;\n  transition-duration: 0s;\n  transition-timing-function: ease-in;\n  transition-delay: 2s; }\n\n.ct-widget .ct-tool:before {\n  line-height: 32px; }\n\n.ct-widget .ct-tool:nth-child(3n) {\n  margin-right: 0; }\n\n.ct-widget .ct-tool:hover {\n  background: rgba(255, 255, 255, 0.5); }\n\n.ct-widget .ct-tool--disabled {\n  color: rgba(70, 70, 70, 0.33); }\n\n.ct-widget .ct-tool--disabled:hover {\n  background: transparent; }\n\n.ct-widget .ct-tool--down {\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.25);\n  line-height: 34px; }\n\n.ct-widget .ct-tool--down, .ct-widget .ct-tool--down:hover {\n  background: rgba(0, 0, 0, 0.025); }\n\n.ct-widget .ct-tool--applied {\n  background: rgba(0, 0, 0, 0.1);\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.25); }\n\n.ct-widget .ct-tool--applied:hover {\n  background: rgba(0, 0, 0, 0.15); }\n\n.ct-widget .ct-tool--bold:before {\n  content: "\\ea62"; }\n\n.ct-widget .ct-tool--heading:before {\n  content: "H";\n  font-weight: 700; }\n\n.ct-widget .ct-tool--subheading:before {\n  content: "H"; }\n\n.ct-widget .ct-tool--paragraph:before {\n  content: "P"; }\n\n.ct-widget .ct-tool--preformatted:before {\n  content: "\\ea80"; }\n\n.ct-widget .ct-tool--italic:before {\n  content: "\\ea64"; }\n\n.ct-widget .ct-tool--link:before {\n  content: "\\e9cb"; }\n\n.ct-widget .ct-tool--align-left:before {\n  content: "\\ea77"; }\n\n.ct-widget .ct-tool--align-center:before {\n  content: "\\ea78"; }\n\n.ct-widget .ct-tool--align-right:before {\n  content: "\\ea79"; }\n\n.ct-widget .ct-tool--unordered-list:before {\n  content: "\\e9ba"; }\n\n.ct-widget .ct-tool--ordered-list:before {\n  content: "\\e9b9"; }\n\n.ct-widget .ct-tool--table:before {\n  content: "\\ea71"; }\n\n.ct-widget .ct-tool--indent:before {\n  content: "\\ea7b"; }\n\n.ct-widget .ct-tool--unindent:before {\n  content: "\\ea7c"; }\n\n.ct-widget .ct-tool--line-break:before {\n  content: "\\ea6e"; }\n\n.ct-widget .ct-tool--image:before {\n  content: "\\e90d"; }\n\n.ct-widget .ct-tool--video:before {\n  content: "\\ea98"; }\n\n.ct-widget .ct-tool--undo:before {\n  content: "\\e965"; }\n\n.ct-widget .ct-tool--redo:before {\n  content: "\\e966"; }\n\n.ct-widget .ct-tool--remove:before {\n  content: "\\e9ac"; }\n\n.ct-widget .ct-tool--superscript:before {\n  content: "\\ea69"; }\n\n.ct-widget .ct-tool--subscript:before {\n  content: "\\ea6a"; }\n\n.ct-widget .ct-tool--blockquote:before {\n  content: "\\e978"; }\n\n.ct-widget .ct-tool--viz:before {\n  content: "\\e99b"; }\n\n.ct-widget .ct-tool--gallery:before {\n  content: "\\e90e"; }\n\n@-webkit-keyframes e {\n  0% {\n    outline-color: rgba(255, 255, 255, 0);\n    -webkit-transform: background-color;\n            transform: background-color; }\n  25% {\n    outline-color: #f39c12;\n    -webkit-transform: background-color;\n            transform: background-color; }\n  50% {\n    outline-color: #f39c12;\n    -webkit-transform: background-color;\n            transform: background-color; }\n  to {\n    outline-color: rgba(255, 255, 255, 0);\n    -webkit-transform: background-color;\n            transform: background-color; } }\n\n@keyframes e {\n  0% {\n    outline-color: rgba(255, 255, 255, 0);\n    -webkit-transform: background-color;\n            transform: background-color; }\n  25% {\n    outline-color: #f39c12;\n    -webkit-transform: background-color;\n            transform: background-color; }\n  50% {\n    outline-color: #f39c12;\n    -webkit-transform: background-color;\n            transform: background-color; }\n  to {\n    outline-color: rgba(255, 255, 255, 0);\n    -webkit-transform: background-color;\n            transform: background-color; } }\n\n.ct-app, .ct-app *, .ct-app :after, .ct-app :before {\n  box-sizing: border-box; }\n\n.ct--highlight {\n  outline: 4px solid #f39c12;\n  -webkit-animation: e .5s ease-in;\n          animation: e .5s ease-in;\n  -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards; }\n\n.ct--no-scroll {\n  overflow: hidden; }\n\n.ct--pseudo-select {\n  background: rgba(0, 0, 0, 0.1); }\n',""]),t.exports=e},229:function(t,e,n){"use strict";n.r(e),e.default=n.p+"/dist/images/video.svg"},230:function(t,e,n){"use strict";n.r(e),e.default=n.p+"/dist/images/drop-vert-above.svg"},231:function(t,e,n){"use strict";n.r(e),e.default=n.p+"/dist/images/drop-horz.svg"},232:function(t,e,n){"use strict";n.r(e),e.default=n.p+"/dist/images/drop-vert-below.svg"},233:function(t,e,n){"use strict";n.r(e),e.default=n.p+"/dist/fonts/icons.woff"},234:function(t,e,n){(function(){var e;(e={}).Machine=function(){function t(t){this.context=t,this._stateTransitions={},this._stateTransitionsAny={},this._defaultTransition=null,this._initialState=null,this._currentState=null}return t.prototype.addTransition=function(t,e,n,i){return n||(n=e),this._stateTransitions[[t,e]]=[n,i]},t.prototype.addTransitions=function(t,e,n,i){var o,r,s,a;for(n||(n=e),a=[],r=0,s=t.length;r<s;r++)o=t[r],a.push(this.addTransition(o,e,n,i));return a},t.prototype.addTransitionAny=function(t,e,n){return e||(e=t),this._stateTransitionsAny[t]=[e,n]},t.prototype.setDefaultTransition=function(t,e){return this._defaultTransition=[t,e]},t.prototype.getTransition=function(t,e){if(this._stateTransitions[[t,e]])return this._stateTransitions[[t,e]];if(this._stateTransitionsAny[e])return this._stateTransitionsAny[e];if(this._defaultTransition)return this._defaultTransition;throw new Error("Transition is undefined: ("+t+", "+e+")")},t.prototype.getCurrentState=function(){return this._currentState},t.prototype.setInitialState=function(t){if(this._initialState=t,!this._currentState)return this.reset()},t.prototype.reset=function(){return this._currentState=this._initialState},t.prototype.process=function(t){var e;return(e=this.getTransition(t,this._currentState))[1]&&e[1].call(this.context||(this.context=this),t),this._currentState=e[0]},t}(),"undefined"!=typeof window&&(window.FSM=e),t.exports&&(t.exports=e)}).call(this),function(){var e,n,i,o,r,s,a,c=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r={},"undefined"!=typeof window&&(window.HTMLString=r),t.exports&&(t.exports=r),r.String=function(){function t(t,e){null==e&&(e=!1),this._preserveWhitespace=e,t?(null===r.String._parser&&(r.String._parser=new a),this.characters=r.String._parser.parse(t,this._preserveWhitespace).characters):this.characters=[]}return t._parser=null,t.prototype.isWhitespace=function(){var t,e,n;for(t=0,e=(n=this.characters).length;t<e;t++)if(!n[t].isWhitespace())return!1;return!0},t.prototype.length=function(){return this.characters.length},t.prototype.preserveWhitespace=function(){return this._preserveWhitespace},t.prototype.capitalize=function(){var t,e;return(e=this.copy()).length()&&(t=e.characters[0]._c.toUpperCase(),e.characters[0]._c=t),e},t.prototype.charAt=function(t){return this.characters[t].copy()},t.prototype.concat=function(){var t,e,n,i,o,s,a,l,h,d,u,p,g,m,f,_,y;for(a=2<=arguments.length?c.call(arguments,0,h=arguments.length-1):(h=0,[]),void 0!==(n=arguments[h++])&&"boolean"!=typeof n&&(a.push(n),n=!0),o=this.copy(),d=0,g=a.length;d<g;d++)if(0!==(s=a[d]).length){if(l=s,"string"==typeof s&&(l=new r.String(s,this._preserveWhitespace)),n&&o.length())for(i=(e=o.charAt(o.length()-1)).tags(),e.isTag()&&i.shift(),"string"!=typeof s&&(l=l.copy()),u=0,m=(_=l.characters).length;u<m;u++)(t=_[u]).addTags.apply(t,i);for(p=0,f=(y=l.characters).length;p<f;p++)t=y[p],o.characters.push(t)}return o},t.prototype.contains=function(t){var e,n,i,o,r,s;if("string"==typeof t)return this.text().indexOf(t)>-1;for(n=0;n<=this.length()-t.length();){for(e=!0,i=o=0,r=(s=t.characters).length;o<r;i=++o)if(!s[i].eq(this.characters[i+n])){e=!1;break}if(e)return!0;n++}return!1},t.prototype.endsWith=function(t){var e,n,i,o,r;if("string"==typeof t)return""===t||this.text().slice(-t.length)===t;for(e=this.characters.slice().reverse(),n=i=0,o=(r=t.characters.slice().reverse()).length;i<o;n=++i)if(!r[n].eq(e[n]))return!1;return!0},t.prototype.format=function(){var t,e,n,i,o,r,s;for(e=arguments[0],r=arguments[1],o=3<=arguments.length?c.call(arguments,2):[],r<0&&(r=this.length()+r+1),e<0&&(e=this.length()+e),i=this.copy(),n=s=e;e<=r?s<r:s>r;n=e<=r?++s:--s)(t=i.characters[n]).addTags.apply(t,o);return i},t.prototype.hasTags=function(){var t,e,n,i,o,r,s,a;for(i=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),void 0!==(n=arguments[o++])&&"boolean"!=typeof n&&(i.push(n),n=!1),e=!1,r=0,s=(a=this.characters).length;r<s;r++)if((t=a[r]).hasTags.apply(t,i))e=!0;else if(n)return!1;return e},t.prototype.html=function(){var t,e,n,i,o,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v,b,E;for(i="",s=[],o=[],e=[],c=0,u=(y=this.characters).length;c<u;c++){for(t=y[c],e=[],l=0,p=(v=s.slice().reverse()).length;l<p;l++)if(r=v[l],e.push(r),!t.hasTags(r)){for(h=0,g=e.length;h<g;h++)i+=e[h].tail(),s.pop(),o.pop();e=[]}for(d=0,m=(b=t._tags).length;d<m;d++)a=b[d],-1===o.indexOf(a.head())&&(a.selfClosing()||(i+=n=a.head(),s.push(a),o.push(n)));t._tags.length>0&&t._tags[0].selfClosing()&&(i+=t._tags[0].head()),i+=t.c()}for(_=0,f=(E=s.reverse()).length;_<f;_++)i+=(a=E[_]).tail();return i},t.prototype.indexOf=function(t,e){var n,i,o,r,s;if(null==e&&(e=0),e<0&&(e=0),"string"==typeof t)return this.text().indexOf(t,e);for(;e<=this.length()-t.length();){for(n=!0,i=o=0,r=(s=t.characters).length;o<r;i=++o)if(!s[i].eq(this.characters[i+e])){n=!1;break}if(n)return e;e++}return-1},t.prototype.insert=function(t,e,n){var i,o,s,a,c,l,h,d,u,p,g,m,f,_,y,v;if(null==n&&(n=!0),o=this.slice(0,t),h=this.slice(t),t<0&&(t=this.length()+t),c=e,"string"==typeof e&&(c=new r.String(e,this._preserveWhitespace)),n&&t>0)for(a=(s=this.charAt(t-1)).tags(),s.isTag()&&a.shift(),"string"!=typeof e&&(c=c.copy()),d=0,g=(_=c.characters).length;d<g;d++)(i=_[d]).addTags.apply(i,a);for(l=o,u=0,m=(y=c.characters).length;u<m;u++)i=y[u],l.characters.push(i);for(p=0,f=(v=h.characters).length;p<f;p++)i=v[p],l.characters.push(i);return l},t.prototype.lastIndexOf=function(t,e){var n,i,o,r,s,a,c,l,h;if(null==e&&(e=0),e<0&&(e=0),i=this.characters.slice(e).reverse(),e=0,"string"==typeof t){if(!this.contains(t))return-1;for(t=t.split("").reverse();e<=i.length-t.length;){for(o=!0,s=0,r=a=0,l=t.length;a<l;r=++a)if(n=t[r],i[r+e].isTag()&&(s+=1),n!==i[s+r+e].c()){o=!1;break}if(o)return e;e++}return-1}for(t=t.characters.slice().reverse();e<=i.length-t.length;){for(o=!0,r=c=0,h=t.length;c<h;r=++c)if(!(n=t[r]).eq(i[r+e])){o=!1;break}if(o)return e;e++}return-1},t.prototype.optimize=function(){var t,e,n,i,o,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v,b,E,w,C,T,S,x,L,M,I,D,k,R,A,N;for(a=[],r=[],i=null,g=0,y=(M=this.characters.slice().reverse()).length;g<y;g++){for((t=M[g])._runLengthMap={},t._runLengthMapSize=0,e=[],m=0,v=(I=a.slice().reverse()).length;m<v;m++)if(s=I[m],e.push(s),!t.hasTags(s)){for(f=0,b=e.length;f<b;f++)e[f],a.pop(),r.pop();e=[]}for(_=0,E=(D=t._tags).length;_<E;_++)p=D[_],-1===r.indexOf(p.head())&&(p.selfClosing()||(a.push(p),r.push(p.head())));for(S=0,w=a.length;S<w;S++)n=(p=a[S]).head(),i?(t._runLengthMap[n]||(t._runLengthMap[n]=[p,0]),d=0,i._runLengthMap[n]&&(d=i._runLengthMap[n][1]),t._runLengthMap[n][1]=d+1):t._runLengthMap[n]=[p,1];i=t}for(l=function(t,e){return e[1]-t[1]},N=[],x=0,C=(k=this.characters).length;x<C;x++)if(!((o=(t=k[x])._tags.length)>0&&t._tags[0].selfClosing()&&o<3||o<2)){for(p in h=[],R=t._runLengthMap)c=R[p],h.push(c);for(h.sort(l),L=0,T=(A=t._tags.slice()).length;L<T;L++)(p=A[L]).selfClosing()||t.removeTags(p);N.push(t.addTags.apply(t,function(){var t,e,n;for(n=[],e=0,t=h.length;e<t;e++)u=h[e],n.push(u[0]);return n}()))}return N},t.prototype.slice=function(t,e){var n,i;return(i=new r.String("",this._preserveWhitespace)).characters=function(){var i,o,r,s;for(s=[],i=0,o=(r=this.characters.slice(t,e)).length;i<o;i++)n=r[i],s.push(n.copy());return s}.call(this),i},t.prototype.split=function(t,e){var n,i,o,r,s,a,c,l,h;for(null==t&&(t=""),null==e&&(e=0),s=0,0,r=[0];!(e>0&&0>e)&&-1!==(o=this.indexOf(t,s));)r.push(o),s=o+1;for(r.push(this.length()),c=[],i=l=0,h=r.length-2;0<=h?l<=h:l>=h;i=0<=h?++l:--l)a=r[i],i>0&&(a+=1),n=r[i+1],c.push(this.slice(a,n));return c},t.prototype.startsWith=function(t){var e,n,i,o;if("string"==typeof t)return this.text().slice(0,t.length)===t;for(e=n=0,i=(o=t.characters).length;n<i;e=++n)if(!o[e].eq(this.characters[e]))return!1;return!0},t.prototype.substr=function(t,e){return e<=0?new r.String("",this._preserveWhitespace):(t<0&&(t=this.length()+t),void 0===e&&(e=this.length()-t),this.slice(t,t+e))},t.prototype.substring=function(t,e){return void 0===e&&(e=this.length()),this.slice(t,e)},t.prototype.text=function(){var t,e,n,i,o;for(e="",n=0,i=(o=this.characters).length;n<i;n++)(t=o[n]).isTag()?t.isTag("br")&&(e+="\n"):(t.c(),e+=t.c());return this.constructor.decode(e)},t.prototype.toLowerCase=function(){var t,e,n,i,o;for(n=0,i=(o=(e=this.copy()).characters).length;n<i;n++)1===(t=o[n])._c.length&&(t._c=t._c.toLowerCase());return e},t.prototype.toUpperCase=function(){var t,e,n,i,o;for(n=0,i=(o=(e=this.copy()).characters).length;n<i;n++)1===(t=o[n])._c.length&&(t._c=t._c.toUpperCase());return e},t.prototype.trim=function(){var t,e,n,i,o,s,a,c,l,h;for(l=this.characters,e=o=0,a=l.length;o<a&&(t=l[e]).isWhitespace();e=++o);for(h=this.characters.slice().reverse(),i=s=0,c=h.length;s<c&&(t=h[i]).isWhitespace();i=++s);return i=this.length()-i-1,(n=new r.String("",this._preserveWhitespace)).characters=function(){var n,o,r,s;for(s=[],n=0,o=(r=this.characters.slice(e,+i+1||9e9)).length;n<o;n++)t=r[n],s.push(t.copy());return s}.call(this),n},t.prototype.trimLeft=function(){var t,e,n,i,o,s,a;for(i=this.length()-1,a=this.characters,e=o=0,s=a.length;o<s&&(t=a[e]).isWhitespace();e=++o);return(n=new r.String("",this._preserveWhitespace)).characters=function(){var n,o,r,s;for(s=[],n=0,o=(r=this.characters.slice(e,+i+1||9e9)).length;n<o;n++)t=r[n],s.push(t.copy());return s}.call(this),n},t.prototype.trimRight=function(){var t,e,n,i,o,s;for(0,s=this.characters.slice().reverse(),n=i=0,o=s.length;i<o&&(t=s[n]).isWhitespace();n=++i);return n=this.length()-n-1,(e=new r.String("",this._preserveWhitespace)).characters=function(){var e,i,o,r;for(r=[],e=0,i=(o=this.characters.slice(0,+n+1||9e9)).length;e<i;e++)t=o[e],r.push(t.copy());return r}.call(this),e},t.prototype.unformat=function(){var t,e,n,i,o,r,s;for(e=arguments[0],r=arguments[1],o=3<=arguments.length?c.call(arguments,2):[],r<0&&(r=this.length()+r+1),e<0&&(e=this.length()+e),i=this.copy(),n=s=e;e<=r?s<r:s>r;n=e<=r?++s:--s)(t=i.characters[n]).removeTags.apply(t,o);return i},t.prototype.copy=function(){var t,e;return(e=new r.String("",this._preserveWhitespace)).characters=function(){var e,n,i,o;for(o=[],e=0,n=(i=this.characters).length;e<n;e++)t=i[e],o.push(t.copy());return o}.call(this),e},t.decode=function(t){var e;return(e=document.createElement("textarea")).innerHTML=t,e.textContent},t.encode=function(t){var e;return(e=document.createElement("textarea")).textContent=t,e.innerHTML},t.join=function(t,e){var n,i,o,r;for(n=e.shift(),o=0,r=e.length;o<r;o++)i=e[o],n=n.concat(t,i);return n},t}(),e="AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz-_$".split(""),n=e.concat("1234567890".split("")),i=n.concat([":"]),o=n.concat(["#"]),s=n.concat([":"]),a=function(){function t(){this.fsm=new FSM.Machine(this),this.fsm.setInitialState(1),this.fsm.addTransitionAny(1,null,(function(t){return this._pushChar(t)})),this.fsm.addTransition("<",1,3),this.fsm.addTransition("&",1,2),this.fsm.addTransitions(o,2,null,(function(t){return this.entity+=t})),this.fsm.addTransition(";",2,1,(function(){return this._pushChar("&"+this.entity+";"),this.entity=""})),this.fsm.addTransitions([" ","\n"],3),this.fsm.addTransitions(e,3,4,(function(){return this._back()})),this.fsm.addTransition("/",3,5),this.fsm.addTransitions([" ","\n"],4),this.fsm.addTransitions(e,4,6,(function(){return this._back()})),this.fsm.addTransitions([" ","\n"],5),this.fsm.addTransitions(e,5,7,(function(){return this._back()})),this.fsm.addTransitions(s,6,null,(function(t){return this.tagName+=t})),this.fsm.addTransitions([" ","\n"],6,10),this.fsm.addTransition("/",6,8,(function(){return this.selfClosing=!0})),this.fsm.addTransition(">",6,1,(function(){return this._pushTag()})),this.fsm.addTransitions([" ","\n"],8),this.fsm.addTransition(">",8,1,(function(){return this._pushTag()})),this.fsm.addTransitions([" ","\n"],10),this.fsm.addTransition("/",10,8,(function(){return this.selfClosing=!0})),this.fsm.addTransition(">",10,1,(function(){return this._pushTag()})),this.fsm.addTransitions(e,10,11,(function(){return this._back()})),this.fsm.addTransitions(s,7,null,(function(t){return this.tagName+=t})),this.fsm.addTransitions([" ","\n"],7,9),this.fsm.addTransition(">",7,1,(function(){return this._popTag()})),this.fsm.addTransitions([" ","\n"],9),this.fsm.addTransition(">",9,1,(function(){return this._popTag()})),this.fsm.addTransitions(i,11,null,(function(t){return this.attributeName+=t})),this.fsm.addTransitions([" ","\n"],11,12),this.fsm.addTransition("=",11,13),this.fsm.addTransitions([" ","\n"],12),this.fsm.addTransition("=",12,13),this.fsm.addTransitions(">",11,10,(function(){return this._pushAttribute(),this._back()})),this.fsm.addTransitionAny(12,10,(function(){return this._pushAttribute(),this._back()})),this.fsm.addTransitions([" ","\n"],13),this.fsm.addTransition("'",13,14),this.fsm.addTransition('"',13,15),this.fsm.addTransitions(n.concat(["&"],13,16,(function(){return this._back()}))),this.fsm.addTransition(" ",16,10,(function(){return this._pushAttribute()})),this.fsm.addTransitions(["/",">"],16,10,(function(){return this._back(),this._pushAttribute()})),this.fsm.addTransition("&",16,17),this.fsm.addTransitionAny(16,null,(function(t){return this.attributeValue+=t})),this.fsm.addTransition("'",14,10,(function(){return this._pushAttribute()})),this.fsm.addTransition("&",14,18),this.fsm.addTransitionAny(14,null,(function(t){return this.attributeValue+=t})),this.fsm.addTransition('"',15,10,(function(){return this._pushAttribute()})),this.fsm.addTransition("&",15,19),this.fsm.addTransitionAny(15,null,(function(t){return this.attributeValue+=t})),this.fsm.addTransitions(o,17,null,(function(t){return this.entity+=t})),this.fsm.addTransitions(o,18,(function(t){return this.entity+=t})),this.fsm.addTransitions(o,19,null,(function(t){return this.entity+=t})),this.fsm.addTransition(";",17,16,(function(){return this.attributeValue+="&"+this.entity+";",this.entity=""})),this.fsm.addTransition(";",18,14,(function(){return this.attributeValue+="&"+this.entity+";",this.entity=""})),this.fsm.addTransition(";",19,15,(function(){return this.attributeValue+="&"+this.entity+";",this.entity=""}))}return t.prototype._back=function(){return this.head--},t.prototype._pushAttribute=function(){return this.attributes[this.attributeName]=this.attributeValue,this.attributeName="",this.attributeValue=""},t.prototype._pushChar=function(t){var e,n;if(e=new r.Character(t,this.tags),this._preserveWhitespace)this.string.characters.push(e);else if(!this.string.length()||e.isTag()||e.isEntity()||!e.isWhitespace()||!(n=this.string.characters[this.string.length()-1]).isWhitespace()||n.isTag()||n.isEntity())return this.string.characters.push(e)},t.prototype._pushTag=function(){var t,e;return t=new r.Tag(this.tagName,this.attributes),this.tags.push(t),t.selfClosing()&&(this._pushChar(""),this.tags.pop(),!this.selfClosed&&(e=this.tagName,l.call(r.Tag.SELF_CLOSING,e)>=0)&&this.fsm.reset()),this.tagName="",this.selfClosed=!1,this.attributes={}},t.prototype._popTag=function(){for(var t,e;e=this.tags.pop(),this.string.length()&&((t=this.string.characters[this.string.length()-1]).isTag()||t.isEntity()||!t.isWhitespace()||t.removeTags(e)),e.name()!==this.tagName.toLowerCase(););return this.tagName=""},t.prototype.parse=function(t,e){var n,i;for(this._preserveWhitespace=e,this.reset(),t=this.preprocess(t),this.fsm.parser=this;this.head<t.length;){n=t[this.head];try{this.fsm.process(n)}catch(t){throw i=t,new Error("Error at char "+this.head+" >> "+i)}this.head++}return this.string},t.prototype.preprocess=function(t){return t=(t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).replace(/<!--[\s\S]*?-->/g,""),this._preserveWhitespace||(t=t.replace(/\s+/g," ")),t},t.prototype.reset=function(){return this.fsm.reset(),this.head=0,this.string=new r.String,this.entity="",this.tags=[],this.tagName="",this.selfClosing=!1,this.attributes={},this.attributeName="",this.attributeValue=""},t}(),r.Tag=function(){function t(t,e){var n,i;for(n in this._name=t.toLowerCase(),this._selfClosing=!0===r.Tag.SELF_CLOSING[this._name],this._head=null,this._attributes={},e)i=e[n],this._attributes[n]=i}return t.SELF_CLOSING={area:!0,base:!0,br:!0,hr:!0,img:!0,input:!0,"link meta":!0,wbr:!0},t.prototype.head=function(){var t,e,n,i;if(!this._head){for(e in t=[],i=this._attributes)(n=i[e])?t.push(e+'="'+n+'"'):t.push(""+e);t.sort(),t.unshift(this._name),this._head="<"+t.join(" ")+">"}return this._head},t.prototype.name=function(){return this._name},t.prototype.selfClosing=function(){return this._selfClosing},t.prototype.tail=function(){return this._selfClosing?"":"</"+this._name+">"},t.prototype.attr=function(t,e){return void 0===e?this._attributes[t]:(this._attributes[t]=e,this._head=null)},t.prototype.removeAttr=function(t){if(void 0!==this._attributes[t])return delete this._attributes[t],this._head=null},t.prototype.copy=function(){return new r.Tag(this._name,this._attributes)},t}(),r.Character=function(){function t(t,e){this._c=t,t.length>1&&(this._c=t.toLowerCase()),this._tags=[],this.addTags.apply(this,e)}return t.prototype.c=function(){return this._c},t.prototype.isEntity=function(){return this._c.length>1},t.prototype.isTag=function(t){return!(0===this._tags.length||!this._tags[0].selfClosing())&&(!t||this._tags[0].name()===t)},t.prototype.isWhitespace=function(){var t;return" "===(t=this._c)||"\n"===t||"&nbsp;"===t||this.isTag("br")},t.prototype.tags=function(){var t;return function(){var e,n,i,o;for(o=[],e=0,n=(i=this._tags).length;e<n;e++)t=i[e],o.push(t.copy());return o}.call(this)},t.prototype.addTags=function(){var t,e,n,i,o;for(o=[],n=0,i=(e=1<=arguments.length?c.call(arguments,0):[]).length;n<i;n++)t=e[n],Array.isArray(t)||(t.selfClosing()?this.isTag()||this._tags.unshift(t.copy()):o.push(this._tags.push(t.copy())));return o},t.prototype.eq=function(t){var e,n,i,o,r,s,a;if(this.c()!==t.c())return!1;if(this._tags.length!==t._tags.length)return!1;for(e={},n=0,o=(s=this._tags).length;n<o;n++)e[s[n].head()]=!0;for(i=0,r=(a=t._tags).length;i<r;i++)if(!e[a[i].head()])return!1;return!0},t.prototype.hasTags=function(){var t,e,n,i,o,r,s,a,l;for(i=1<=arguments.length?c.call(arguments,0):[],n={},e={},o=0,s=(l=this._tags).length;o<s;o++)n[(t=l[o]).name()]=!0,e[t.head()]=!0;for(r=0,a=i.length;r<a;r++)if("string"==typeof(t=i[r])){if(void 0===n[t])return!1}else if(void 0===e[t.head()])return!1;return!0},t.prototype.removeTags=function(){var t,e,n,i,o,r;if(0!==(i=1<=arguments.length?c.call(arguments,0):[]).length){for(e={},t={},o=0,r=i.length;o<r;o++)"string"==typeof(n=i[o])?e[n]=n:t[n.head()]=n;return[],this._tags=this._tags.filter((function(n){if(!t[n.head()]&&!e[n.name()])return n}))}this._tags=[]},t.prototype.copy=function(){var t;return new r.Character(this._c,function(){var e,n,i,o;for(o=[],e=0,n=(i=this._tags).length;e<n;e++)t=i[e],o.push(t.copy());return o}.call(this))},t}()}.call(this),function(){var e,n,i,o,r,s,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};(e={}).Range=function(){function t(t,e){this.set(t,e)}return t.prototype.isCollapsed=function(){return this._from===this._to},t.prototype.span=function(){return this._to-this._from},t.prototype.collapse=function(){return this._to=this._from},t.prototype.eq=function(t){return this.get()[0]===t.get()[0]&&this.get()[1]===t.get()[1]},t.prototype.get=function(){return[this._from,this._to]},t.prototype.select=function(t){var n,i,r,s,a,c,l,h,d;return e.Range.unselectAll(),n=document.createRange(),a=(h=o(t,this._from))[0],l=h[1],i=(d=o(t,this._to))[0],s=d[1],c=a.length||0,r=i.length||0,n.setStart(a,Math.min(l,c)),n.setEnd(i,Math.min(s,r)),window.getSelection().addRange(n)},t.prototype.set=function(t,e){return t=Math.max(0,t),e=Math.max(0,e),this._from=Math.min(t,e),this._to=Math.max(t,e)},t.prepareElement=function(t){var e,i,o,r,s,a;for(a=[],e=r=0,s=(o=t.querySelectorAll(n.join(", "))).length;r<s;e=++r)(i=o[e]).parentNode.insertBefore(document.createTextNode(""),i),e<o.length-1?a.push(i.parentNode.insertBefore(document.createTextNode(""),i.nextSibling)):a.push(void 0);return a},t.query=function(t){var n,o,a,c,l,h,d;c=new e.Range(0,0);try{n=window.getSelection().getRangeAt(0)}catch(t){return c}return null===t.firstChild&&null===t.lastChild?c:i(n.startContainer,t)&&i(n.endContainer,t)?(l=(d=r(t,n))[0],h=d[1],o=d[2],a=d[3],c.set(s(t,l)+h,s(t,o)+a),c):c},t.rect=function(){var t,e,n;try{t=window.getSelection().getRangeAt(0)}catch(t){return null}return t.collapsed?(e=document.createElement("span"),t.insertNode(e),n=e.getBoundingClientRect(),e.parentNode.removeChild(e),n):t.getBoundingClientRect()},t.unselectAll=function(){if(window.getSelection())return window.getSelection().removeAllRanges()},t}(),n=["br","img","input"],i=function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},o=function(t,e){var i,o,r,s,c;if(0===t.childNodes.length)return[t,e];for(i=null,o=e,r=function(){var e,n,i,o;for(o=[],e=0,n=(i=t.childNodes).length;e<n;e++)s=i[e],o.push(s);return o}();r.length>0;)switch((i=r.shift()).nodeType){case Node.TEXT_NODE:if(i.textContent.length>=o)return[i,o];o-=i.textContent.length;break;case Node.ELEMENT_NODE:if(c=i.nodeName.toLowerCase(),a.call(n,c)>=0){if(0===o)return[i,0];o=Math.max(0,o-1)}else i.childNodes&&Array.prototype.unshift.apply(r,function(){var t,e,n,o;for(o=[],t=0,e=(n=i.childNodes).length;t<e;t++)s=n[t],o.push(s);return o}())}return[i,o]},s=function(t,e){var i,o,r,s,c,l;if(0===t.childNodes.length)return 0;for(r=0,i=function(){var e,n,i,r;for(r=[],e=0,n=(i=t.childNodes).length;e<n;e++)o=i[e],r.push(o);return r}();i.length>0;){if((s=i.shift())===e)return c=s.nodeName.toLowerCase(),a.call(n,c)>=0?r+1:r;switch(s.nodeType){case Node.TEXT_NODE:r+=s.textContent.length;break;case Node.ELEMENT_NODE:l=s.nodeName.toLowerCase(),a.call(n,l)>=0?r+=1:s.childNodes&&Array.prototype.unshift.apply(i,function(){var t,e,n,i;for(i=[],t=0,e=(n=s.childNodes).length;t<e;t++)o=n[t],i.push(o);return i}())}}return r},r=function(t,e){var i,o,r,s,c,l,h,d,u,p,g,m,f,_;if(o=t.childNodes,(u=e.cloneRange()).collapse(!0),(c=e.cloneRange()).collapse(!1),h=u.startContainer,d=u.startOffset,r=c.endContainer,s=c.endOffset,!u.comparePoint)return[h,d,r,s];if(h===t)for(d=(h=o[o.length-1]).textContent.length,l=p=0,m=o.length;p<m;l=++p)if(i=o[l],1===u.comparePoint(i,0)){0===l?(h=i,d=0):(h=o[l-1],d=i.textContent.length),_=h.nodeName.toLowerCase,a.call(n,_)>=0&&(d=1);break}if(e.collapsed)return[h,d,h,d];if(r===t)for(s=(r=o[o.length-1]).textContent.length,l=g=0,f=o.length;g<f;l=++g)i=o[l],1===c.comparePoint(i,0)&&(r=0===l?i:o[l-1],s=i.textContent.length+1);return[h,d,r,s]},"undefined"!=typeof window&&(window.ContentSelect=e),t.exports&&(t.exports=e)}.call(this),function(){var e,n,i,o,r=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a={}.hasOwnProperty,c=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l=function(t,e){return function(){return t.apply(e,arguments)}};e={ALIGNMENT_CLASS_NAMES:{left:"align-left",right:"align-right"},DEFAULT_MAX_ELEMENT_WIDTH:800,DEFAULT_MIN_ELEMENT_WIDTH:80,DRAG_HOLD_DURATION:500,DROP_EDGE_SIZE:50,ENABLE_DRAG_CLONING:!1,HELPER_CHAR_LIMIT:250,INDENT:"    ",LANGUAGE:"en",LINE_ENDINGS:"\n",PREFER_LINE_BREAKS:!1,RESIZE_CORNER_SIZE:15,TRIM_WHITESPACE:!0,_translations:{},_:function(t){var n;return n=e.LANGUAGE,e._translations[n]&&e._translations[n][t]?e._translations[n][t]:t},addTranslations:function(t,n){return e._translations[t]=n},addCSSClass:function(t,e){var n,i;if(!t.classList)return(i=t.getAttribute("class"))?-1===function(){var t,e,o,r;for(r=[],t=0,e=(o=i.split(" ")).length;t<e;t++)n=o[t],r.push(n);return r}().indexOf(e)?t.setAttribute("class",i+" "+e):void 0:t.setAttribute("class",e);t.classList.add(e)},attributesToString:function(t){var e,n,i,o,r,s;if(!t)return"";for((i=function(){var e;for(n in e=[],t)e.push(n);return e}()).sort(),e=[],r=0,s=i.length;r<s;r++)n=i[r],""===(o=t[n])?e.push(n):(o=(o=HTMLString.String.encode(o)).replace(/"/g,"&quot;"),e.push(n+'="'+o+'"'));return e.join(" ")},removeCSSClass:function(t,e){var n,i,o,r;return t.classList?(t.classList.remove(e),void(0===t.classList.length&&t.removeAttribute("class"))):(i=t.getAttribute("class"))&&(o=(r=function(){var t,e,o,r;for(r=[],t=0,e=(o=i.split(" ")).length;t<e;t++)n=o[t],r.push(n);return r}()).indexOf(e))>-1?(r.splice(o,1),r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class")):void 0}},"undefined"!=typeof window&&(window.ContentEdit=e),t.exports&&(t.exports=e),i=function(){function t(){this._tagNames={}}return t.prototype.register=function(){var t,e,n,i,o,s;for(t=arguments[0],s=[],i=0,o=(n=2<=arguments.length?r.call(arguments,1):[]).length;i<o;i++)e=n[i],s.push(this._tagNames[e.toLowerCase()]=t);return s},t.prototype.match=function(t){return t=t.toLowerCase(),this._tagNames[t]?this._tagNames[t]:e.Static},t}(),e.TagNames=function(){var t;function e(){}return t=null,e.get=function(){return null!=t?t:t=new i},e}(),e.Node=function(){function t(){this._bindings={},this._parent=null,this._modified=null}return t.prototype.lastModified=function(){return this._modified},t.prototype.parent=function(){return this._parent},t.prototype.parents=function(){var t,e;for(e=[],t=this._parent;t;)e.push(t),t=t._parent;return e},t.prototype.type=function(){return"Node"},t.prototype.html=function(t){throw null==t&&(t=""),new Error("`html` not implemented")},t.prototype.bind=function(t,e){return void 0===this._bindings[t]&&(this._bindings[t]=[]),this._bindings[t].push(e),e},t.prototype.trigger=function(){var t,e,n,i,o,s,a;if(n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],this._bindings[n]){for(a=[],i=0,o=(s=this._bindings[n]).length;i<o;i++)(e=s[i])&&a.push(e.call.apply(e,[this].concat(r.call(t))));return a}},t.prototype.unbind=function(t,e){var n,i,o,r,s;if(t)if(e){if(this._bindings[t]){for(s=[],n=i=0,o=(r=this._bindings[t]).length;i<o;n=++i)r[n]===e?s.push(this._bindings[t].splice(n,1)):s.push(void 0);return s}}else this._bindings[t]=void 0;else this._bindings={}},t.prototype.commit=function(){return this._modified=null,e.Root.get().trigger("commit",this)},t.prototype.taint=function(){var t,n,i,o,r;for(t=Date.now(),this._modified=t,i=0,o=(r=this.parents()).length;i<o;i++)r[i]._modified=t;return(n=e.Root.get())._modified=t,n.trigger("taint",this)},t.prototype.closest=function(t){var e;for(e=this.parent();e&&!t(e);)e=e.parent?e.parent():null;return e},t.prototype.next=function(){var t,e,n,i,o,r;if(this.children&&this.children.length>0)return this.children[0];for(i=0,o=(r=[this].concat(this.parents())).length;i<o;i++){if(!(n=r[i]).parent())return null;if((e=(t=n.parent().children).indexOf(n))<t.length-1)return t[e+1]}},t.prototype.nextContent=function(){return this.nextWithTest((function(t){return void 0!==t.content}))},t.prototype.nextSibling=function(){var t;return(t=this.parent().children.indexOf(this))===this.parent().children.length-1?null:this.parent().children[t+1]},t.prototype.nextWithTest=function(t){var e;for(e=this;e;)if((e=e.next())&&t(e))return e},t.prototype.previous=function(){var t,e;if(!this.parent())return null;if((t=this.parent().children)[0]===this)return this.parent();for(e=t[t.indexOf(this)-1];e.children&&e.children.length;)e=e.children[e.children.length-1];return e},t.prototype.previousContent=function(){return this.previousWithTest((function(t){return void 0!==t.content}))},t.prototype.previousSibling=function(){var t;return 0===(t=this.parent().children.indexOf(this))?null:this.parent().children[t-1]},t.prototype.previousWithTest=function(t){var e;for(e=this;e;)if((e=e.previous())&&t(e))return e},t.extend=function(t){var e,n,i;for(e in i=t.prototype)n=i[e],"constructor"!==e&&(this.prototype[e]=n);for(e in t)n=t[e],s.call("__super__",e)>=0||(this.prototype[e]=n);return this},t.fromDOMElement=function(t){throw new Error("`fromDOMElement` not implemented")},t}(),e.NodeCollection=function(t){function n(){n.__super__.constructor.call(this),this.children=[]}return c(n,t),n.prototype.descendants=function(){var t,e,n;for(t=[],n=this.children.slice();n.length>0;)e=n.shift(),t.push(e),e.children&&e.children.length>0&&(n=e.children.slice().concat(n));return t},n.prototype.isMounted=function(){return!1},n.prototype.type=function(){return"NodeCollection"},n.prototype.attach=function(t,n){return t.parent()&&t.parent().detach(t),t._parent=this,void 0!==n?this.children.splice(n,0,t):this.children.push(t),t.mount&&this.isMounted()&&t.mount(),this.taint(),e.Root.get().trigger("attach",this,t)},n.prototype.commit=function(){var t,n,i;for(t=0,n=(i=this.descendants()).length;t<n;t++)i[t]._modified=null;return this._modified=null,e.Root.get().trigger("commit",this)},n.prototype.detach=function(t){var n;if(-1!==(n=this.children.indexOf(t)))return t.unmount&&this.isMounted()&&t.isMounted()&&t.unmount(),this.children.splice(n,1),t._parent=null,this.taint(),e.Root.get().trigger("detach",this,t)},n}(e.Node),e.Element=function(t){function n(t,e){n.__super__.constructor.call(this),this._tagName=t.toLowerCase(),this._attributes=e||{},this._domElement=null,this._behaviours={drag:!0,drop:!0,merge:!0,remove:!0,resize:!0,spawn:!0}}return c(n,t),n.prototype.attributes=function(){var t,e,n,i;for(e in t={},i=this._attributes)n=i[e],t[e]=n;return t},n.prototype.cssTypeName=function(){return"element"},n.prototype.domElement=function(){return this._domElement},n.prototype.isFixed=function(){return this.parent()&&"Fixture"===this.parent().type()},n.prototype.isFocused=function(){return e.Root.get().focused()===this},n.prototype.isMounted=function(){return null!==this._domElement},n.prototype.type=function(){return"Element"},n.prototype.typeName=function(){return"Element"},n.prototype.addCSSClass=function(t){var e;if(e=!1,this.hasCSSClass(t)||(e=!0,this.attr("class")?this.attr("class",this.attr("class")+" "+t):this.attr("class",t)),this._addCSSClass(t),e)return this.taint()},n.prototype.attr=function(t,e){return t=t.toLowerCase(),void 0===e?this._attributes[t]:(this._attributes[t]=e,this.isMounted()&&"class"!==t.toLowerCase()&&this._domElement.setAttribute(t,e),this.taint())},n.prototype.blur=function(){var t;if(t=e.Root.get(),this.isFocused())return this._removeCSSClass("ce-element--focused"),t._focused=null,t.trigger("blur",this)},n.prototype.can=function(t,e){return void 0===e?!this.isFixed()&&this._behaviours[t]:this._behaviours[t]=e},n.prototype.clone=function(){var t;return(t=document.createElement("div")).innerHTML=this.html(),this.constructor.fromDOMElement(t.children[0])},n.prototype.createDraggingDOMElement=function(){var t;if(this.isMounted())return(t=document.createElement("div")).setAttribute("class","ce-drag-helper ce-drag-helper--type-"+this.cssTypeName()),t.setAttribute("data-ce-type",e._(this.typeName())),t},n.prototype.drag=function(t,n){var i;if(this.isMounted()&&this.can("drag"))return(i=e.Root.get()).startDragging(this,t,n),i.trigger("drag",this)},n.prototype.drop=function(t,n){var i;if(this.can("drop")){if(i=e.Root.get(),t){if(t._removeCSSClass("ce-element--drop"),t._removeCSSClass("ce-element--drop-"+n[0]),t._removeCSSClass("ce-element--drop-"+n[1]),this.constructor.droppers[t.type()])return this.constructor.droppers[t.type()](this,t,n),void i.trigger("drop",this,t,n);if(t.constructor.droppers[this.type()])return t.constructor.droppers[this.type()](this,t,n),void i.trigger("drop",this,t,n)}return i.trigger("drop",this,null,null)}},n.prototype.focus=function(t){var n;if(n=e.Root.get(),!this.isFocused())return n.focused()&&n.focused().blur(),this._addCSSClass("ce-element--focused"),n._focused=this,this.isMounted()&&!t&&this.domElement().focus(),n.trigger("focus",this)},n.prototype.hasCSSClass=function(t){var e;return!!(this.attr("class")&&function(){var t,n,i,o;for(o=[],t=0,n=(i=this.attr("class").split(" ")).length;t<n;t++)e=i[t],o.push(e);return o}.call(this).indexOf(t)>-1)},n.prototype.merge=function(t){return!(!this.can("merge")||!this.can("remove"))&&(this.constructor.mergers[t.type()]?this.constructor.mergers[t.type()](t,this):t.constructor.mergers[this.type()]?t.constructor.mergers[this.type()](t,this):void 0)},n.prototype.mount=function(){var t;return this._domElement||(this._domElement=document.createElement(this.tagName())),(t=this.nextSibling())?this.parent().domElement().insertBefore(this._domElement,t.domElement()):this.isFixed()?(this.parent().domElement().parentNode.replaceChild(this._domElement,this.parent().domElement()),this.parent()._domElement=this._domElement):this.parent().domElement().appendChild(this._domElement),this._addDOMEventListeners(),this._addCSSClass("ce-element"),this._addCSSClass("ce-element--type-"+this.cssTypeName()),this.isFocused()&&this._addCSSClass("ce-element--focused"),e.Root.get().trigger("mount",this)},n.prototype.removeAttr=function(t){if(t=t.toLowerCase(),this._attributes[t])return delete this._attributes[t],this.isMounted()&&"class"!==t.toLowerCase()&&this._domElement.removeAttribute(t),this.taint()},n.prototype.removeCSSClass=function(t){var e,n,i;if(this.hasCSSClass(t))return(n=(i=function(){var t,n,i,o;for(o=[],t=0,n=(i=this.attr("class").split(" ")).length;t<n;t++)e=i[t],o.push(e);return o}.call(this)).indexOf(t))>-1&&i.splice(n,1),i.length?this.attr("class",i.join(" ")):this.removeAttr("class"),this._removeCSSClass(t),this.taint()},n.prototype.tagName=function(t){return void 0===t?this._tagName:(this._tagName=t.toLowerCase(),this.isMounted()&&(this.unmount(),this.mount()),this.taint())},n.prototype.unmount=function(){return this._removeDOMEventListeners(),this.isFixed()?(this._removeCSSClass("ce-element"),this._removeCSSClass("ce-element--type-"+this.cssTypeName()),void this._removeCSSClass("ce-element--focused")):(this._domElement.parentNode&&this._domElement.parentNode.removeChild(this._domElement),this._domElement=null,e.Root.get().trigger("unmount",this))},n.prototype._addDOMEventListeners=function(){var t,e,n,i,o;for(e in this._domEventHandlers={dragstart:function(t){return t.preventDefault()},focus:function(t){return t.preventDefault()},keydown:(o=this,function(t){return o._onKeyDown(t)}),keyup:function(t){return function(e){return t._onKeyUp(e)}}(this),mousedown:function(t){return function(e){if(0===e.button)return t._onMouseDown(e)}}(this),mousemove:function(t){return function(e){return t._onMouseMove(e)}}(this),mouseover:function(t){return function(e){return t._onMouseOver(e)}}(this),mouseout:function(t){return function(e){return t._onMouseOut(e)}}(this),mouseup:function(t){return function(e){if(0===e.button)return t._onMouseUp(e)}}(this),dragover:function(t){return t.preventDefault()},drop:function(t){return function(e){return t._onNativeDrop(e)}}(this),paste:function(t){return function(e){return t._onPaste(e)}}(this)},i=[],n=this._domEventHandlers)t=n[e],i.push(this._domElement.addEventListener(e,t));return i},n.prototype._onKeyDown=function(t){},n.prototype._onKeyUp=function(t){},n.prototype._onMouseDown=function(t){if(this.focus)return this.focus(!0)},n.prototype._onMouseMove=function(t){return this._onOver(t)},n.prototype._onMouseOver=function(t){return this._onOver(t)},n.prototype._onMouseOut=function(t){var n;if(this._removeCSSClass("ce-element--over"),(n=e.Root.get()).dragging())return this._removeCSSClass("ce-element--drop"),this._removeCSSClass("ce-element--drop-above"),this._removeCSSClass("ce-element--drop-below"),this._removeCSSClass("ce-element--drop-center"),this._removeCSSClass("ce-element--drop-left"),this._removeCSSClass("ce-element--drop-right"),n._dropTarget=null},n.prototype._onMouseUp=function(t){return this._ieMouseDownEchoed=!1},n.prototype._onNativeDrop=function(t){return t.preventDefault(),t.stopPropagation(),e.Root.get().trigger("native-drop",this,t)},n.prototype._onPaste=function(t){return t.preventDefault(),t.stopPropagation(),e.Root.get().trigger("paste",this,t)},n.prototype._onOver=function(t){var n,i;if(this._addCSSClass("ce-element--over"),(n=(i=e.Root.get()).dragging())&&n!==this&&!i._dropTarget&&this.can("drop")&&(this.constructor.droppers[n.type()]||n.constructor.droppers[this.type()]))return this._addCSSClass("ce-element--drop"),i._dropTarget=this},n.prototype._removeDOMEventListeners=function(){var t,e,n,i;for(e in i=[],n=this._domEventHandlers)t=n[e],i.push(this._domElement.removeEventListener(e,t));return i},n.prototype._addCSSClass=function(t){if(this.isMounted())return e.addCSSClass(this._domElement,t)},n.prototype._attributesToString=function(){return Object.getOwnPropertyNames(this._attributes).length>0?" "+e.attributesToString(this._attributes):""},n.prototype._removeCSSClass=function(t){if(this.isMounted())return e.removeCSSClass(this._domElement,t)},n.droppers={},n.mergers={},n.placements=["above","below"],n.getDOMElementAttributes=function(t){var e,n,i,o,r;if(!t.hasAttributes())return{};for(n={},i=0,o=(r=t.attributes).length;i<o;i++)n[(e=r[i]).name.toLowerCase()]=e.value;return n},n._dropVert=function(t,n,i){var o;return e.ENABLE_DRAG_CLONING&&window.event.altKey?t=t.clone():t.parent().detach(t),o=n.parent().children.indexOf(n),"below"===i[0]&&(o+=1),n.parent().attach(t,o)},n._dropBoth=function(t,n,i){var o,r,s,a,c,l,h,d;if(e.ENABLE_DRAG_CLONING&&window.event.altKey?t=t.clone():t.parent().detach(t),c=n.parent().children.indexOf(n),"below"===i[0]&&"center"===i[1]&&(c+=1),r=e.ALIGNMENT_CLASS_NAMES.left,s=e.ALIGNMENT_CLASS_NAMES.right,t.a){if(t._removeCSSClass(r),t._removeCSSClass(s),t.a.class){for(o=[],l=0,h=(d=t.a.class.split(" ")).length;l<h;l++)(a=d[l])!==r&&a!==s&&o.push(a);o.length?t.a.class=o.join(" "):delete t.a.class}}else t.removeCSSClass(r),t.removeCSSClass(s);return"left"===i[1]&&(t.a?(t.a.class?t.a.class+=" "+r:t.a.class=r,t._addCSSClass(r)):t.addCSSClass(r)),"right"===i[1]&&(t.a?(t.a.class?t.a.class+=" "+s:t.a.class=s,t._addCSSClass(s)):t.addCSSClass(s)),n.parent().attach(t,c)},n}(e.Node),e.ElementCollection=function(t){function n(t,i){n.__super__.constructor.call(this,t,i),e.NodeCollection.prototype.constructor.call(this)}return c(n,t),n.extend(e.NodeCollection),n.prototype.cssTypeName=function(){return"element-collection"},n.prototype.isMounted=function(){return null!==this._domElement},n.prototype.type=function(){return"ElementCollection"},n.prototype.createDraggingDOMElement=function(){var t,i;if(this.isMounted())return t=n.__super__.createDraggingDOMElement.call(this),(i=this._domElement.textContent).length>e.HELPER_CHAR_LIMIT&&(i=i.substr(0,e.HELPER_CHAR_LIMIT)),t.innerHTML=i,t},n.prototype.detach=function(t){if(e.NodeCollection.prototype.detach.call(this,t),0===this.children.length&&this.parent())return this.parent().detach(this)},n.prototype.html=function(t){var n,i,o,r;return null==t&&(t=""),o=function(){var n,o,r,s;for(s=[],n=0,o=(r=this.children).length;n<o;n++)i=r[n],s.push(i.html(t+e.INDENT));return s}.call(this),r=e.LINE_ENDINGS,this.isFixed()?o.join(r):(n=this._attributesToString(),t+"<"+this.tagName()+n+">"+r+o.join(r)+r+t+"</"+this.tagName()+">")},n.prototype.mount=function(){var t,e,i,o,r,s,a,c;for(e in this._domElement=document.createElement(this._tagName),s=this._attributes)i=s[e],this._domElement.setAttribute(e,i);for(n.__super__.mount.call(this),c=[],o=0,r=(a=this.children).length;o<r;o++)t=a[o],c.push(t.mount());return c},n.prototype.unmount=function(){var t,e,i;for(t=0,e=(i=this.children).length;t<e;t++)i[t].unmount();return n.__super__.unmount.call(this)},n.prototype.blur=void 0,n.prototype.focus=void 0,n}(e.Element),e.ResizableElement=function(t){function n(t,e){n.__super__.constructor.call(this,t,e),this._domSizeInfoElement=null,this._aspectRatio=1}return c(n,t),n.prototype.aspectRatio=function(){return this._aspectRatio},n.prototype.maxSize=function(){var t;return(t=parseInt(this.attr("data-ce-max-width")||0))||(t=e.DEFAULT_MAX_ELEMENT_WIDTH),[t=Math.max(t,this.size()[0]),t*this.aspectRatio()]},n.prototype.minSize=function(){var t;return(t=parseInt(this.attr("data-ce-min-width")||0))||(t=e.DEFAULT_MIN_ELEMENT_WIDTH),[t=Math.min(t,this.size()[0]),t*this.aspectRatio()]},n.prototype.type=function(){return"ResizableElement"},n.prototype.mount=function(){return n.__super__.mount.call(this),this._domElement.setAttribute("data-ce-size",this._getSizeInfo())},n.prototype.resize=function(t,n,i){if(this.isMounted()&&this.can("resize"))return e.Root.get().startResizing(this,t,n,i,!0)},n.prototype.size=function(t){var e,n;return t?(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),n=this.minSize(),t[0]=Math.max(t[0],n[0]),t[1]=Math.max(t[1],n[1]),e=this.maxSize(),t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),this.attr("width",parseInt(t[0])),this.attr("height",parseInt(t[1])),this.isMounted()?(this._domElement.style.width=t[0]+"px",this._domElement.style.height=t[1]+"px",this._domElement.setAttribute("data-ce-size",this._getSizeInfo())):void 0):[parseInt(this.attr("width")||1),parseInt(this.attr("height")||1)]},n.prototype._onMouseDown=function(t){var e,i;return n.__super__._onMouseDown.call(this,t),(e=this._getResizeCorner(t.clientX,t.clientY))?this.resize(e,t.clientX,t.clientY):(clearTimeout(this._dragTimeout),this._dragTimeout=setTimeout((i=this,function(){return i.drag(t.pageX,t.pageY)}),150))},n.prototype._onMouseMove=function(t){var e;if(n.__super__._onMouseMove.call(this),this.can("resize"))return this._removeCSSClass("ce-element--resize-top-left"),this._removeCSSClass("ce-element--resize-top-right"),this._removeCSSClass("ce-element--resize-bottom-left"),this._removeCSSClass("ce-element--resize-bottom-right"),(e=this._getResizeCorner(t.clientX,t.clientY))?this._addCSSClass("ce-element--resize-"+e[0]+"-"+e[1]):void 0},n.prototype._onMouseOut=function(t){return n.__super__._onMouseOut.call(this),this._removeCSSClass("ce-element--resize-top-left"),this._removeCSSClass("ce-element--resize-top-right"),this._removeCSSClass("ce-element--resize-bottom-left"),this._removeCSSClass("ce-element--resize-bottom-right")},n.prototype._onMouseUp=function(t){if(n.__super__._onMouseUp.call(this),this._dragTimeout)return clearTimeout(this._dragTimeout)},n.prototype._getResizeCorner=function(t,n){var i,o,r,s,a;return t=(a=[t-(r=this._domElement.getBoundingClientRect()).left,n-r.top])[0],n=a[1],s=this.size(),o=e.RESIZE_CORNER_SIZE,o=Math.min(o,Math.max(parseInt(s[0]/4),1)),i=null,t<(o=Math.min(o,Math.max(parseInt(s[1]/4),1)))?n<o?i=["top","left"]:n>r.height-o&&(i=["bottom","left"]):t>r.width-o&&(n<o?i=["top","right"]:n>r.height-o&&(i=["bottom","right"])),i},n.prototype._getSizeInfo=function(){var t;return"w "+(t=this.size())[0]+"  h "+t[1]},n}(e.Element),e.Region=function(t){function n(t){n.__super__.constructor.call(this),this._domElement=t,this.setContent(t)}return c(n,t),n.prototype.domElement=function(){return this._domElement},n.prototype.isMounted=function(){return!0},n.prototype.type=function(){return"Region"},n.prototype.html=function(t){var n,i;return null==t&&(t=""),i=e.LINE_ENDINGS,function(){var e,i,o,r;for(r=[],e=0,i=(o=this.children).length;e<i;e++)n=o[e],r.push(n.html(t));return r}.call(this).join(i).trim()},n.prototype.setContent=function(t){var n,i,o,r,s,a,c,l,h,d,u,p,g;for(s=t,void 0===t.childNodes&&((l=document.createElement("div")).innerHTML=t,s=l),h=0,u=(g=this.children.slice()).length;h<u;h++)i=g[h],this.detach(i);for(c=e.TagNames.get(),r=function(){var t,e,i,o;for(o=[],t=0,e=(i=s.childNodes).length;t<e;t++)n=i[t],o.push(n);return o}(),d=0,p=r.length;d<p;d++)1===(o=r[d]).nodeType&&(a=(o.getAttribute("data-ce-tag")?c.match(o.getAttribute("data-ce-tag")):c.match(o.tagName)).fromDOMElement(o),s.removeChild(o),a&&this.attach(a));return e.Root.get().trigger("ready",this)},n}(e.NodeCollection),e.Fixture=function(t){function n(t){var i,o;n.__super__.constructor.call(this),this._domElement=t,o=e.TagNames.get(),i=(this._domElement.getAttribute("data-ce-tag")?o.match(this._domElement.getAttribute("data-ce-tag")):o.match(this._domElement.tagName)).fromDOMElement(this._domElement),this.children=[i],i._parent=this,i.mount(),e.Root.get().trigger("ready",this)}return c(n,t),n.prototype.domElement=function(){return this._domElement},n.prototype.isMounted=function(){return!0},n.prototype.type=function(){return"Fixture"},n.prototype.html=function(t){var n,i;return null==t&&(t=""),i=e.LINE_ENDINGS,function(){var e,i,o,r;for(r=[],e=0,i=(o=this.children).length;e<i;e++)n=o[e],r.push(n.html(t));return r}.call(this).join(i).trim()},n}(e.NodeCollection),n=function(t){function n(){this._onStopResizing=l(this._onStopResizing,this),this._onResize=l(this._onResize,this),this._onStopDragging=l(this._onStopDragging,this),this._onDrag=l(this._onDrag,this),n.__super__.constructor.call(this),this._focused=null,this._dragging=null,this._dropTarget=null,this._draggingDOMElement=null,this._resizing=null,this._resizingInit=null}return c(n,t),n.prototype.dragging=function(){return this._dragging},n.prototype.dropTarget=function(){return this._dropTarget},n.prototype.focused=function(){return this._focused},n.prototype.resizing=function(){return this._resizing},n.prototype.type=function(){return"Root"},n.prototype.cancelDragging=function(){if(this._dragging)return document.body.removeChild(this._draggingDOMElement),document.removeEventListener("mousemove",this._onDrag),document.removeEventListener("mouseup",this._onStopDragging),this._dragging._removeCSSClass("ce-element--dragging"),this._dragging=null,this._dropTarget=null,e.removeCSSClass(document.body,"ce--dragging")},n.prototype.startDragging=function(t,n,i){if(!this._dragging)return this._dragging=t,this._dragging._addCSSClass("ce-element--dragging"),this._draggingDOMElement=this._dragging.createDraggingDOMElement(),document.body.appendChild(this._draggingDOMElement),this._draggingDOMElement.style.left=n+"px",this._draggingDOMElement.style.top=i+"px",document.addEventListener("mousemove",this._onDrag),document.addEventListener("mouseup",this._onStopDragging),e.addCSSClass(document.body,"ce--dragging")},n.prototype._getDropPlacement=function(t,n){var i,o,r,s;return this._dropTarget?(n=(s=[t-(o=this._dropTarget.domElement().getBoundingClientRect()).left,n-o.top])[1],i="center",(t=s[0])<e.DROP_EDGE_SIZE?i="left":t>o.width-e.DROP_EDGE_SIZE&&(i="right"),r="above",n>o.height/2&&(r="below"),[r,i]):null},n.prototype._onDrag=function(t){var e,n,i;if(ContentSelect.Range.unselectAll(),this._draggingDOMElement.style.left=t.pageX+"px",this._draggingDOMElement.style.top=t.pageY+"px",this._dropTarget&&(e=this._getDropPlacement(t.clientX,t.clientY),this._dropTarget._removeCSSClass("ce-element--drop-above"),this._dropTarget._removeCSSClass("ce-element--drop-below"),this._dropTarget._removeCSSClass("ce-element--drop-center"),this._dropTarget._removeCSSClass("ce-element--drop-left"),this._dropTarget._removeCSSClass("ce-element--drop-right"),n=e[0],s.call(this._dragging.constructor.placements,n)>=0&&this._dropTarget._addCSSClass("ce-element--drop-"+e[0]),i=e[1],s.call(this._dragging.constructor.placements,i)>=0))return this._dropTarget._addCSSClass("ce-element--drop-"+e[1])},n.prototype._onStopDragging=function(t){var e;return e=this._getDropPlacement(t.clientX,t.clientY),this._dragging.drop(this._dropTarget,e),this.cancelDragging()},n.prototype.startResizing=function(t,n,i,o,r){var s,a;if(!this._resizing)return this._resizing=t,this._resizingInit={corner:n,fixed:r,origin:[i,o],size:t.size()},this._resizing._addCSSClass("ce-element--resizing"),a=this._resizing.parent().domElement(),(s=document.createElement("div")).setAttribute("class","ce-measure"),a.appendChild(s),this._resizingParentWidth=s.getBoundingClientRect().width,a.removeChild(s),document.addEventListener("mousemove",this._onResize),document.addEventListener("mouseup",this._onStopResizing),e.addCSSClass(document.body,"ce--resizing")},n.prototype._onResize=function(t){var e,n,i,o;return ContentSelect.Range.unselectAll(),i=this._resizingInit.origin[0]-t.clientX,"right"===this._resizingInit.corner[1]&&(i=-i),n=this._resizingInit.size[0]+i,n=Math.min(n,this._resizingParentWidth),this._resizingInit.fixed?e=n*this._resizing.aspectRatio():(o=this._resizingInit.origin[1]-t.clientY,"bottom"===this._resizingInit.corner[0]&&(o=-o),e=this._resizingInit.size[1]+o),this._resizing.size([n,e])},n.prototype._onStopResizing=function(t){return document.removeEventListener("mousemove",this._onResize),document.removeEventListener("mouseup",this._onStopResizing),this._resizing._removeCSSClass("ce-element--resizing"),this._resizing=null,this._resizingInit=null,this._resizingParentWidth=null,e.removeCSSClass(document.body,"ce--resizing")},n}(e.Node),e.Root=function(){var t;function e(){}return t=null,e.get=function(){return null!=t?t:t=new n},e}(),e.Static=function(t){function n(t,e,i){n.__super__.constructor.call(this,t,e),this._content=i}return c(n,t),n.prototype.cssTypeName=function(){return"static"},n.prototype.type=function(){return"Static"},n.prototype.typeName=function(){return"Static"},n.prototype.createDraggingDOMElement=function(){var t,i;if(this.isMounted())return t=n.__super__.createDraggingDOMElement.call(this),(i=this._domElement.textContent).length>e.HELPER_CHAR_LIMIT&&(i=i.substr(0,e.HELPER_CHAR_LIMIT)),t.innerHTML=i,t},n.prototype.html=function(t){return null==t&&(t=""),HTMLString.Tag.SELF_CLOSING[this._tagName]?t+"<"+this._tagName+this._attributesToString()+">":t+"<"+this._tagName+this._attributesToString()+">"+this._content+t+"</"+this._tagName+">"},n.prototype.mount=function(){var t,e,i;for(t in this._domElement=document.createElement(this._tagName),i=this._attributes)e=i[t],this._domElement.setAttribute(t,e);return this._domElement.innerHTML=this._content,n.__super__.mount.call(this)},n.prototype.blur=void 0,n.prototype.focus=void 0,n.prototype._onMouseDown=function(t){if(n.__super__._onMouseDown.call(this,t),void 0!==this.attr("data-ce-moveable"))return clearTimeout(this._dragTimeout),this._dragTimeout=setTimeout((e=this,function(){return e.drag(t.pageX,t.pageY)}),150);var e},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.prototype._onMouseUp=function(t){if(n.__super__._onMouseUp.call(this,t),this._dragTimeout)return clearTimeout(this._dragTimeout)},n.droppers={Static:e.Element._dropVert},n.fromDOMElement=function(t){return new this(t.tagName,this.getDOMElementAttributes(t),t.innerHTML)},n}(e.Element),e.TagNames.get().register(e.Static,"static"),e.Text=function(t){function n(t,i,o){n.__super__.constructor.call(this,t,i),o instanceof HTMLString.String?this.content=o:e.TRIM_WHITESPACE?this.content=new HTMLString.String(o).trim():this.content=new HTMLString.String(o,!0)}return c(n,t),n.prototype.cssTypeName=function(){return"text"},n.prototype.type=function(){return"Text"},n.prototype.typeName=function(){return"Text"},n.prototype.blur=function(){return this.isMounted()&&this._syncContent(),this.content.isWhitespace()&&this.can("remove")?this.parent()&&this.parent().detach(this):this.isMounted()&&(document.documentMode||/Edge/.test(navigator.userAgent)||this._domElement.blur(),this._domElement.removeAttribute("contenteditable")),n.__super__.blur.call(this)},n.prototype.createDraggingDOMElement=function(){var t,i;if(this.isMounted())return t=n.__super__.createDraggingDOMElement.call(this),(i=HTMLString.String.encode(this._domElement.textContent)).length>e.HELPER_CHAR_LIMIT&&(i=i.substr(0,e.HELPER_CHAR_LIMIT)),t.innerHTML=i,t},n.prototype.drag=function(t,e){return this.storeState(),this._domElement.removeAttribute("contenteditable"),n.__super__.drag.call(this,t,e)},n.prototype.drop=function(t,e){return n.__super__.drop.call(this,t,e),this.restoreState()},n.prototype.focus=function(t){return this.isMounted()&&this._domElement.setAttribute("contenteditable",""),n.__super__.focus.call(this,t)},n.prototype.html=function(t){var n,i,o;return null==t&&(t=""),(!this._lastCached||this._lastCached<this._modified)&&((i=e.TRIM_WHITESPACE?this.content.copy().trim():this.content.copy()).optimize(),this._lastCached=Date.now(),this._cached=i.html()),o=e.LINE_ENDINGS,n=this._attributesToString(),t+"<"+this._tagName+n+">"+o+t+e.INDENT+this._cached+o+t+"</"+this._tagName+">"},n.prototype.mount=function(){var t,e,i;for(t in this._domElement=document.createElement(this._tagName),i=this._attributes)e=i[t],this._domElement.setAttribute(t,e);return this.updateInnerHTML(),n.__super__.mount.call(this)},n.prototype.restoreState=function(){if(this._savedSelection){if(this.isMounted()&&this.isFocused())return this._domElement.setAttribute("contenteditable",""),this._addCSSClass("ce-element--focused"),document.activeElement!==this.domElement()&&this.domElement().focus(),this._savedSelection.select(this._domElement),this._savedSelection=void 0;this._savedSelection=void 0}},n.prototype.selection=function(t){return void 0===t?this.isMounted()?ContentSelect.Range.query(this._domElement):new ContentSelect.Range(0,0):t.select(this._domElement)},n.prototype.storeState=function(){if(this.isMounted()&&this.isFocused())return this._savedSelection=ContentSelect.Range.query(this._domElement)},n.prototype.unmount=function(){return this._domElement.removeAttribute("contenteditable"),n.__super__.unmount.call(this)},n.prototype.updateInnerHTML=function(){return this._domElement.innerHTML=this.content.html(),ContentSelect.Range.prepareElement(this._domElement),this._flagIfEmpty()},n.prototype._onKeyDown=function(t){switch(t.keyCode){case 40:return this._keyDown(t);case 37:return this._keyLeft(t);case 39:return this._keyRight(t);case 38:return this._keyUp(t);case 9:return this._keyTab(t);case 8:return this._keyBack(t);case 46:return this._keyDelete(t);case 13:return this._keyReturn(t)}},n.prototype._onKeyUp=function(t){return n.__super__._onKeyUp.call(this,t),this._syncContent()},n.prototype._onMouseDown=function(t){var i;if(n.__super__._onMouseDown.call(this,t),clearTimeout(this._dragTimeout),this._dragTimeout=setTimeout((i=this,function(){return i.drag(t.pageX,t.pageY)}),e.DRAG_HOLD_DURATION),0===this.content.length()&&e.Root.get().focused()===this)return t.preventDefault(),document.activeElement!==this._domElement&&this._domElement.focus(),new ContentSelect.Range(0,0).select(this._domElement)},n.prototype._onMouseMove=function(t){return this._dragTimeout&&clearTimeout(this._dragTimeout),n.__super__._onMouseMove.call(this,t)},n.prototype._onMouseOut=function(t){return this._dragTimeout&&clearTimeout(this._dragTimeout),n.__super__._onMouseOut.call(this,t)},n.prototype._onMouseUp=function(t){return this._dragTimeout&&clearTimeout(this._dragTimeout),n.__super__._onMouseUp.call(this,t)},n.prototype._keyBack=function(t){var e,n;if(0===(n=ContentSelect.Range.query(this._domElement)).get()[0]&&n.isCollapsed())return t.preventDefault(),e=this.previousContent(),this._syncContent(),e?e.merge(this):void 0},n.prototype._keyDelete=function(t){var e,n;if(n=ContentSelect.Range.query(this._domElement),this._atEnd(n)&&n.isCollapsed())return t.preventDefault(),(e=this.nextContent())?this.merge(e):void 0},n.prototype._keyDown=function(t){return this._keyRight(t)},n.prototype._keyLeft=function(t){var n,i;if(0===(i=ContentSelect.Range.query(this._domElement)).get()[0]&&i.isCollapsed())return t.preventDefault(),(n=this.previousContent())?(n.focus(),(i=new ContentSelect.Range(n.content.length(),n.content.length())).select(n.domElement())):e.Root.get().trigger("previous-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()})))},n.prototype._keyReturn=function(t){var n,i,o,r,s,a;if(t.preventDefault(),!(this.content.isWhitespace()&&!t.shiftKey^e.PREFER_LINE_BREAKS)){if(r=ContentSelect.Range.query(this._domElement),a=this.content.substring(0,r.get()[0]),s=this.content.substring(r.get()[1]),t.shiftKey^e.PREFER_LINE_BREAKS)return i=r.get()[0],o="<br>",this.content.length()===i&&(0!==this.content.length()&&this.content.characters[i-1].isTag("br")||(o="<br><br>")),this.content=this.content.insert(i,new HTMLString.String(o,!0),!0),this.updateInnerHTML(),i+=1,(r=new ContentSelect.Range(i,i)).select(this.domElement()),void this.taint();if(this.can("spawn"))return this.content=a.trim(),this.updateInnerHTML(),n=new this.constructor("p",{},s.trim()),this.parent().attach(n,this.parent().children.indexOf(this)+1),a.length()?(n.focus(),(r=new ContentSelect.Range(0,0)).select(n.domElement())):(r=new ContentSelect.Range(0,a.length())).select(this._domElement),this.taint()}},n.prototype._keyRight=function(t){var n,i;if(i=ContentSelect.Range.query(this._domElement),this._atEnd(i)&&i.isCollapsed())return t.preventDefault(),(n=this.nextContent())?(n.focus(),(i=new ContentSelect.Range(0,0)).select(n.domElement())):e.Root.get().trigger("next-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()})))},n.prototype._keyTab=function(t){if(t.preventDefault(),this.isFixed())return t.shiftKey?e.Root.get().trigger("previous-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()}))):e.Root.get().trigger("next-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()})))},n.prototype._keyUp=function(t){return this._keyLeft(t)},n.prototype._atEnd=function(t){return t.get()[0]>=this.content.length()},n.prototype._flagIfEmpty=function(){return 0===this.content.length()?this._addCSSClass("ce-element--empty"):this._removeCSSClass("ce-element--empty")},n.prototype._syncContent=function(t){var e;return e=this.content.html(),this.content=new HTMLString.String(this._domElement.innerHTML,this.content.preserveWhitespace()),e!==this.content.html()&&this.taint(),this._flagIfEmpty()},n.droppers={Static:e.Element._dropVert,Text:e.Element._dropVert},n.mergers={Text:function(t,e){var n;return n=e.content.length(),t.content.length()&&(e.content=e.content.concat(t.content)),e.isMounted()&&e.updateInnerHTML(),e.focus(),new ContentSelect.Range(n,n).select(e._domElement),t.parent()&&t.parent().detach(t),e.taint()}},n.fromDOMElement=function(t){return new this(t.tagName,this.getDOMElementAttributes(t),t.innerHTML.replace(/^\s+|\s+$/g,""))},n}(e.Element),e.TagNames.get().register(e.Text,"address","blockquote","h1","h2","h3","h4","h5","h6","p"),e.PreText=function(t){function n(t,n,i){i instanceof HTMLString.String?this.content=i:this.content=new HTMLString.String(i,!0),e.Element.call(this,t,n)}return c(n,t),n.TAB_INDENT="    ",n.prototype.cssTypeName=function(){return"pre-text"},n.prototype.type=function(){return"PreText"},n.prototype.typeName=function(){return"Preformatted"},n.prototype.blur=function(){return this.isMounted()&&(this._domElement.innerHTML=this.content.html()),n.__super__.blur.call(this)},n.prototype.html=function(t){var e;return null==t&&(t=""),(!this._lastCached||this._lastCached<this._modified)&&((e=this.content.copy()).optimize(),this._lastCached=Date.now(),this._cached=e.html()),t+"<"+this._tagName+this._attributesToString()+">"+this._cached+"</"+this._tagName+">"},n.prototype.updateInnerHTML=function(){var t;return t=this.content.html(),this._domElement.innerHTML=t,this._ensureEndZWS(),ContentSelect.Range.prepareElement(this._domElement),this._flagIfEmpty()},n.prototype._keyBack=function(t){var e;return(e=ContentSelect.Range.query(this._domElement)).get()[0]<=this.content.length()?n.__super__._keyBack.call(this,t):(e.set(this.content.length(),this.content.length()),e.select(this._domElement))},n.prototype._keyReturn=function(t){var e,n,i,o;return t.preventDefault(),e=(n=ContentSelect.Range.query(this._domElement)).get()[0]+1,0===n.get()[0]&&n.isCollapsed()?this.content=new HTMLString.String("\n",!0).concat(this.content):this._atEnd(n)&&n.isCollapsed()?this.content=this.content.concat(new HTMLString.String("\n",!0)):0===n.get()[0]&&n.get()[1]===this.content.length()?(this.content=new HTMLString.String("\n",!0),e=0):(o=this.content.substring(0,n.get()[0]),i=this.content.substring(n.get()[1]),this.content=o.concat(new HTMLString.String("\n",!0),i)),this.updateInnerHTML(),n.set(e,e),n.select(this._domElement),this.taint()},n.prototype._keyTab=function(t){var n,i,o,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v,b,E,w,C,T,S,x;for(t.preventDefault(),n=this.content.length(),l=(h=e.PreText.TAB_INDENT).length,p=this.content.split("\n"),(g=this.selection().get())[0]=Math.min(g[0],n),g[1]=Math.min(g[1],n),o=0,_=-1,r=-1,a=b=0,T=p.length;b<T&&(u=p[a].length()+1,g[0]<o+u&&-1===_&&(_=a),g[1]<o+u&&-1===r&&(r=a),!(_>-1&&r>-1));a=++b)o+=u;if(_===r)l-=(g[0]-o)%l,c=new HTMLString.String(Array(l+1).join(" "),!0),v=p[_].substring(0,g[0]-o),y=p[_].substring(g[1]-o),p[_]=v.concat(c,y),f=l;else if(t.shiftKey){for(s=0,a=E=_;_<=r?E<=r:E>=r;a=_<=r?++E:--E){for(d=w=0,S=(x=p[a].characters.slice()).length;w<S&&(i=x[d],!(d>l-1))&&i.isWhitespace();d=++w)p[a].characters.shift();a===_&&(s=d)}f=Math.max(-l,-s)}else{for(c=new HTMLString.String(h,!0),a=C=_;_<=r?C<=r:C>=r;a=_<=r?++C:--C)p[a]=c.concat(p[a]);f=l}return this.content=HTMLString.String.join(new HTMLString.String("\n",!0),p),this.updateInnerHTML(),m=this.content.length()-n,new ContentSelect.Range(g[0]+f,g[1]+m).select(this._domElement)},n.prototype._syncContent=function(t){var e;return this._ensureEndZWS(),e=this.content.html(),this.content=new HTMLString.String(this._domElement.innerHTML.replace(/\u200B$/g,""),this.content.preserveWhitespace()),e!==this.content.html()&&this.taint(),this._flagIfEmpty()},n.prototype._ensureEndZWS=function(){var t,e,n;if(this._domElement.lastChild&&!(""===(t=this._domElement.innerHTML)[t.length-1]&&t.indexOf("")<t.length-1))return n=this,e=function(){return t.indexOf("")>-1&&(n._domElement.innerHTML=t.replace(/\u200B/g,"")),n._domElement.lastChild.textContent+=""},this._savedSelection?e():(this.storeState(),e(),this.restoreState())},n.droppers={PreText:e.Element._dropVert,Static:e.Element._dropVert,Text:e.Element._dropVert},n.mergers={},n.fromDOMElement=function(t){return new this(t.tagName,this.getDOMElementAttributes(t),t.innerHTML)},n}(e.Text),e.TagNames.get().register(e.PreText,"pre"),e.Image=function(t){function n(t,e){var i;n.__super__.constructor.call(this,"img",t),this.a=e||null,i=this.size(),this._aspectRatio=i[1]/i[0]}return c(n,t),n.prototype.cssTypeName=function(){return"image"},n.prototype.type=function(){return"Image"},n.prototype.typeName=function(){return"Image"},n.prototype.createDraggingDOMElement=function(){var t;if(this.isMounted())return(t=n.__super__.createDraggingDOMElement.call(this)).style.backgroundImage="url('"+this._attributes.src+"')",t},n.prototype.html=function(t){var n,i,o;return null==t&&(t=""),i=t+"<img"+this._attributesToString()+">",this.a?(o=e.LINE_ENDINGS,n=e.attributesToString(this.a),t+"<a "+(n+=' data-ce-tag="img"')+">"+o+e.INDENT+i+o+t+"</a>"):i},n.prototype.mount=function(){var t,e;return this._domElement=document.createElement("div"),t="",this.a&&this.a.class&&(t+=" "+this.a.class),this._attributes.class&&(t+=" "+this._attributes.class),this._domElement.setAttribute("class",t),e=this._attributes.style?this._attributes.style:"",e+="background-image:url('"+this._attributes.src+"');",this._attributes.width&&(e+="width:"+this._attributes.width+"px;"),this._attributes.height&&(e+="height:"+this._attributes.height+"px;"),this._domElement.setAttribute("style",e),n.__super__.mount.call(this)},n.prototype.unmount=function(){var t,e;return this.isFixed()&&((e=document.createElement("div")).innerHTML=this.html(),t=e.querySelector("a, img"),this._domElement.parentNode.replaceChild(t,this._domElement),this._domElement=t),n.__super__.unmount.call(this)},n.droppers={Image:e.Element._dropBoth,PreText:e.Element._dropBoth,Static:e.Element._dropBoth,Text:e.Element._dropBoth},n.placements=["above","below","left","right","center"],n.fromDOMElement=function(t){var e,n,i,o,r,s,a,c,l;if(e=null,"a"===t.tagName.toLowerCase()){for(e=this.getDOMElementAttributes(t),r=function(){var e,n,o,r;for(r=[],e=0,n=(o=t.childNodes).length;e<n;e++)i=o[e],r.push(i);return r}(),c=0,l=r.length;c<l;c++)if(1===(o=r[c]).nodeType&&"img"===o.tagName.toLowerCase()){t=o;break}"a"===t.tagName.toLowerCase()&&(t=document.createElement("img"))}return a=(n=this.getDOMElementAttributes(t)).width,s=n.height,void 0===n.width&&(a=void 0===n.height?t.naturalWidth:t.clientWidth),void 0===n.height&&(s=void 0===n.width?t.naturalHeight:t.clientHeight),n.width=a,n.height=s,new this(n,e)},n}(e.ResizableElement),e.TagNames.get().register(e.Image,"img"),e.ImageFixture=function(t){function n(t,e,i){n.__super__.constructor.call(this,t,e),this._src=i}return c(n,t),n.prototype.cssTypeName=function(){return"image-fixture"},n.prototype.type=function(){return"ImageFixture"},n.prototype.typeName=function(){return"ImageFixture"},n.prototype.html=function(t){var n,i,o,r;return null==t&&(t=""),r=e.LINE_ENDINGS,i=this._attributesToString(),n="",void 0!==this._attributes.alt&&(n='alt="'+this._attributes.alt+'"'),o=t+'<img src="'+this.src()+'"'+n+">",t+"<"+this.tagName()+" "+i+">"+r+e.INDENT+o+r+t+"</"+this.tagName()+">"},n.prototype.mount=function(){var t,e,i,o,r,s;for(e in this._domElement=document.createElement(this.tagName()),s=this._attributes)r=s[e],"alt"!==e&&"style"!==e&&this._domElement.setAttribute(e,r);return t="",this.a&&this.a.class&&(t+=" "+this.a.class),this._attributes.class&&(t+=" "+this._attributes.class),this._domElement.setAttribute("class",t),i=this._attributes.style?this._attributes.style:"",(o=document.createElement("div")).setAttribute("style",i.trim()),o.style.backgroundImage=null,i=[(i=o.getAttribute("style")).trim(),"background-image:url('"+this.src()+"');"].join(" "),this._domElement.setAttribute("style",i.trim()),n.__super__.mount.call(this)},n.prototype.src=function(t){return void 0===t?this._src:(this._src=t,this.isMounted()&&(this.unmount(),this.mount()),this.taint())},n.prototype.unmount=function(){var t,e;return this.isFixed()?((e=document.createElement("div")).innerHTML=this.html(),t=e.firstElementChild,this._domElement.parentNode.replaceChild(t,this._domElement),this._domElement=t,this.parent()._domElement=this._domElement):n.__super__.unmount.call(this)},n.prototype._attributesToString=function(){var t,n,i,o,r,s;for(n in this._attributes.style?(i=this._attributes.style?this._attributes.style:"",(o=document.createElement("div")).setAttribute("style",i.trim()),o.style.backgroundImage=null,i=[(i=o.getAttribute("style")).trim(),"background-image:url('"+this.src()+"');"].join(" "),this._attributes.style=i.trim()):this._attributes.style="background-image:url('"+this.src()+"');",t={},s=this._attributes)r=s[n],"alt"!==n&&(t[n]=r);return" "+e.attributesToString(t)},n.droppers={ImageFixture:e.Element._dropVert,Image:e.Element._dropVert,PreText:e.Element._dropVert,Text:e.Element._dropVert},n.fromDOMElement=function(t){var e,n,i,o,r,s,a,c;for(t.tagName,n=this.getDOMElementAttributes(t),s="",e="",r=function(){var e,n,o,r;for(r=[],e=0,n=(o=t.childNodes).length;e<n;e++)i=o[e],r.push(i);return r}(),a=0,c=r.length;a<c;a++)if(1===(o=r[a]).nodeType&&"img"===o.tagName.toLowerCase()){s=o.getAttribute("src")||"",e=o.getAttribute("alt")||"";break}return(n=this.getDOMElementAttributes(t)).alt=e,new this(t.tagName,n,s)},n}(e.Element),e.TagNames.get().register(e.ImageFixture,"img-fixture"),e.Video=function(t){function n(t,e,i){var o;null==i&&(i=[]),n.__super__.constructor.call(this,t,e),this.sources=i,o=this.size(),this._aspectRatio=o[1]/o[0]}return c(n,t),n.prototype.cssTypeName=function(){return"video"},n.prototype.type=function(){return"Video"},n.prototype.typeName=function(){return"Video"},n.prototype._title=function(){var t;return t="",this.attr("src")?t=this.attr("src"):this.sources.length&&(t=this.sources[0].src),t||(t="No video source set"),t.length>80&&(t=t.substr(0,80)+"..."),t},n.prototype.createDraggingDOMElement=function(){var t;if(this.isMounted())return(t=n.__super__.createDraggingDOMElement.call(this)).innerHTML=this._title(),t},n.prototype.html=function(t){var n,i,o,r,s,a,c;if(null==t&&(t=""),i=e.LINE_ENDINGS,"video"===this.tagName()){for(r=[],s=0,a=(c=this.sources).length;s<a;s++)o=c[s],n=e.attributesToString(o),r.push(""+t+e.INDENT+"<source "+n+">");return t+"<video"+this._attributesToString()+">"+i+r.join(i)+i+t+"</video>"}return t+"<"+this._tagName+this._attributesToString()+"></"+this._tagName+">"},n.prototype.mount=function(){var t;return this._domElement=document.createElement("div"),this.a&&this.a.class?this._domElement.setAttribute("class",this.a.class):this._attributes.class&&this._domElement.setAttribute("class",this._attributes.class),t=this._attributes.style?this._attributes.style:"",this._attributes.width&&(t+="width:"+this._attributes.width+"px;"),this._attributes.height&&(t+="height:"+this._attributes.height+"px;"),this._domElement.setAttribute("style",t),this._domElement.setAttribute("data-ce-title",this._title()),n.__super__.mount.call(this)},n.prototype.unmount=function(){var t,e;return this.isFixed()&&((e=document.createElement("div")).innerHTML=this.html(),t=e.querySelector("iframe"),this._domElement.parentNode.replaceChild(t,this._domElement),this._domElement=t),n.__super__.unmount.call(this)},n.droppers={Image:e.Element._dropBoth,PreText:e.Element._dropBoth,Static:e.Element._dropBoth,Text:e.Element._dropBoth,Video:e.Element._dropBoth},n.placements=["above","below","left","right","center"],n.fromDOMElement=function(t){var e,n,i,o,r,s;for(i=function(){var n,i,o,r;for(r=[],n=0,i=(o=t.childNodes).length;n<i;n++)e=o[n],r.push(e);return r}(),o=[],r=0,s=i.length;r<s;r++)1===(n=i[r]).nodeType&&"source"===n.tagName.toLowerCase()&&o.push(this.getDOMElementAttributes(n));return new this(t.tagName,this.getDOMElementAttributes(t),o)},n}(e.ResizableElement),e.TagNames.get().register(e.Video,"iframe","video"),e.List=function(t){function n(t,e){n.__super__.constructor.call(this,t,e)}return c(n,t),n.prototype.cssTypeName=function(){return"list"},n.prototype.type=function(){return"List"},n.prototype.typeName=function(){return"List"},n.prototype._onMouseOver=function(t){if("ListItem"!==this.parent().type())return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.droppers={Image:e.Element._dropBoth,ImageFixture:e.Element._dropVert,List:e.Element._dropVert,PreText:e.Element._dropVert,Static:e.Element._dropVert,Text:e.Element._dropVert,Video:e.Element._dropBoth},n.fromDOMElement=function(t){var n,i,o,r,s,a;for(r=new this(t.tagName,this.getDOMElementAttributes(t)),o=function(){var e,i,o,r;for(r=[],e=0,i=(o=t.childNodes).length;e<i;e++)n=o[e],r.push(n);return r}(),s=0,a=o.length;s<a;s++)1===(i=o[s]).nodeType&&"li"===i.tagName.toLowerCase()&&r.attach(e.ListItem.fromDOMElement(i));return 0===r.children.length?null:r},n}(e.ElementCollection),e.TagNames.get().register(e.List,"ol","ul"),e.ListItem=function(t){function n(t){n.__super__.constructor.call(this,"li",t),this._behaviours.indent=!0}return c(n,t),n.prototype.cssTypeName=function(){return"list-item"},n.prototype.list=function(){return 2===this.children.length?this.children[1]:null},n.prototype.listItemText=function(){return this.children.length>0?this.children[0]:null},n.prototype.type=function(){return"ListItem"},n.prototype.html=function(t){var n;return null==t&&(t=""),n=[t+"<li"+this._attributesToString()+">"],this.listItemText()&&n.push(this.listItemText().html(t+e.INDENT)),this.list()&&n.push(this.list().html(t+e.INDENT)),n.push(t+"</li>"),n.join(e.LINE_ENDINGS)},n.prototype.indent=function(){var t;if(this.can("indent")&&0!==this.parent().children.indexOf(this))return(t=this.previousSibling()).list()||t.attach(new e.List(t.parent().tagName())),this.listItemText().storeState(),this.parent().detach(this),t.list().attach(this),this.listItemText().restoreState()},n.prototype.remove=function(){var t,e,n,i,o,r;if(this.parent()){if(n=this.parent().children.indexOf(this),this.list())for(e=i=0,o=(r=this.list().children.slice()).length;i<o;e=++i)(t=r[e]).parent().detach(t),this.parent().attach(t,e+n);return this.parent().detach(this)}},n.prototype.unindent=function(){var t,n,i,o,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v,b,E;if(this.can("indent")){if(n=(s=this.parent()).parent(),h=s.children.slice(s.children.indexOf(this)+1,s.children.length),"ListItem"===n.type()){for(this.listItemText().storeState(),s.detach(this),n.parent().attach(this,n.parent().children.indexOf(n)+1),h.length&&!this.list()&&this.attach(new e.List(s.tagName())),u=0,f=h.length;u<f;u++)(l=h[u]).parent().detach(l),this.list().attach(l);return this.listItemText().restoreState()}if(d=new e.Text("p",this.attr("class")?{class:this.attr("class")}:{},this.listItemText().content),c=null,this.listItemText().isFocused()&&(c=ContentSelect.Range.query(this.listItemText().domElement())),a=n.children.indexOf(s),0===(o=s.children.indexOf(this))){if(r=null,1===s.children.length?(this.list()&&(r=new e.List(s.tagName())),n.detach(s)):s.detach(this),n.attach(d,a),r&&n.attach(r,a+1),this.list())for(i=p=0,_=(b=this.list().children.slice()).length;p<_;i=++p)(t=b[i]).parent().detach(t),r?r.attach(t):s.attach(t,i)}else if(o===s.children.length-1)s.detach(this),n.attach(d,a+1),this.list()&&n.attach(this.list(),a+2);else{if(s.detach(this),n.attach(d,a+1),r=new e.List(s.tagName()),n.attach(r,a+2),this.list())for(g=0,y=(E=this.list().children.slice()).length;g<y;g++)(t=E[g]).parent().detach(t),r.attach(t);for(m=0,v=h.length;m<v;m++)(l=h[m]).parent().detach(l),r.attach(l)}return c?(d.focus(),c.select(d.domElement())):void 0}},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.prototype._addDOMEventListeners=function(){},n.prototype._removeDOMEventListners=function(){},n.fromDOMElement=function(t){var n,i,o,r,s,a,c,l,h,d;for(s=new this(this.getDOMElementAttributes(t)),i="",o=null,c=0,l=(h=t.childNodes).length;c<l;c++)1===(n=h[c]).nodeType?"ul"===(d=n.tagName.toLowerCase())||"ol"===d||"li"===d?o||(o=n):i+=n.outerHTML:i+=HTMLString.String.encode(n.textContent);return i=i.replace(/^\s+|\s+$/g,""),a=new e.ListItemText(i),s.attach(a),o&&(r=e.List.fromDOMElement(o),s.attach(r)),s},n}(e.ElementCollection),e.ListItemText=function(t){function n(t){n.__super__.constructor.call(this,"div",{},t)}return c(n,t),n.prototype.cssTypeName=function(){return"list-item-text"},n.prototype.type=function(){return"ListItemText"},n.prototype.typeName=function(){return"List item"},n.prototype.blur=function(){return this.content.isWhitespace()&&this.can("remove")?this.parent().remove():this.isMounted()&&(this._domElement.blur(),this._domElement.removeAttribute("contenteditable")),e.Element.prototype.blur.call(this)},n.prototype.can=function(t,e){if(e)throw new Error("Cannot set behaviour for ListItemText");return this.parent().can(t)},n.prototype.html=function(t){var n;return null==t&&(t=""),(!this._lastCached||this._lastCached<this._modified)&&((n=e.TRIM_WHITESPACE?this.content.copy().trim():this.content.copy()).optimize(),this._lastCached=Date.now(),this._cached=n.html()),""+t+this._cached},n.prototype._onMouseDown=function(t){var n,i;return e.Element.prototype._onMouseDown.call(this,t),i=this,n=function(){return e.Root.get().dragging()===i?(e.Root.get().cancelDragging(),i.closest((function(t){return"Region"===t.parent().type()})).drag(t.pageX,t.pageY)):(i.drag(t.pageX,t.pageY),i._dragTimeout=setTimeout(n,2*e.DRAG_HOLD_DURATION))},clearTimeout(this._dragTimeout),this._dragTimeout=setTimeout(n,e.DRAG_HOLD_DURATION)},n.prototype._onMouseMove=function(t){return this._dragTimeout&&clearTimeout(this._dragTimeout),e.Element.prototype._onMouseMove.call(this,t)},n.prototype._onMouseUp=function(t){return this._dragTimeout&&clearTimeout(this._dragTimeout),e.Element.prototype._onMouseUp.call(this,t)},n.prototype._keyTab=function(t){return t.preventDefault(),t.shiftKey?this.parent().unindent():this.parent().indent()},n.prototype._keyReturn=function(t){var n,i,o,r,s,a;if(t.preventDefault(),this.content.isWhitespace())this.parent().unindent();else if(this.can("spawn")){if(ContentSelect.Range.query(this._domElement),r=ContentSelect.Range.query(this._domElement),a=this.content.substring(0,r.get()[0]),s=this.content.substring(r.get()[1]),a.length()+s.length()!==0)return this.content=a.trim(),this.updateInnerHTML(),n=this.parent().parent(),o=new e.ListItem(this.attr("class")?{class:this.attr("class")}:{}),n.attach(o,n.children.indexOf(this.parent())+1),o.attach(new e.ListItemText(s.trim())),(i=this.parent().list())&&(this.parent().detach(i),o.attach(i)),a.length()?(o.listItemText().focus(),(r=new ContentSelect.Range(0,0)).select(o.listItemText().domElement())):(r=new ContentSelect.Range(0,a.length())).select(this._domElement),this.taint();this.parent().unindent()}},n.droppers={ListItemText:function(t,n,i){var o,r,s,a;if(o=t.parent(),a=n.parent(),o.remove(),o.detach(t),(s=new e.ListItem(o._attributes)).attach(t),!a.list()||"below"!==i[0])return r=a.parent().children.indexOf(a),"below"===i[0]&&(r+=1),a.parent().attach(s,r);a.list().attach(s,0)},Text:function(t,n,i){var o,r,s,a,c;if("Text"===t.type()){if(a=n.parent(),t.parent().detach(t),o=t.attr("class"),(s=new e.ListItem(o?{class:o}:{})).attach(new e.ListItemText(t.content)),a.list()&&"below"===i[0])return void a.list().attach(s,0);if(r=a.parent().children.indexOf(a),"below"===i[0]&&(r+=1),a.parent().attach(s,r),s.listItemText().focus(),t._savedSelection)return t._savedSelection.select(s.listItemText().domElement())}else if(o=t.attr("class"),c=new e.Text("p",o?{class:o}:{},t.content),t.parent().remove(),r=n.parent().children.indexOf(n),"below"===i[0]&&(r+=1),n.parent().attach(c,r),c.focus(),t._savedSelection)return t._savedSelection.select(c.domElement())}},n.mergers={ListItemText:function(t,e){var n;return n=e.content.length(),t.content.length()&&(e.content=e.content.concat(t.content)),e.isMounted()&&(e._domElement.innerHTML=e.content.html()),e.focus(),new ContentSelect.Range(n,n).select(e._domElement),"Text"===t.type()?t.parent()&&t.parent().detach(t):t.parent().remove(),e.taint()}},n}(e.Text),(o=e.ListItemText.mergers).Text=o.ListItemText,e.Table=function(t){function n(t){n.__super__.constructor.call(this,"table",t)}return c(n,t),n.prototype.cssTypeName=function(){return"table"},n.prototype.typeName=function(){return"Table"},n.prototype.type=function(){return"Table"},n.prototype.firstSection=function(){var t;return(t=this.thead())||(t=this.tbody())||(t=this.tfoot())?t:null},n.prototype.lastSection=function(){var t;return(t=this.tfoot())||(t=this.tbody())||(t=this.thead())?t:null},n.prototype.tbody=function(){return this._getChild("tbody")},n.prototype.tfoot=function(){return this._getChild("tfoot")},n.prototype.thead=function(){return this._getChild("thead")},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.prototype._getChild=function(t){var e,n,i,o;for(n=0,i=(o=this.children).length;n<i;n++)if((e=o[n]).tagName()===t)return e;return null},n.droppers={Image:e.Element._dropBoth,ImageFixture:e.Element._dropVert,List:e.Element._dropVert,PreText:e.Element._dropVert,Static:e.Element._dropVert,Table:e.Element._dropVert,Text:e.Element._dropVert,Video:e.Element._dropBoth},n.fromDOMElement=function(t){var n,i,o,r,s,a,c,l,h,d,u,p;for(c=new this(this.getDOMElementAttributes(t)),o=function(){var e,i,o,r;for(r=[],e=0,i=(o=t.childNodes).length;e<i;e++)n=o[e],r.push(n);return r}(),r=[],h=0,u=o.length;h<u;h++)if(1===(i=o[h]).nodeType&&(l=i.tagName.toLowerCase(),!c._getChild(l)))switch(l){case"tbody":case"tfoot":case"thead":a=e.TableSection.fromDOMElement(i),c.attach(a);break;case"tr":r.push(e.TableRow.fromDOMElement(i))}if(r.length>0)for(c._getChild("tbody")||c.attach(new e.TableSection("tbody")),d=0,p=r.length;d<p;d++)s=r[d],c.tbody().attach(s);return 0===c.children.length?null:c},n}(e.ElementCollection),e.TagNames.get().register(e.Table,"table"),e.TableSection=function(t){function n(t,e){n.__super__.constructor.call(this,t,e)}return c(n,t),n.prototype.cssTypeName=function(){return"table-section"},n.prototype.type=function(){return"TableSection"},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.fromDOMElement=function(t){var n,i,o,r,s,a;for(r=new this(t.tagName,this.getDOMElementAttributes(t)),o=function(){var e,i,o,r;for(r=[],e=0,i=(o=t.childNodes).length;e<i;e++)n=o[e],r.push(n);return r}(),s=0,a=o.length;s<a;s++)1===(i=o[s]).nodeType&&"tr"===i.tagName.toLowerCase()&&r.attach(e.TableRow.fromDOMElement(i));return r},n}(e.ElementCollection),e.TableRow=function(t){function n(t){n.__super__.constructor.call(this,"tr",t)}return c(n,t),n.prototype.cssTypeName=function(){return"table-row"},n.prototype.isEmpty=function(){var t,e,n,i;for(e=0,n=(i=this.children).length;e<n;e++)if((t=i[e].tableCellText())&&t.content.length()>0)return!1;return!0},n.prototype.type=function(){return"TableRow"},n.prototype.typeName=function(){return"Table row"},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.droppers={TableRow:e.Element._dropVert},n.fromDOMElement=function(t){var n,i,o,r,s,a,c;for(r=new this(this.getDOMElementAttributes(t)),o=function(){var e,i,o,r;for(r=[],e=0,i=(o=t.childNodes).length;e<i;e++)n=o[e],r.push(n);return r}(),a=0,c=o.length;a<c;a++)1===(i=o[a]).nodeType&&("td"!==(s=i.tagName.toLowerCase())&&"th"!==s||r.attach(e.TableCell.fromDOMElement(i)));return r},n}(e.ElementCollection),e.TableCell=function(t){function n(t,e){n.__super__.constructor.call(this,t,e)}return c(n,t),n.prototype.cssTypeName=function(){return"table-cell"},n.prototype.tableCellText=function(){return this.children.length>0?this.children[0]:null},n.prototype.type=function(){return"TableCell"},n.prototype.html=function(t){var n;return null==t&&(t=""),n=[t+"<"+this.tagName()+this._attributesToString()+">"],this.tableCellText()&&n.push(this.tableCellText().html(t+e.INDENT)),n.push(t+"</"+this.tagName()+">"),n.join(e.LINE_ENDINGS)},n.prototype._onMouseOver=function(t){return n.__super__._onMouseOver.call(this,t),this._removeCSSClass("ce-element--over")},n.prototype._addDOMEventListeners=function(){},n.prototype._removeDOMEventListners=function(){},n.fromDOMElement=function(t){var n,i;return n=new this(t.tagName,this.getDOMElementAttributes(t)),i=new e.TableCellText(t.innerHTML.replace(/^\s+|\s+$/g,"")),n.attach(i),n},n}(e.ElementCollection),e.TableCellText=function(t){function n(t){n.__super__.constructor.call(this,"div",{},t)}return c(n,t),n.prototype.cssTypeName=function(){return"table-cell-text"},n.prototype.type=function(){return"TableCellText"},n.prototype._isInFirstRow=function(){var t,e,n;return n=(e=(t=this.parent().parent()).parent()).parent(),e===n.firstSection()&&t===e.children[0]},n.prototype._isInLastRow=function(){var t,e,n;return n=(e=(t=this.parent().parent()).parent()).parent(),e===n.lastSection()&&t===e.children[e.children.length-1]},n.prototype._isLastInSection=function(){var t,e,n;return n=(e=(t=this.parent()).parent()).parent(),e===n.children[n.children.length-1]&&t===e.children[e.children.length-1]},n.prototype.blur=function(){return this.isMounted()&&(this._domElement.blur(),this._domElement.removeAttribute("contenteditable")),e.Element.prototype.blur.call(this)},n.prototype.can=function(t,e){if(e)throw new Error("Cannot set behaviour for ListItemText");return this.parent().can(t)},n.prototype.html=function(t){var n;return null==t&&(t=""),(!this._lastCached||this._lastCached<this._modified)&&((n=e.TRIM_WHITESPACE?this.content.copy().trim():this.content.copy()).optimize(),this._lastCached=Date.now(),this._cached=n.html()),""+t+this._cached},n.prototype._onMouseDown=function(t){var n,i;return e.Element.prototype._onMouseDown.call(this,t),i=this,n=function(){var o;return o=i.parent(),e.Root.get().dragging()===o.parent()?(e.Root.get().cancelDragging(),o.parent().parent().parent().drag(t.pageX,t.pageY)):(o.parent().drag(t.pageX,t.pageY),i._dragTimeout=setTimeout(n,2*e.DRAG_HOLD_DURATION))},clearTimeout(this._dragTimeout),this._dragTimeout=setTimeout(n,e.DRAG_HOLD_DURATION)},n.prototype._keyBack=function(t){var e,n,i,o;if(0===(o=ContentSelect.Range.query(this._domElement)).get()[0]&&o.isCollapsed()&&(t.preventDefault(),(i=(e=this.parent()).parent()).isEmpty()&&i.can("remove")))return 0===this.content.length()&&0===i.children.indexOf(e)?((n=this.previousContent())&&(n.focus(),(o=new ContentSelect.Range(n.content.length(),n.content.length())).select(n.domElement())),i.parent().detach(i)):void 0},n.prototype._keyDelete=function(t){var e,n;if((n=this.parent().parent()).isEmpty()&&n.can("remove"))return t.preventDefault(),(e=n.children[n.children.length-1].tableCellText().nextContent())&&(e.focus(),new ContentSelect.Range(0,0).select(e.domElement())),n.parent().detach(n)},n.prototype._keyDown=function(t){var n,i,o,r,s,a;if(a=ContentSelect.Range.query(this._domElement),this._atEnd(a)&&a.isCollapsed())return t.preventDefault(),n=this.parent(),this._isInLastRow()?(o=(s=n.parent()).children[s.children.length-1].tableCellText().nextContent())?o.focus():e.Root.get().trigger("next-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()}))):(r=n.parent().nextWithTest((function(t){return"TableRow"===t.type()})),i=n.parent().children.indexOf(n),i=Math.min(i,r.children.length),r.children[i].tableCellText().focus())},n.prototype._keyReturn=function(t){return t.preventDefault(),this._keyTab({shiftKey:!1,preventDefault:function(){}})},n.prototype._keyTab=function(t){var n,i,o,r,s,a,c,l;if(t.preventDefault(),n=this.parent(),t.shiftKey){if(this._isInFirstRow()&&n.parent().children[0]===n)return;return this.previousContent().focus()}if(this.can("spawn")){if("tbody"===n.parent().parent().tagName()&&this._isLastInSection()){for(s=new e.TableRow,a=0,c=(l=n.parent().children).length;a<c;a++)i=l[a],o=new e.TableCell(i.tagName(),i._attributes),r=new e.TableCellText(""),o.attach(r),s.attach(o);return this.closest((function(t){return"TableSection"===t.type()})).attach(s),s.children[0].tableCellText().focus()}return this.nextContent().focus()}},n.prototype._keyUp=function(t){var n,i,o,r,s;if(0===(s=ContentSelect.Range.query(this._domElement)).get()[0]&&s.isCollapsed())return t.preventDefault(),n=this.parent(),this._isInFirstRow()?(o=n.parent().children[0].previousContent())?o.focus():e.Root.get().trigger("previous-region",this.closest((function(t){return"Fixture"===t.type()||"Region"===t.type()}))):(r=n.parent().previousWithTest((function(t){return"TableRow"===t.type()})),i=n.parent().children.indexOf(n),i=Math.min(i,r.children.length),r.children[i].tableCellText().focus())},n.droppers={},n.mergers={},n}(e.Text)}.call(this),function(){var e,n,i,o,r,s={}.hasOwnProperty,a=function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c=function(t,e){return function(){return t.apply(e,arguments)}},l=[].slice;n={Tools:{},CANCEL_MESSAGE:"Your changes have not been saved, do you really want to lose them?".trim(),DEFAULT_TOOLS:[["bold","italic","link","align-left","align-center","align-right"],["heading","subheading","paragraph","unordered-list","ordered-list","table","indent","unindent","line-break"],["image","video","preformatted"],["undo","redo","remove"]],DEFAULT_VIDEO_HEIGHT:300,DEFAULT_VIDEO_WIDTH:400,HIGHLIGHT_HOLD_DURATION:2e3,IMAGE_UPLOADER:null,INLINE_TAGS:["a","address","b","code","del","em","i","ins","span","strong","sup","u"],INSPECTOR_IGNORED_ELEMENTS:["Fixture","ListItemText","Region","TableCellText"],MIN_CROP:10,RESTRICTED_ATTRIBUTES:{"*":["style"],img:["height","src","width","data-ce-max-width","data-ce-min-width"],iframe:["height","width"]},getEmbedVideoURL:function(t){var e,n,i,o,r,s,a,c,l,h,d,u,p,g;for(e={"www.youtube.com":"youtube","youtu.be":"youtube","vimeo.com":"vimeo","player.vimeo.com":"vimeo"},(l=document.createElement("a")).href=t,s=l.hostname.toLowerCase(),null!==(h=l.pathname)&&"/"!==h.substr(0,1)&&(h="/"+h),c={},u=0,p=(g=l.search.slice(1).split("&")).length;u<p;u++)(o=(o=g[u]).split("="))[0]&&(c[o[0]]=o[1]);switch(e[s]){case"youtube":if("/watch"===h.toLowerCase()){if(!c.v)return null;n=c.v,delete c.v}else{if(!(r=h.match(/\/([A-Za-z0-9_-]+)$/i)))return null;n=r[1]}return t="https://www.youtube.com/embed/"+n,(a=function(){var t;for(i in t=[],c)d=c[i],t.push(i+"="+d);return t}().join("&"))&&(t+="?"+a),t;case"vimeo":return(r=h.match(/\/(\w+\/\w+\/){0,1}(\d+)/i))?(t="https://player.vimeo.com/video/"+r[2],(a=function(){var t;for(i in t=[],c)d=c[i],t.push(i+"="+d);return t}().join("&"))&&(t+="?"+a),t):null}return null},getHTMLCleaner:function(){return new n.HTMLCleaner},getRestrictedAtributes:function(t){var e;return e=[],n.RESTRICTED_ATTRIBUTES[t]&&(e=e.concat(n.RESTRICTED_ATTRIBUTES[t])),n.RESTRICTED_ATTRIBUTES["*"]&&(e=e.concat(n.RESTRICTED_ATTRIBUTES["*"])),e},getScrollPosition:function(){var t,e;return e=void 0!==window.pageXOffset,t=4===(document.compatMode||4),e?[window.pageXOffset,window.pageYOffset]:t?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[document.body.scrollLeft,document.body.scrollTop]}},"undefined"!=typeof window&&(window.ContentTools=n),t.exports&&(t.exports=n),n.ComponentUI=function(){function t(){this._bindings={},this._parent=null,this._children=[],this._domElement=null}return t.prototype.children=function(){return this._children.slice()},t.prototype.domElement=function(){return this._domElement},t.prototype.isMounted=function(){return null!==this._domElement},t.prototype.parent=function(){return this._parent},t.prototype.attach=function(t,e){return t.parent()&&t.parent().detach(t),t._parent=this,void 0!==e?this._children.splice(e,0,t):this._children.push(t)},t.prototype.addCSSClass=function(t){if(this.isMounted())return ContentEdit.addCSSClass(this._domElement,t)},t.prototype.detach=function(t){var e;if(-1!==(e=this._children.indexOf(t)))return this._children.splice(e,1)},t.prototype.mount=function(){},t.prototype.removeCSSClass=function(t){if(this.isMounted())return ContentEdit.removeCSSClass(this._domElement,t)},t.prototype.unmount=function(){if(this.isMounted())return this._removeDOMEventListeners(),this._domElement.parentNode&&this._domElement.parentNode.removeChild(this._domElement),this._domElement=null},t.prototype.addEventListener=function(t,e){void 0===this._bindings[t]&&(this._bindings[t]=[]),this._bindings[t].push(e)},t.prototype.createEvent=function(t,e){return new n.Event(t,e)},t.prototype.dispatchEvent=function(t){var e,n,i,o;if(!this._bindings[t.name()])return!t.defaultPrevented();for(n=0,i=(o=this._bindings[t.name()]).length;n<i&&(e=o[n],!t.propagationStopped());n++)e&&e.call(this,t);return!t.defaultPrevented()},t.prototype.removeEventListener=function(t,e){var n,i,o,r,s;if(t)if(e){if(this._bindings[t]){for(s=[],n=i=0,o=(r=this._bindings[t]).length;i<o;n=++i)r[n]===e?s.push(this._bindings[t].splice(n,1)):s.push(void 0);return s}}else this._bindings[t]=void 0;else this._bindings={}},t.prototype._addDOMEventListeners=function(){},t.prototype._removeDOMEventListeners=function(){},t.createDiv=function(t,e,n){var i,o,r;if(i=document.createElement("div"),t&&t.length>0&&i.setAttribute("class",t.join(" ")),e)for(o in e)r=e[o],i.setAttribute(o,r);return n&&(i.innerHTML=n),i},t}(),n.WidgetUI=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.attach=function(t,n){if(e.__super__.attach.call(this,t,n),!this.isMounted())return t.mount()},e.prototype.detach=function(t){if(e.__super__.detach.call(this,t),this.isMounted())return t.unmount()},e.prototype.detatch=function(t){return console.log("Please call detach, detatch will be removed in release 1.4.x"),this.detach(t)},e.prototype.show=function(){var t,e;return this._hideTimeout&&(clearTimeout(this._hideTimeout),this._hideTimeout=null,this.unmount()),this.isMounted()||this.mount(),e=this,t=function(){return e.addCSSClass("ct-widget--active"),e._showTimeout=null},this._showTimeout=setTimeout(t,100)},e.prototype.hide=function(){var t,e;if(this._showTimeout&&(clearTimeout(this._showTimeout),this._showTimeout=null),this.removeCSSClass("ct-widget--active"),e=this,t=function(){if(e._hideTimeout=null,window.getComputedStyle)return parseFloat(window.getComputedStyle(e._domElement).opacity)<.01?e.unmount():e._hideTimeout=setTimeout(t,250);e.unmount()},this.isMounted())return this._hideTimeout=setTimeout(t,250)},e}(n.ComponentUI),n.AnchoredComponentUI=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.mount=function(t,e){return null==e&&(e=null),t.insertBefore(this._domElement,e),this._addDOMEventListeners()},e}(n.ComponentUI),n.Event=function(){function t(t,e){this._name=t,this._detail=e,this._timeStamp=Date.now(),this._defaultPrevented=!1,this._propagationStopped=!1}return t.prototype.defaultPrevented=function(){return this._defaultPrevented},t.prototype.detail=function(){return this._detail},t.prototype.name=function(){return this._name},t.prototype.propagationStopped=function(){return this._propagationStopped},t.prototype.timeStamp=function(){return this._timeStamp},t.prototype.preventDefault=function(){return this._defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){return this._propagationStopped=!0},t}(),n.FlashUI=function(t){function e(t){e.__super__.constructor.call(this),this.mount(t)}return a(e,t),e.prototype.mount=function(t){var i,o;return this._domElement=this.constructor.createDiv(["ct-flash","ct-flash--active","ct-flash--"+t,"ct-widget","ct-widget--active"]),e.__super__.mount.call(this,n.EditorApp.get().domElement()),o=this,i=function(){if(window.getComputedStyle)return parseFloat(window.getComputedStyle(o._domElement).opacity)<.01?o.unmount():setTimeout(i,250);o.unmount()},setTimeout(i,250)},e}(n.AnchoredComponentUI),n.IgnitionUI=function(t){function e(){e.__super__.constructor.call(this),this._revertToState="ready",this._state="ready"}return a(e,t),e.prototype.busy=function(t){if(this.dispatchEvent(this.createEvent("busy",{busy:t}))){if(t===("busy"===this._state))return;return t?(this._revertToState=this._state,this.state("busy")):this.state(this._revertToState)}},e.prototype.cancel=function(){if(this.dispatchEvent(this.createEvent("cancel")))return this.state("ready")},e.prototype.confirm=function(){if(this.dispatchEvent(this.createEvent("confirm")))return this.state("ready")},e.prototype.edit=function(){if(this.dispatchEvent(this.createEvent("edit")))return this.state("editing")},e.prototype.mount=function(){return e.__super__.mount.call(this),this._domElement=this.constructor.createDiv(["ct-widget","ct-ignition","ct-ignition--ready"]),this.parent().domElement().appendChild(this._domElement),this._domEdit=this.constructor.createDiv(["ct-ignition__button","ct-ignition__button--edit"]),this._domElement.appendChild(this._domEdit),this._domConfirm=this.constructor.createDiv(["ct-ignition__button","ct-ignition__button--confirm"]),this._domElement.appendChild(this._domConfirm),this._domCancel=this.constructor.createDiv(["ct-ignition__button","ct-ignition__button--cancel"]),this._domElement.appendChild(this._domCancel),this._domBusy=this.constructor.createDiv(["ct-ignition__button","ct-ignition__button--busy"]),this._domElement.appendChild(this._domBusy),this._addDOMEventListeners()},e.prototype.state=function(t){return void 0===t?this._state:this._state!==t&&this.dispatchEvent(this.createEvent("statechange",{state:t}))?(this._state=t,this.removeCSSClass("ct-ignition--busy"),this.removeCSSClass("ct-ignition--editing"),this.removeCSSClass("ct-ignition--ready"),"busy"===this._state?this.addCSSClass("ct-ignition--busy"):"editing"===this._state?this.addCSSClass("ct-ignition--editing"):"ready"===this._state?this.addCSSClass("ct-ignition--ready"):void 0):void 0},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domEdit=null,this._domConfirm=null,this._domCancel=null},e.prototype._addDOMEventListeners=function(){var t;return this._domEdit.addEventListener("click",(t=this,function(e){return e.preventDefault(),t.edit()})),this._domConfirm.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.confirm()}}(this)),this._domCancel.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.cancel()}}(this))},e}(n.WidgetUI),n.InspectorUI=function(t){function e(){e.__super__.constructor.call(this),this._tagUIs=[]}return a(e,t),e.prototype.mount=function(){var t;return this._domElement=this.constructor.createDiv(["ct-widget","ct-inspector"]),this.parent().domElement().appendChild(this._domElement),this._domTags=this.constructor.createDiv(["ct-inspector__tags","ct-tags"]),this._domElement.appendChild(this._domTags),this._domCounter=this.constructor.createDiv(["ct-inspector__counter"]),this._domElement.appendChild(this._domCounter),this.updateCounter(),this._addDOMEventListeners(),this._handleFocusChange=(t=this,function(){return t.updateTags()}),ContentEdit.Root.get().bind("blur",this._handleFocusChange),ContentEdit.Root.get().bind("focus",this._handleFocusChange),ContentEdit.Root.get().bind("mount",this._handleFocusChange)},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domTags=null,ContentEdit.Root.get().unbind("blur",this._handleFocusChange),ContentEdit.Root.get().unbind("focus",this._handleFocusChange),ContentEdit.Root.get().unbind("mount",this._handleFocusChange)},e.prototype.updateCounter=function(){var t,e,i,o,r,s,a,c,l,h;if(this.isMounted()){for(e="",c=0,l=(h=n.EditorApp.get().orderedRegions()).length;c<l;c++)(s=h[c])&&(e+=s.domElement().textContent);if(a=(a=((e=(e=(e=(e=e.trim()).replace(/<\/?[a-z][^>]*>/gi,"")).replace(/[\u200B]+/,"")).replace(/['";:,.?\-!]+/g,"")).match(/\S+/g)||[]).length).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),(i=ContentEdit.Root.get().focused())&&"PreText"===i.type()&&i.selection().isCollapsed())return o=0,t=1,o=(r=i.content.substring(0,i.selection().get()[0]).text().split("\n")).length,t=r[r.length-1].length+1,o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),t=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this._domCounter.textContent=a+" / "+o+":"+t;this._domCounter.textContent=a}},e.prototype.updateTags=function(){var t,e,i,o,r,s,a,c,l;for(t=ContentEdit.Root.get().focused(),o=0,s=(c=this._tagUIs).length;o<s;o++)(i=c[o]).unmount();if(this._tagUIs=[],t){for((e=t.parents()).reverse(),e.push(t),l=[],r=0,a=e.length;r<a;r++)t=e[r],-1===n.INSPECTOR_IGNORED_ELEMENTS.indexOf(t.type())&&(i=new n.TagUI(t),this._tagUIs.push(i),l.push(i.mount(this._domTags)));return l}},e.prototype._addDOMEventListeners=function(){return this._updateCounterInterval=setInterval((t=this,function(){return t.updateCounter()}),250);var t},e.prototype._removeDOMEventListeners=function(){return clearInterval(this._updateCounterInterval)},e}(n.WidgetUI),n.TagUI=function(t){function e(t){this.element=t,this._onMouseDown=c(this._onMouseDown,this),e.__super__.constructor.call(this)}return a(e,t),e.prototype.mount=function(t,n){return null==n&&(n=null),this._domElement=this.constructor.createDiv(["ct-tag"]),this._domElement.textContent=this.element.tagName(),e.__super__.mount.call(this,t,n)},e.prototype._addDOMEventListeners=function(){return this._domElement.addEventListener("mousedown",this._onMouseDown)},e.prototype._onMouseDown=function(t){var e,i,o,r;return t.preventDefault(),this.element.storeState&&this.element.storeState(),e=n.EditorApp.get(),o=new n.ModalUI,(i=new n.PropertiesDialog(this.element)).addEventListener("cancel",(r=this,function(){if(o.hide(),i.hide(),r.element.restoreState)return r.element.restoreState()})),i.addEventListener("save",function(t){return function(e){var n,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v;for(d in n=(c=e.detail()).changedAttributes,u=c.changedStyles,h=c.innerHTML,n)if(p=n[d],"class"===d){for(null===p&&(p=""),s={},g=0,f=(y=p.split(" ")).length;g<f;g++)(r=(r=y[g]).trim())&&(s[r]=!0,t.element.hasCSSClass(r)||t.element.addCSSClass(r));for(m=0,_=(v=t.element.attr("class").split(" ")).length;m<_;m++)void 0===s[r=(r=v[m]).trim()]&&t.element.removeCSSClass(r)}else null===p?t.element.removeAttr(d):t.element.attr(d,p);for(a in u)u[a]?t.element.addCSSClass(a):t.element.removeCSSClass(a);if(null!==h&&h!==i.getElementInnerHTML()&&((l=t.element).content||(l=l.children[0]),l.content=new HTMLString.String(h,l.content.preserveWhitespace()),l.updateInnerHTML(),l.taint(),l.selection(new ContentSelect.Range(0,0)),l.storeState()),o.hide(),i.hide(),t.element.restoreState)return t.element.restoreState()}}(this)),e.attach(o),e.attach(i),o.show(),i.show()},e}(n.AnchoredComponentUI),n.ModalUI=function(t){function e(t,n){e.__super__.constructor.call(this),this._transparent=t,this._allowScrolling=n}return a(e,t),e.prototype.mount=function(){return this._domElement=this.constructor.createDiv(["ct-widget","ct-modal"]),this.parent().domElement().appendChild(this._domElement),this._transparent&&this.addCSSClass("ct-modal--transparent"),this._allowScrolling||ContentEdit.addCSSClass(document.body,"ct--no-scroll"),this._addDOMEventListeners()},e.prototype.unmount=function(){return this._allowScrolling||ContentEdit.removeCSSClass(document.body,"ct--no-scroll"),e.__super__.unmount.call(this)},e.prototype._addDOMEventListeners=function(){return this._domElement.addEventListener("click",(t=this,function(e){return t.dispatchEvent(t.createEvent("click"))}));var t},e}(n.WidgetUI),n.ToolboxUI=function(t){function e(t){this._onStopDragging=c(this._onStopDragging,this),this._onStartDragging=c(this._onStartDragging,this),this._onDrag=c(this._onDrag,this),e.__super__.constructor.call(this),this._tools=t,this._dragging=!1,this._draggingOffset=null,this._domGrip=null,this._toolUIs={}}return a(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.hide=function(){return this._removeDOMEventListeners(),e.__super__.hide.call(this)},e.prototype.mount=function(){var t,e,n;return this._domElement=this.constructor.createDiv(["ct-widget","ct-toolbox"]),this.parent().domElement().appendChild(this._domElement),this._domGrip=this.constructor.createDiv(["ct-toolbox__grip","ct-grip"]),this._domElement.appendChild(this._domGrip),this._domGrip.appendChild(this.constructor.createDiv(["ct-grip__bump"])),this._domGrip.appendChild(this.constructor.createDiv(["ct-grip__bump"])),this._domGrip.appendChild(this.constructor.createDiv(["ct-grip__bump"])),this._domToolGroups=this.constructor.createDiv(["ct-tool-groups"]),this._domElement.appendChild(this._domToolGroups),this.tools(this._tools),(n=window.localStorage.getItem("ct-toolbox-position"))&&/^\d+,\d+$/.test(n)&&(e=function(){var e,i,o,r;for(r=[],e=0,i=(o=n.split(",")).length;e<i;e++)t=o[e],r.push(parseInt(t));return r}(),this._domElement.style.left=e[0]+"px",this._domElement.style.top=e[1]+"px",this._contain()),this._addDOMEventListeners()},e.prototype.tools=function(t){var e,i,o,r,s,a,c,l,h,d;if(void 0===t)return this._tools;if(this._tools=t,this.isMounted()){for(s in l=this._toolUIs)l[s].unmount();for(this._toolUIs={};this._domToolGroups.lastChild;)this._domToolGroups.removeChild(this._domToolGroups.lastChild);for(d=[],i=a=0,c=(h=this._tools).length;a<c;i=++a)r=h[i],e=this.constructor.createDiv(["ct-tool-group"]),this._domToolGroups.appendChild(e),d.push(function(){var t,i,a;for(a=[],t=0,i=r.length;t<i;t++)s=r[t],o=n.ToolShelf.fetch(s),this._toolUIs[s]=new n.ToolUI(o),this._toolUIs[s].mount(e),this._toolUIs[s].disabled(!0),a.push(this._toolUIs[s].addEventListener("applied",function(t){return function(){return t.updateTools()}}(this)));return a}.call(this));return d}},e.prototype.updateTools=function(){var t,e,n,i,o,r;for(e in n=null,(t=ContentEdit.Root.get().focused())&&t.selection&&(n=t.selection()),r=[],o=this._toolUIs)i=o[e],r.push(i.update(t,n));return r},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domGrip=null},e.prototype._addDOMEventListeners=function(){var t;return this._domGrip.addEventListener("mousedown",this._onStartDragging),this._handleResize=(t=this,function(e){var n;return t._resizeTimeout&&clearTimeout(t._resizeTimeout),n=function(){return t._contain()},t._resizeTimeout=setTimeout(n,250)}),window.addEventListener("resize",this._handleResize),this._updateTools=function(t){return function(){var e,i,o,r,s,a,c,l;if(e=n.EditorApp.get(),a=!1,r=null,(i=ContentEdit.Root.get().focused())===t._lastUpdateElement?i&&i.selection&&(r=i.selection(),t._lastUpdateSelection&&r.eq(t._lastUpdateSelection)||(a=!0)):a=!0,e.history&&(t._lastUpdateHistoryLength!==e.history.length()&&(a=!0),t._lastUpdateHistoryLength=e.history.length(),t._lastUpdateHistoryIndex!==e.history.index()&&(a=!0),t._lastUpdateHistoryIndex=e.history.index()),t._lastUpdateElement=i,t._lastUpdateSelection=r,a){for(o in l=[],c=t._toolUIs)s=c[o],l.push(s.update(i,r));return l}}}(this),this._updateToolsInterval=setInterval(this._updateTools,100),this._handleKeyDown=function(t){var e,i,o,r,s;if((e=ContentEdit.Root.get().focused())&&!e.content){if(46===t.keyCode)return t.preventDefault(),n.Tools.Remove.apply(e,null,(function(){}));if(13===t.keyCode)return t.preventDefault(),n.Tools.Paragraph.apply(e,null,(function(){}))}switch(i="linux",-1!==(s=navigator.appVersion).indexOf("Mac")?i="mac":-1!==s.indexOf("Win")&&(i="windows"),o=!1,r=!1,i){case"linux":t.altKey||90===t.keyCode&&t.ctrlKey&&(r=!(o=t.shiftKey));break;case"mac":t.altKey||t.ctrlKey||90===t.keyCode&&t.metaKey&&(r=!(o=t.shiftKey));break;case"windows":t.altKey&&!t.shiftKey||(89===t.keyCode&&t.ctrlKey&&(o=!0),90===t.keyCode&&t.ctrlKey&&(r=!0))}if(r&&n.Tools.Undo.canApply(null,null)&&n.Tools.Undo.apply(null,null,(function(){})),o&&n.Tools.Redo.canApply(null,null))return n.Tools.Redo.apply(null,null,(function(){}))},window.addEventListener("keydown",this._handleKeyDown)},e.prototype._contain=function(){var t;if(this.isMounted())return(t=this._domElement.getBoundingClientRect()).left+t.width>window.innerWidth&&(this._domElement.style.left=window.innerWidth-t.width+"px"),t.top+t.height>window.innerHeight&&(this._domElement.style.top=window.innerHeight-t.height+"px"),t.left<0&&(this._domElement.style.left="0px"),t.top<0&&(this._domElement.style.top="0px"),t=this._domElement.getBoundingClientRect(),window.localStorage.setItem("ct-toolbox-position",t.left+","+t.top)},e.prototype._removeDOMEventListeners=function(){return this.isMounted()&&this._domGrip.removeEventListener("mousedown",this._onStartDragging),window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("resize",this._handleResize),clearInterval(this._updateToolsInterval)},e.prototype._onDrag=function(t){return ContentSelect.Range.unselectAll(),this._domElement.style.left=t.clientX-this._draggingOffset.x+"px",this._domElement.style.top=t.clientY-this._draggingOffset.y+"px"},e.prototype._onStartDragging=function(t){var e;if(t.preventDefault(),!this.isDragging())return this._dragging=!0,this.addCSSClass("ct-toolbox--dragging"),e=this._domElement.getBoundingClientRect(),this._draggingOffset={x:t.clientX-e.left,y:t.clientY-e.top},document.addEventListener("mousemove",this._onDrag),document.addEventListener("mouseup",this._onStopDragging),ContentEdit.addCSSClass(document.body,"ce--dragging")},e.prototype._onStopDragging=function(t){if(this.isDragging())return this._contain(),document.removeEventListener("mousemove",this._onDrag),document.removeEventListener("mouseup",this._onStopDragging),this._draggingOffset=null,this._dragging=!1,this.removeCSSClass("ct-toolbox--dragging"),ContentEdit.removeCSSClass(document.body,"ce--dragging")},e}(n.WidgetUI),n.ToolUI=function(t){function e(t){this._onMouseUp=c(this._onMouseUp,this),this._onMouseLeave=c(this._onMouseLeave,this),this._onMouseDown=c(this._onMouseDown,this),this._addDOMEventListeners=c(this._addDOMEventListeners,this),e.__super__.constructor.call(this),this.tool=t,this._mouseDown=!1,this._disabled=!1}return a(e,t),e.prototype.apply=function(t,e){var n,i,o;if(this.tool.canApply(t,e))return i={element:t,selection:e},o=this,n=function(t){if(t)return o.dispatchEvent(o.createEvent("applied",i))},this.dispatchEvent(this.createEvent("apply",i))?this.tool.apply(t,e,n):void 0},e.prototype.disabled=function(t){return void 0===t?this._disabled:this._disabled!==t?(this._disabled=t,t?(this._mouseDown=!1,this.addCSSClass("ct-tool--disabled"),this.removeCSSClass("ct-tool--applied")):this.removeCSSClass("ct-tool--disabled")):void 0},e.prototype.mount=function(t,n){return null==n&&(n=null),this._domElement=this.constructor.createDiv(["ct-tool","ct-tool--"+this.tool.icon]),this._domElement.setAttribute("data-ct-tooltip",ContentEdit._(this.tool.label)),e.__super__.mount.call(this,t,n)},e.prototype.update=function(t,e){if(!this.tool.requiresElement||t&&t.isMounted()){if(this.tool.canApply(t,e))return this.disabled(!1),this.tool.isApplied(t,e)?this.addCSSClass("ct-tool--applied"):this.removeCSSClass("ct-tool--applied");this.disabled(!0)}else this.disabled(!0)},e.prototype._addDOMEventListeners=function(){return this._domElement.addEventListener("mousedown",this._onMouseDown),this._domElement.addEventListener("mouseleave",this._onMouseLeave),this._domElement.addEventListener("mouseup",this._onMouseUp)},e.prototype._onMouseDown=function(t){if(t.preventDefault(),!this.disabled())return this._mouseDown=!0,this.addCSSClass("ct-tool--down")},e.prototype._onMouseLeave=function(t){return this._mouseDown=!1,this.removeCSSClass("ct-tool--down")},e.prototype._onMouseUp=function(t){var e,n;if(this._mouseDown){if(e=ContentEdit.Root.get().focused(),this.tool.requiresElement&&(!e||!e.isMounted()))return;n=null,e&&e.selection&&(n=e.selection()),this.apply(e,n)}return this._mouseDown=!1,this.removeCSSClass("ct-tool--down")},e}(n.AnchoredComponentUI),n.AnchoredDialogUI=function(t){function e(){e.__super__.constructor.call(this),this._position=[0,0]}return a(e,t),e.prototype.mount=function(){return this._domElement=this.constructor.createDiv(["ct-widget","ct-anchored-dialog"]),this.parent().domElement().appendChild(this._domElement),this._contain(),this._domElement.style.top=this._position[1]+"px",this._domElement.style.left=this._position[0]+"px"},e.prototype.position=function(t){return void 0===t?this._position.slice():(this._position=t.slice(),this.isMounted()?(this._contain(),this._domElement.style.top=this._position[1]+"px",this._domElement.style.left=this._position[0]+"px"):void 0)},e.prototype._contain=function(){var t,e,n;if(this.isMounted())return t=(n=this._domElement.getBoundingClientRect()).width/2+5,e=document.documentElement.clientWidth||document.body.clientWidth,this._position[0]+t>e&&(this._position[0]=e-t),this._position[0]<t&&(this._position[0]=t),this._position[1]+n.top<5?this._position[1]=Math.abs(n.top)+5:void 0},e}(n.WidgetUI),n.DialogUI=function(t){function e(t){null==t&&(t=""),e.__super__.constructor.call(this),this._busy=!1,this._caption=t}return a(e,t),e.prototype.busy=function(t){return void 0===t?this._busy:this._busy!==t&&(this._busy=t,this.isMounted())?this._busy?ContentEdit.addCSSClass(this._domElement,"ct-dialog--busy"):ContentEdit.removeCSSClass(this._domElement,"ct-dialog--busy"):void 0},e.prototype.caption=function(t){return void 0===t?this._caption:(this._caption=t,this._domCaption.textContent=ContentEdit._(t))},e.prototype.mount=function(){var t,e,n;return document.activeElement&&(document.activeElement.blur(),window.getSelection().removeAllRanges()),t=["ct-widget","ct-dialog"],this._busy&&t.push("ct-dialog--busy"),this._domElement=this.constructor.createDiv(t),this.parent().domElement().appendChild(this._domElement),n=this.constructor.createDiv(["ct-dialog__header"]),this._domElement.appendChild(n),this._domCaption=this.constructor.createDiv(["ct-dialog__caption"]),n.appendChild(this._domCaption),this.caption(this._caption),this._domClose=this.constructor.createDiv(["ct-dialog__close"]),n.appendChild(this._domClose),e=this.constructor.createDiv(["ct-dialog__body"]),this._domElement.appendChild(e),this._domView=this.constructor.createDiv(["ct-dialog__view"]),e.appendChild(this._domView),this._domControls=this.constructor.createDiv(["ct-dialog__controls"]),e.appendChild(this._domControls),this._domBusy=this.constructor.createDiv(["ct-dialog__busy"]),this._domElement.appendChild(this._domBusy)},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domBusy=null,this._domCaption=null,this._domClose=null,this._domControls=null,this._domView=null},e.prototype._addDOMEventListeners=function(){var t;return this._handleEscape=(t=this,function(e){if(!t._busy)return 27===e.keyCode?t.dispatchEvent(t.createEvent("cancel")):void 0}),document.addEventListener("keyup",this._handleEscape),this._domClose.addEventListener("click",function(t){return function(e){if(e.preventDefault(),!t._busy)return t.dispatchEvent(t.createEvent("cancel"))}}(this))},e.prototype._removeDOMEventListeners=function(){return document.removeEventListener("keyup",this._handleEscape)},e}(n.WidgetUI),n.ImageDialog=function(t){function e(){e.__super__.constructor.call(this,"Insert image"),this._cropMarks=null,this._imageURL=null,this._imageSize=null,this._progress=0,this._state="empty",n.IMAGE_UPLOADER&&n.IMAGE_UPLOADER(this)}return a(e,t),e.prototype.cropRegion=function(){return this._cropMarks?this._cropMarks.region():[0,0,1,1]},e.prototype.addCropMarks=function(){if(!this._cropMarks)return this._cropMarks=new i(this._imageSize),this._cropMarks.mount(this._domView),ContentEdit.addCSSClass(this._domCrop,"ct-control--active")},e.prototype.clear=function(){return this._domImage&&(this._domImage.parentNode.removeChild(this._domImage),this._domImage=null),this._imageURL=null,this._imageSize=null,this.state("empty")},e.prototype.mount=function(){var t,n,i;return e.__super__.mount.call(this),ContentEdit.addCSSClass(this._domElement,"ct-image-dialog"),ContentEdit.addCSSClass(this._domElement,"ct-image-dialog--empty"),ContentEdit.addCSSClass(this._domView,"ct-image-dialog__view"),i=this.constructor.createDiv(["ct-control-group","ct-control-group--left"]),this._domControls.appendChild(i),this._domRotateCCW=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--rotate-ccw"]),this._domRotateCCW.setAttribute("data-ct-tooltip",ContentEdit._("Rotate")+" -90"),i.appendChild(this._domRotateCCW),this._domRotateCW=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--rotate-cw"]),this._domRotateCW.setAttribute("data-ct-tooltip",ContentEdit._("Rotate")+" 90"),i.appendChild(this._domRotateCW),this._domCrop=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--crop"]),this._domCrop.setAttribute("data-ct-tooltip",ContentEdit._("Crop marks")),i.appendChild(this._domCrop),n=this.constructor.createDiv(["ct-progress-bar"]),i.appendChild(n),this._domProgress=this.constructor.createDiv(["ct-progress-bar__progress"]),n.appendChild(this._domProgress),t=this.constructor.createDiv(["ct-control-group","ct-control-group--right"]),this._domControls.appendChild(t),this._domUpload=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--upload"]),this._domUpload.textContent=ContentEdit._("Upload"),t.appendChild(this._domUpload),this._domInput=document.createElement("input"),this._domInput.setAttribute("class","ct-image-dialog__file-upload"),this._domInput.setAttribute("name","file"),this._domInput.setAttribute("type","file"),this._domInput.setAttribute("accept","image/*"),this._domUpload.appendChild(this._domInput),this._domInsert=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--insert"]),this._domInsert.textContent=ContentEdit._("Insert"),t.appendChild(this._domInsert),this._domCancelUpload=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--cancel"]),this._domCancelUpload.textContent=ContentEdit._("Cancel"),t.appendChild(this._domCancelUpload),this._domClear=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--clear"]),this._domClear.textContent=ContentEdit._("Clear"),t.appendChild(this._domClear),this._addDOMEventListeners(),this.dispatchEvent(this.createEvent("imageuploader.mount"))},e.prototype.populate=function(t,e){return this._imageURL=t,this._imageSize=e,this._domImage||(this._domImage=this.constructor.createDiv(["ct-image-dialog__image"]),this._domView.appendChild(this._domImage)),this._domImage.style["background-image"]="url("+t+")",this.state("populated")},e.prototype.progress=function(t){return void 0===t?this._progress:(this._progress=t,this.isMounted()?this._domProgress.style.width=this._progress+"%":void 0)},e.prototype.removeCropMarks=function(){if(this._cropMarks)return this._cropMarks.unmount(),this._cropMarks=null,ContentEdit.removeCSSClass(this._domCrop,"ct-control--active")},e.prototype.save=function(t,e,n){return this.dispatchEvent(this.createEvent("save",{imageURL:t,imageSize:e,imageAttrs:n}))},e.prototype.state=function(t){var e;return void 0===t?this._state:this._state!==t&&(e=this._state,this._state=t,this.isMounted())?(ContentEdit.addCSSClass(this._domElement,"ct-image-dialog--"+this._state),ContentEdit.removeCSSClass(this._domElement,"ct-image-dialog--"+e)):void 0},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domCancelUpload=null,this._domClear=null,this._domCrop=null,this._domInput=null,this._domInsert=null,this._domProgress=null,this._domRotateCCW=null,this._domRotateCW=null,this._domUpload=null,this.dispatchEvent(this.createEvent("imageuploader.unmount"))},e.prototype._addDOMEventListeners=function(){var t;return e.__super__._addDOMEventListeners.call(this),this._domInput.addEventListener("change",(t=this,function(e){var n;if(n=e.target.files[0])return e.target.value="",e.target.value&&(e.target.type="text",e.target.type="file"),t.dispatchEvent(t.createEvent("imageuploader.fileready",{file:n}))})),this._domCancelUpload.addEventListener("click",function(t){return function(e){return t.dispatchEvent(t.createEvent("imageuploader.cancelupload"))}}(this)),this._domClear.addEventListener("click",function(t){return function(e){return t.removeCropMarks(),t.dispatchEvent(t.createEvent("imageuploader.clear"))}}(this)),this._domRotateCCW.addEventListener("click",function(t){return function(e){return t.removeCropMarks(),t.dispatchEvent(t.createEvent("imageuploader.rotateccw"))}}(this)),this._domRotateCW.addEventListener("click",function(t){return function(e){return t.removeCropMarks(),t.dispatchEvent(t.createEvent("imageuploader.rotatecw"))}}(this)),this._domCrop.addEventListener("click",function(t){return function(e){return t._cropMarks?t.removeCropMarks():t.addCropMarks()}}(this)),this._domInsert.addEventListener("click",function(t){return function(e){return t.dispatchEvent(t.createEvent("imageuploader.save"))}}(this))},e}(n.DialogUI),i=function(t){function e(t){e.__super__.constructor.call(this),this._bounds=null,this._dragging=null,this._draggingOrigin=null,this._imageSize=t}return a(e,t),e.prototype.mount=function(t,n){return null==n&&(n=null),this._domElement=this.constructor.createDiv(["ct-crop-marks"]),this._domClipper=this.constructor.createDiv(["ct-crop-marks__clipper"]),this._domElement.appendChild(this._domClipper),this._domRulers=[this.constructor.createDiv(["ct-crop-marks__ruler","ct-crop-marks__ruler--top-left"]),this.constructor.createDiv(["ct-crop-marks__ruler","ct-crop-marks__ruler--bottom-right"])],this._domClipper.appendChild(this._domRulers[0]),this._domClipper.appendChild(this._domRulers[1]),this._domHandles=[this.constructor.createDiv(["ct-crop-marks__handle","ct-crop-marks__handle--top-left"]),this.constructor.createDiv(["ct-crop-marks__handle","ct-crop-marks__handle--bottom-right"])],this._domElement.appendChild(this._domHandles[0]),this._domElement.appendChild(this._domHandles[1]),e.__super__.mount.call(this,t,n),this._fit(t)},e.prototype.region=function(){return[parseFloat(this._domHandles[0].style.top)/this._bounds[1],parseFloat(this._domHandles[0].style.left)/this._bounds[0],parseFloat(this._domHandles[1].style.top)/this._bounds[1],parseFloat(this._domHandles[1].style.left)/this._bounds[0]]},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domClipper=null,this._domHandles=null,this._domRulers=null},e.prototype._addDOMEventListeners=function(){var t;return e.__super__._addDOMEventListeners.call(this),this._domHandles[0].addEventListener("mousedown",(t=this,function(e){if(0===e.button)return t._startDrag(0,e.clientY,e.clientX)})),this._domHandles[1].addEventListener("mousedown",function(t){return function(e){if(0===e.button)return t._startDrag(1,e.clientY,e.clientX)}}(this))},e.prototype._drag=function(t,e){var i,o,r,s,a;if(null!==this._dragging)return ContentSelect.Range.unselectAll(),s=t-this._draggingOrigin[1],r=e-this._draggingOrigin[0],i=this._bounds[1],e=0,t=0,a=this._bounds[0],o=Math.min(Math.min(n.MIN_CROP,i),a),0===this._dragging?(i=parseInt(this._domHandles[1].style.top)-o,a=parseInt(this._domHandles[1].style.left)-o):(e=parseInt(this._domHandles[0].style.left)+o,t=parseInt(this._domHandles[0].style.top)+o),s=Math.min(Math.max(t,s),i),r=Math.min(Math.max(e,r),a),this._domHandles[this._dragging].style.top=s+"px",this._domHandles[this._dragging].style.left=r+"px",this._domRulers[this._dragging].style.top=s+"px",this._domRulers[this._dragging].style.left=r+"px"},e.prototype._fit=function(t){var e,n,i,o,r,s,a,c;return c=(r=t.getBoundingClientRect()).width/this._imageSize[0],n=r.height/this._imageSize[1],a=(o=Math.min(c,n))*this._imageSize[0],e=o*this._imageSize[1],i=(r.width-a)/2,s=(r.height-e)/2,this._domElement.style.width=a+"px",this._domElement.style.height=e+"px",this._domElement.style.top=s+"px",this._domElement.style.left=i+"px",this._domHandles[0].style.top="0px",this._domHandles[0].style.left="0px",this._domHandles[1].style.top=e+"px",this._domHandles[1].style.left=a+"px",this._domRulers[0].style.top="0px",this._domRulers[0].style.left="0px",this._domRulers[1].style.top=e+"px",this._domRulers[1].style.left=a+"px",this._bounds=[a,e]},e.prototype._startDrag=function(t,e,n){var i,o;return i=this._domHandles[t],this._dragging=t,this._draggingOrigin=[n-parseInt(i.style.left),e-parseInt(i.style.top)],this._onMouseMove=(o=this,function(t){return o._drag(t.clientY,t.clientX)}),document.addEventListener("mousemove",this._onMouseMove),this._onMouseUp=function(t){return function(e){return t._stopDrag()}}(this),document.addEventListener("mouseup",this._onMouseUp)},e.prototype._stopDrag=function(){return document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this._dragging=null,this._draggingOrigin=null},e}(n.AnchoredComponentUI),n.LinkDialog=function(t){function e(t,n){null==t&&(t=""),null==n&&(n=""),e.__super__.constructor.call(this),this._href=t,this._target=n}return a(e,t),"_blank",e.prototype.mount=function(){return e.__super__.mount.call(this),this._domInput=document.createElement("input"),this._domInput.setAttribute("class","ct-anchored-dialog__input"),this._domInput.setAttribute("name","href"),this._domInput.setAttribute("placeholder",ContentEdit._("Enter a link")+"..."),this._domInput.setAttribute("type","text"),this._domInput.setAttribute("value",this._href),this._domElement.appendChild(this._domInput),this._domTargetButton=this.constructor.createDiv(["ct-anchored-dialog__target-button"]),this._domElement.appendChild(this._domTargetButton),"_blank"===this._target&&ContentEdit.addCSSClass(this._domTargetButton,"ct-anchored-dialog__target-button--active"),this._domButton=this.constructor.createDiv(["ct-anchored-dialog__button"]),this._domElement.appendChild(this._domButton),this._addDOMEventListeners()},e.prototype.save=function(){var t;if(this.isMounted())return t={href:this._domInput.value.trim()},this._target&&(t.target=this._target),this.dispatchEvent(this.createEvent("save",t));this.dispatchEvent(this.createEvent("save"))},e.prototype.show=function(){if(e.__super__.show.call(this),this._domInput.focus(),this._href)return this._domInput.select()},e.prototype.unmount=function(){return this.isMounted()&&this._domInput.blur(),e.__super__.unmount.call(this),this._domButton=null,this._domInput=null},e.prototype._addDOMEventListeners=function(){var t;return this._domInput.addEventListener("keypress",(t=this,function(e){if(13===e.keyCode)return t.save()})),this._domTargetButton.addEventListener("click",function(t){return function(e){return e.preventDefault(),"_blank"===t._target?(t._target="",ContentEdit.removeCSSClass(t._domTargetButton,"ct-anchored-dialog__target-button--active")):(t._target="_blank",ContentEdit.addCSSClass(t._domTargetButton,"ct-anchored-dialog__target-button--active"))}}(this)),this._domButton.addEventListener("click",function(t){return function(e){return e.preventDefault(),t.save()}}(this))},e}(n.AnchoredDialogUI),n.PropertiesDialog=function(t){function i(t){var e;this.element=t,i.__super__.constructor.call(this,"Properties"),this._attributeUIs=[],this._focusedAttributeUI=null,this._styleUIs=[],this._supportsCoding=this.element.content,"ListItem"!==(e=this.element.type())&&"TableCell"!==e||(this._supportsCoding=!0)}return a(i,t),i.prototype.caption=function(t){return void 0===t?this._caption:(this._caption=t,this._domCaption.textContent=ContentEdit._(t)+": "+this.element.tagName())},i.prototype.changedAttributes=function(){var t,e,i,o,r,s,a,c,l,h;for(e={},i={},a=0,c=(l=this._attributeUIs).length;a<c;a++)o=(t=l[a]).name(),s=t.value(),""!==o&&(e[o.toLowerCase()]=!0,this.element.attr(o)!==s&&(i[o]=s));for(o in r=n.getRestrictedAtributes(this.element.tagName()),h=this.element.attributes())s=h[o],r&&-1!==r.indexOf(o.toLowerCase())||void 0===e[o]&&(i[o]=null);return i},i.prototype.changedStyles=function(){var t,e,n,i,o,r;for(n={},i=0,o=(r=this._styleUIs).length;i<o;i++)t=(e=r[i]).style.cssClass(),this.element.hasCSSClass(t)!==e.applied()&&(n[t]=e.applied());return n},i.prototype.getElementInnerHTML=function(){return this._supportsCoding?this.element.content?this.element.content.html():this.element.children[0].content.html():null},i.prototype.mount=function(){var t,e,r,s,a,c,l,h,d,u,p,g,m,f,_;for(i.__super__.mount.call(this),ContentEdit.addCSSClass(this._domElement,"ct-properties-dialog"),ContentEdit.addCSSClass(this._domView,"ct-properties-dialog__view"),this._domStyles=this.constructor.createDiv(["ct-properties-dialog__styles"]),this._domStyles.setAttribute("data-ct-empty",ContentEdit._("No styles available for this tag")),this._domView.appendChild(this._domStyles),p=0,m=(_=n.StylePalette.styles(this.element)).length;p<m;p++)h=_[p],d=new o(h,this.element.hasCSSClass(h.cssClass())),this._styleUIs.push(d),d.mount(this._domStyles);for(c in this._domAttributes=this.constructor.createDiv(["ct-properties-dialog__attributes"]),this._domView.appendChild(this._domAttributes),l=n.getRestrictedAtributes(this.element.tagName()),t=[],e=this.element.attributes())u=e[c],l&&-1!==l.indexOf(c.toLowerCase())||t.push(c);for(t.sort(),g=0,f=t.length;g<f;g++)u=e[c=t[g]],this._addAttributeUI(c,u);return this._addAttributeUI("",""),this._domCode=this.constructor.createDiv(["ct-properties-dialog__code"]),this._domView.appendChild(this._domCode),this._domInnerHTML=document.createElement("textarea"),this._domInnerHTML.setAttribute("class","ct-properties-dialog__inner-html"),this._domInnerHTML.setAttribute("name","code"),this._domInnerHTML.value=this.getElementInnerHTML(),this._domCode.appendChild(this._domInnerHTML),s=this.constructor.createDiv(["ct-control-group","ct-control-group--left"]),this._domControls.appendChild(s),this._domStylesTab=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--styles"]),this._domStylesTab.setAttribute("data-ct-tooltip",ContentEdit._("Styles")),s.appendChild(this._domStylesTab),this._domAttributesTab=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--attributes"]),this._domAttributesTab.setAttribute("data-ct-tooltip",ContentEdit._("Attributes")),s.appendChild(this._domAttributesTab),this._domCodeTab=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--code"]),this._domCodeTab.setAttribute("data-ct-tooltip",ContentEdit._("Code")),s.appendChild(this._domCodeTab),this._supportsCoding||ContentEdit.addCSSClass(this._domCodeTab,"ct-control--muted"),this._domRemoveAttribute=this.constructor.createDiv(["ct-control","ct-control--icon","ct-control--remove","ct-control--muted"]),this._domRemoveAttribute.setAttribute("data-ct-tooltip",ContentEdit._("Remove")),s.appendChild(this._domRemoveAttribute),r=this.constructor.createDiv(["ct-control-group","ct-control-group--right"]),this._domControls.appendChild(r),this._domApply=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--apply"]),this._domApply.textContent=ContentEdit._("Apply"),r.appendChild(this._domApply),"attributes"===(a=window.localStorage.getItem("ct-properties-dialog-tab"))?(ContentEdit.addCSSClass(this._domElement,"ct-properties-dialog--attributes"),ContentEdit.addCSSClass(this._domAttributesTab,"ct-control--active")):"code"===a&&this._supportsCoding?(ContentEdit.addCSSClass(this._domElement,"ct-properties-dialog--code"),ContentEdit.addCSSClass(this._domCodeTab,"ct-control--active")):(ContentEdit.addCSSClass(this._domElement,"ct-properties-dialog--styles"),ContentEdit.addCSSClass(this._domStylesTab,"ct-control--active")),this._addDOMEventListeners()},i.prototype.save=function(){var t,e;return e=null,this._supportsCoding&&(e=this._domInnerHTML.value),t={changedAttributes:this.changedAttributes(),changedStyles:this.changedStyles(),innerHTML:e},this.dispatchEvent(this.createEvent("save",t))},i.prototype._addAttributeUI=function(t,i){var o,r;return r=this,o=new e(t,i),this._attributeUIs.push(o),o.addEventListener("blur",(function(t){var e,n,i;if(r._focusedAttributeUI=null,ContentEdit.addCSSClass(r._domRemoveAttribute,"ct-control--muted"),e=r._attributeUIs.indexOf(this),i=r._attributeUIs.length,""===this.name()&&e<i-1&&(this.unmount(),r._attributeUIs.splice(e,1)),(n=r._attributeUIs[i-1])&&n.name()&&n.value())return r._addAttributeUI("","")})),o.addEventListener("focus",(function(t){return r._focusedAttributeUI=this,ContentEdit.removeCSSClass(r._domRemoveAttribute,"ct-control--muted")})),o.addEventListener("namechange",(function(e){var i,o,s,a,c,l,h;for(i=r.element,t=this.name().toLowerCase(),a=!0,(s=n.getRestrictedAtributes(i.tagName()))&&-1!==s.indexOf(t)&&(a=!1),c=0,l=(h=r._attributeUIs).length;c<l;c++)o=h[c],""!==t&&o!==this&&o.name().toLowerCase()===t&&(a=!1);return this.valid(a),a?ContentEdit.removeCSSClass(r._domApply,"ct-control--muted"):ContentEdit.addCSSClass(r._domApply,"ct-control--muted")})),o.mount(this._domAttributes),o},i.prototype._addDOMEventListeners=function(){var t,e,n;return i.__super__._addDOMEventListeners.call(this),n=this,t=function(t){var e,i,o,r,s,a;for(s=0,a=(r=["attributes","code","styles"]).length;s<a;s++)(i=r[s])!==t&&(o=i.charAt(0).toUpperCase()+i.slice(1),ContentEdit.removeCSSClass(n._domElement,"ct-properties-dialog--"+i),ContentEdit.removeCSSClass(n["_dom"+o+"Tab"],"ct-control--active"));return e=t.charAt(0).toUpperCase()+t.slice(1),ContentEdit.addCSSClass(n._domElement,"ct-properties-dialog--"+t),ContentEdit.addCSSClass(n["_dom"+e+"Tab"],"ct-control--active"),window.localStorage.setItem("ct-properties-dialog-tab",t)},this._domStylesTab.addEventListener("mousedown",(function(){return t("styles")})),this._domAttributesTab.addEventListener("mousedown",(function(){return t("attributes")})),this._supportsCoding&&this._domCodeTab.addEventListener("mousedown",(function(){return t("code")})),this._domRemoveAttribute.addEventListener("mousedown",function(t){return function(e){var n,i;if(e.preventDefault(),t._focusedAttributeUI&&(i=(n=t._attributeUIs.indexOf(t._focusedAttributeUI))===t._attributeUIs.length-1,t._focusedAttributeUI.unmount(),t._attributeUIs.splice(n,1),i))return t._addAttributeUI("","")}}(this)),e=function(t){return function(e){try{return new HTMLString.String(t._domInnerHTML.value),ContentEdit.removeCSSClass(t._domInnerHTML,"ct-properties-dialog__inner-html--invalid"),ContentEdit.removeCSSClass(t._domApply,"ct-control--muted")}catch(e){return ContentEdit.addCSSClass(t._domInnerHTML,"ct-properties-dialog__inner-html--invalid"),ContentEdit.addCSSClass(t._domApply,"ct-control--muted")}}}(this),this._domInnerHTML.addEventListener("input",e),this._domInnerHTML.addEventListener("propertychange",e),this._domApply.addEventListener("click",function(t){return function(e){if(e.preventDefault(),-1===t._domApply.getAttribute("class").indexOf("ct-control--muted"))return t.save()}}(this))},i}(n.DialogUI),o=function(t){function e(t,n){this.style=t,e.__super__.constructor.call(this),this._applied=n}return a(e,t),e.prototype.applied=function(t){return void 0===t?this._applied:this._applied!==t?(this._applied=t,this._applied?ContentEdit.addCSSClass(this._domElement,"ct-section--applied"):ContentEdit.removeCSSClass(this._domElement,"ct-section--applied")):void 0},e.prototype.mount=function(t,n){var i;return null==n&&(n=null),this._domElement=this.constructor.createDiv(["ct-section"]),this._applied&&ContentEdit.addCSSClass(this._domElement,"ct-section--applied"),(i=this.constructor.createDiv(["ct-section__label"])).textContent=this.style.name(),this._domElement.appendChild(i),this._domElement.appendChild(this.constructor.createDiv(["ct-section__switch"])),e.__super__.mount.call(this,t,n)},e.prototype._addDOMEventListeners=function(){var t,e;return e=this,t=function(t){return t.preventDefault(),e.applied()?e.applied(!1):e.applied(!0)},this._domElement.addEventListener("click",t)},e}(n.AnchoredComponentUI),e=function(t){function e(t,n){e.__super__.constructor.call(this),this._initialName=t,this._initialValue=n}return a(e,t),e.prototype.name=function(){return this._domName.value.trim()},e.prototype.value=function(){return this._domValue.value.trim()},e.prototype.mount=function(t,n){return null==n&&(n=null),this._domElement=this.constructor.createDiv(["ct-attribute"]),this._domName=document.createElement("input"),this._domName.setAttribute("class","ct-attribute__name"),this._domName.setAttribute("name","name"),this._domName.setAttribute("placeholder",ContentEdit._("Name")),this._domName.setAttribute("type","text"),this._domName.setAttribute("value",this._initialName),this._domElement.appendChild(this._domName),this._domValue=document.createElement("input"),this._domValue.setAttribute("class","ct-attribute__value"),this._domValue.setAttribute("name","value"),this._domValue.setAttribute("placeholder",ContentEdit._("Value")),this._domValue.setAttribute("type","text"),this._domValue.setAttribute("value",this._initialValue),this._domElement.appendChild(this._domValue),e.__super__.mount.call(this,t,n)},e.prototype.valid=function(t){return t?ContentEdit.removeCSSClass(this._domName,"ct-attribute__name--invalid"):ContentEdit.addCSSClass(this._domName,"ct-attribute__name--invalid")},e.prototype._addDOMEventListeners=function(){var t;return this._domName.addEventListener("blur",(t=this,function(){var e,n;if(e=t.name(),n=t._domElement.nextSibling,t.dispatchEvent(t.createEvent("blur")),""===e&&n)return n.querySelector(".ct-attribute__name").focus()})),this._domName.addEventListener("focus",function(t){return function(){return t.dispatchEvent(t.createEvent("focus"))}}(this)),this._domName.addEventListener("input",function(t){return function(){return t.dispatchEvent(t.createEvent("namechange"))}}(this)),this._domName.addEventListener("keydown",function(t){return function(e){if(13===e.keyCode)return t._domValue.focus()}}(this)),this._domValue.addEventListener("blur",function(t){return function(){return t.dispatchEvent(t.createEvent("blur"))}}(this)),this._domValue.addEventListener("focus",function(t){return function(){return t.dispatchEvent(t.createEvent("focus"))}}(this)),this._domValue.addEventListener("keydown",function(t){return function(e){var n;if(13===e.keyCode||9===e.keyCode&&!e.shiftKey)return e.preventDefault(),(n=t._domElement.nextSibling)||(t._domValue.blur(),n=t._domElement.nextSibling),n?n.querySelector(".ct-attribute__name").focus():void 0}}(this))},e}(n.AnchoredComponentUI),n.TableDialog=function(t){function e(t){this.table=t,this.table?e.__super__.constructor.call(this,"Update table"):e.__super__.constructor.call(this,"Insert table")}return a(e,t),e.prototype.mount=function(){var t,n,i,o,r,s,a;return e.__super__.mount.call(this),t={columns:3,foot:!1,head:!0},this.table&&(t={columns:this.table.firstSection().children[0].children.length,foot:this.table.tfoot(),head:this.table.thead()}),ContentEdit.addCSSClass(this._domElement,"ct-table-dialog"),ContentEdit.addCSSClass(this._domView,"ct-table-dialog__view"),a=["ct-section"],t.head&&a.push("ct-section--applied"),this._domHeadSection=this.constructor.createDiv(a),this._domView.appendChild(this._domHeadSection),(r=this.constructor.createDiv(["ct-section__label"])).textContent=ContentEdit._("Table head"),this._domHeadSection.appendChild(r),this._domHeadSwitch=this.constructor.createDiv(["ct-section__switch"]),this._domHeadSection.appendChild(this._domHeadSwitch),this._domBodySection=this.constructor.createDiv(["ct-section","ct-section--applied","ct-section--contains-input"]),this._domView.appendChild(this._domBodySection),(n=this.constructor.createDiv(["ct-section__label"])).textContent=ContentEdit._("Table body (columns)"),this._domBodySection.appendChild(n),this._domBodyInput=document.createElement("input"),this._domBodyInput.setAttribute("class","ct-section__input"),this._domBodyInput.setAttribute("maxlength","2"),this._domBodyInput.setAttribute("name","columns"),this._domBodyInput.setAttribute("type","text"),this._domBodyInput.setAttribute("value",t.columns),this._domBodySection.appendChild(this._domBodyInput),s=["ct-section"],t.foot&&s.push("ct-section--applied"),this._domFootSection=this.constructor.createDiv(s),this._domView.appendChild(this._domFootSection),(o=this.constructor.createDiv(["ct-section__label"])).textContent=ContentEdit._("Table foot"),this._domFootSection.appendChild(o),this._domFootSwitch=this.constructor.createDiv(["ct-section__switch"]),this._domFootSection.appendChild(this._domFootSwitch),i=this.constructor.createDiv(["ct-control-group","ct-control-group--right"]),this._domControls.appendChild(i),this._domApply=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--apply"]),this._domApply.textContent="Apply",i.appendChild(this._domApply),this._addDOMEventListeners()},e.prototype.save=function(){var t,e,n;return e=this._domFootSection.getAttribute("class"),n=this._domHeadSection.getAttribute("class"),t={columns:parseInt(this._domBodyInput.value),foot:e.indexOf("ct-section--applied")>-1,head:n.indexOf("ct-section--applied")>-1},this.dispatchEvent(this.createEvent("save",t))},e.prototype.unmount=function(){return e.__super__.unmount.call(this),this._domBodyInput=null,this._domBodySection=null,this._domApply=null,this._domHeadSection=null,this._domHeadSwitch=null,this._domFootSection=null,this._domFootSwitch=null},e.prototype._addDOMEventListeners=function(){var t,n;return e.__super__._addDOMEventListeners.call(this),t=function(t){return t.preventDefault(),this.getAttribute("class").indexOf("ct-section--applied")>-1?ContentEdit.removeCSSClass(this,"ct-section--applied"):ContentEdit.addCSSClass(this,"ct-section--applied")},this._domHeadSection.addEventListener("click",t),this._domFootSection.addEventListener("click",t),this._domBodySection.addEventListener("click",(n=this,function(t){return n._domBodyInput.focus()})),this._domBodyInput.addEventListener("input",function(t){return function(e){return/^[1-9]\d{0,1}$/.test(e.target.value)?(ContentEdit.removeCSSClass(t._domBodyInput,"ct-section__input--invalid"),ContentEdit.removeCSSClass(t._domApply,"ct-control--muted")):(ContentEdit.addCSSClass(t._domBodyInput,"ct-section__input--invalid"),ContentEdit.addCSSClass(t._domApply,"ct-control--muted"))}}(this)),this._domApply.addEventListener("click",function(t){return function(e){if(e.preventDefault(),-1===t._domApply.getAttribute("class").indexOf("ct-control--muted"))return t.save()}}(this))},e}(n.DialogUI),n.VideoDialog=function(t){function e(){e.__super__.constructor.call(this,"Insert video")}return a(e,t),e.prototype.clearPreview=function(){if(this._domPreview)return this._domPreview.parentNode.removeChild(this._domPreview),this._domPreview=void 0},e.prototype.mount=function(){var t;return e.__super__.mount.call(this),ContentEdit.addCSSClass(this._domElement,"ct-video-dialog"),ContentEdit.addCSSClass(this._domView,"ct-video-dialog__preview"),t=this.constructor.createDiv(["ct-control-group"]),this._domControls.appendChild(t),this._domInput=document.createElement("input"),this._domInput.setAttribute("class","ct-video-dialog__input"),this._domInput.setAttribute("name","url"),this._domInput.setAttribute("placeholder",ContentEdit._("Paste YouTube or Vimeo URL")+"..."),this._domInput.setAttribute("type","text"),t.appendChild(this._domInput),this._domButton=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--insert","ct-control--muted"]),this._domButton.textContent=ContentEdit._("Insert"),t.appendChild(this._domButton),this._addDOMEventListeners()},e.prototype.preview=function(t){return this.clearPreview(),this._domPreview=document.createElement("iframe"),this._domPreview.setAttribute("frameborder","0"),this._domPreview.setAttribute("height","100%"),this._domPreview.setAttribute("src",t),this._domPreview.setAttribute("width","100%"),this._domView.appendChild(this._domPreview)},e.prototype.save=function(){var t,e;return e=this._domInput.value.trim(),(t=n.getEmbedVideoURL(e))?this.dispatchEvent(this.createEvent("save",{url:t})):this.dispatchEvent(this.createEvent("save",{url:e}))},e.prototype.show=function(){return e.__super__.show.call(this),this._domInput.focus()},e.prototype.unmount=function(){return this.isMounted()&&this._domInput.blur(),e.__super__.unmount.call(this),this._domButton=null,this._domInput=null,this._domPreview=null},e.prototype._addDOMEventListeners=function(){var t;return e.__super__._addDOMEventListeners.call(this),this._domInput.addEventListener("input",(t=this,function(e){var i;return e.target.value?ContentEdit.removeCSSClass(t._domButton,"ct-control--muted"):ContentEdit.addCSSClass(t._domButton,"ct-control--muted"),t._updatePreviewTimeout&&clearTimeout(t._updatePreviewTimeout),i=function(){var e,i;return i=t._domInput.value.trim(),(e=n.getEmbedVideoURL(i))?t.preview(e):t.clearPreview()},t._updatePreviewTimeout=setTimeout(i,500)})),this._domInput.addEventListener("keypress",function(t){return function(e){if(13===e.keyCode)return t.save()}}(this)),this._domButton.addEventListener("click",function(t){return function(e){if(e.preventDefault(),-1===t._domButton.getAttribute("class").indexOf("ct-control--muted"))return t.save()}}(this))},e}(n.DialogUI),n.HTMLCleaner=function(){function t(t,e){this.tagWhitelist=t||this.constructor.DEFAULT_TAG_WHITELIST,this.attributeWhitelist=e||this.constructor.DEFAULT_ATTRIBUTE_WHITELIST}return t.DEFAULT_ATTRIBUTE_WHITELIST={a:["href"],td:["colspan"]},t.DEFAULT_TAG_WHITELIST=["a","address","b","blockquote","code","del","em","h1","h2","h3","h4","h5","h6","i","ins","li","ol","p","pre","strong","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","#text"],t.NO_CONTENT_TAGS=["head","meta","style","script","title"],t.prototype.clean=function(t){var e,n,i,o,r,s,a,c,l,h,d,u,p,g,m,f;for(t=t.replace(/<span( class="Apple-converted-space")?> <\/span>/g," "),l=document.implementation.createHTMLDocument(),(d=l.createElement("div")).innerHTML=t,h=function(){var t,e,n,o;for(o=[],t=0,e=(n=d.childNodes).length;t<e;t++)i=n[t],o.push(i);return o}();h.length>0;)if(s=(r=h.shift()).nodeName.toLowerCase(),this.tagWhitelist.indexOf(s)<0){if(this.constructor.NO_CONTENT_TAGS.indexOf(s)>-1){r.remove();continue}for(u=0,g=(f=r.childNodes).length;u<g;u++)(o=f[u])&&((o=o.cloneNode(!0)).nodeName.toLowerCase(),r.parentNode.insertBefore(o,r),h.push(o));r.remove()}else if("#text"===s||""!==r.textContent.trim()){if("td"!==s&&"th"!==s&&"li"!==s||r.querySelector("p")&&(r.innerHTML=r.textContent),r.attributes)for(c=this.attributeWhitelist[s]||[],a=function(){var t,n,i,o;for(o=[],t=0,n=(i=r.attributes).length;t<n;t++)e=i[t],o.push(e);return o}(),p=0,m=a.length;p<m;p++)n=a[p],(c.indexOf(n.name.toLowerCase())<0||"href"===n.name.toLowerCase()&&r.getAttribute(n.name).startsWith("javascript:"))&&r.removeAttribute(n.name);h.push.apply(h,function(){var t,e,n,o;for(o=[],t=0,e=(n=r.childNodes).length;t<e;t++)i=n[t],o.push(i);return o}())}else""===r.textContent||r.parentNode===d?r.remove():r.parentNode.replaceChild(l.createTextNode(" "),r);return d.innerHTML},t}(),r=function(t){function e(){e.__super__.constructor.call(this),this.history=null,this._state="dormant",this._busy=!1,this._namingProp=null,this._fixtureTest=function(t){return t.hasAttribute("data-fixture")},this._regionQuery=null,this._domRegions=null,this._regions={},this._orderedRegions=[],this._rootLastModified=null,this._regionsLastModified={},this._ignition=null,this._inspector=null,this._toolbox=null,this._emptyRegionsAllowed=!1}return a(e,t),e.prototype.ctrlDown=function(){return this._ctrlDown},e.prototype.domRegions=function(){return this._domRegions},e.prototype.getState=function(){return this._state},e.prototype.ignition=function(){return this._ignition},e.prototype.inspector=function(){return this._inspector},e.prototype.isDormant=function(){return"dormant"===this._state},e.prototype.isReady=function(){return"ready"===this._state},e.prototype.isEditing=function(){return"editing"===this._state},e.prototype.orderedRegions=function(){var t;return function(){var e,n,i,o;for(o=[],e=0,n=(i=this._orderedRegions).length;e<n;e++)t=i[e],o.push(this._regions[t]);return o}.call(this)},e.prototype.regions=function(){return this._regions},e.prototype.shiftDown=function(){return this._shiftDown},e.prototype.toolbox=function(){return this._toolbox},e.prototype.busy=function(t){return void 0===t?this._busy:(this._busy=t,this._ignition?this._ignition.busy(t):void 0)},e.prototype.createPlaceholderElement=function(t){return new ContentEdit.Text("p",{},"")},e.prototype.init=function(t,e,i,o){var r;return null==e&&(e="id"),null==i&&(i=null),null==o&&(o=!0),this._namingProp=e,i&&(this._fixtureTest=i),this.mount(),o&&(this._ignition=new n.IgnitionUI,this.attach(this._ignition),this._ignition.addEventListener("edit",(r=this,function(t){return t.preventDefault(),r.start(),r._ignition.state("editing")})),this._ignition.addEventListener("confirm",function(t){return function(e){if(e.preventDefault(),"editing"===t._ignition.state())return t._ignition.state("ready"),t.stop(!0)}}(this)),this._ignition.addEventListener("cancel",function(t){return function(e){if(e.preventDefault(),"editing"===t._ignition.state())return t.stop(!1),t.isEditing()?t._ignition.state("editing"):t._ignition.state("ready")}}(this))),this._toolbox=new n.ToolboxUI(n.DEFAULT_TOOLS),this.attach(this._toolbox),this._inspector=new n.InspectorUI,this.attach(this._inspector),this._state="ready",this._handleDetach=function(t){return function(e){return t._preventEmptyRegions()}}(this),this._handleClipboardPaste=function(t){return function(e,n){if(null,!n.clipboardData)return window.clipboardData?(window.clipboardData.getData("TEXT"),t.pasteText(e,window.clipboardData.getData("TEXT"))):void 0;n.clipboardData.getData("text/html")&&"PreText"!==e.type()?t.pasteHTML(e,n.clipboardData.getData("text/html")):t.pasteText(e,n.clipboardData.getData("text/plain"))}}(this),this._handleNextRegionTransition=function(t){return function(e){var n,i,o,r,s,a,c;if(!((o=(r=t.orderedRegions()).indexOf(e))>=r.length-1)){for(i=null,s=0,a=(c=(e=r[o+1]).descendants()).length;s<a;s++)if(void 0!==(n=c[s]).content){i=n;break}return i?(i.focus(),void i.selection(new ContentSelect.Range(0,0))):ContentEdit.Root.get().trigger("next-region",e)}}}(this),this._handlePreviousRegionTransition=function(t){return function(e){var n,i,o,r,s,a,c,l;if(!((r=(a=t.orderedRegions()).indexOf(e))<=0)){for(o=null,(i=(e=a[r-1]).descendants()).reverse(),c=0,l=i.length;c<l;c++)if(void 0!==(n=i[c]).content){o=n;break}return o?(s=o.content.length(),o.focus(),void o.selection(new ContentSelect.Range(s,s))):ContentEdit.Root.get().trigger("previous-region",e)}}}(this),ContentEdit.Root.get().bind("detach",this._handleDetach),ContentEdit.Root.get().bind("paste",this._handleClipboardPaste),ContentEdit.Root.get().bind("next-region",this._handleNextRegionTransition),ContentEdit.Root.get().bind("previous-region",this._handlePreviousRegionTransition),this.syncRegions(t)},e.prototype.destroy=function(){return ContentEdit.Root.get().unbind("detach",this._handleDetach),ContentEdit.Root.get().unbind("paste",this._handleClipboardPaste),ContentEdit.Root.get().unbind("next-region",this._handleNextRegionTransition),ContentEdit.Root.get().unbind("previous-region",this._handlePreviousRegionTransition),this.removeEventListener(),this.unmount(),this._children=[]},e.prototype.highlightRegions=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this._domRegions).length;n<i;n++)e=o[n],t?r.push(ContentEdit.addCSSClass(e,"ct--highlight")):r.push(ContentEdit.removeCSSClass(e,"ct--highlight"));return r},e.prototype.mount=function(){return this._domElement=this.constructor.createDiv(["ct-app"]),document.body.insertBefore(this._domElement,null),this._addDOMEventListeners()},e.prototype.unmount=function(){var t,e,n;if(this.isMounted()){for(t=0,e=(n=this._children).length;t<e;t++)n[t].unmount();return this._domElement.parentNode.removeChild(this._domElement),this._domElement=null,this._removeDOMEventListeners(),this._ignition=null,this._inspector=null,this._toolbox=null}},e.prototype.pasteHTML=function(t,e){var i,o,r,s,a,c,h,d,u,p,g,m,f,_,y,v,b,E,w,C,T,S,x,L,M,I,D,k;for(E=ContentEdit.TagNames.get(),(S=document.implementation.createHTMLDocument().createElement("div")).innerHTML=n.getHTMLCleaner().clean(e.trim()),r=[],x=0,M=(D=S.childNodes).length;x<M;x++)(o=D[x])&&("#text"===o.nodeName.toLowerCase()&&""===o.textContent.trim()||r.push(o));if(r.length){if((d=n.INLINE_TAGS.slice()).push("#text"),c=r[0].nodeName.toLowerCase(),p=r[r.length-1].nodeName.toLowerCase(),t.isFixed()||d.indexOf(c)>-1&&d.indexOf(p)>-1){if(d.indexOf(c)>-1&&d.indexOf(p)>-1?e=new HTMLString.String(S.innerHTML):(console.log(S.textContent),e=new HTMLString.String(HTMLString.String.encode(S.textContent))),t.content)return s=(b=t.selection()).get()[0]+e.length(),T=t.content.substring(0,b.get()[0]),C=t.content.substring(b.get()[1]),(v=t.content.substring(b.get()[0],b.get()[1])).length()&&(w=(i=v.characters[0]).tags(),i.isTag()&&w.shift(),w.length>=1&&(e=e.format.apply(e,[0,e.length()].concat(l.call(w))))),t.content=T.concat(e),t.content=t.content.concat(C,!1),t.updateInnerHTML(),t.taint(),b.set(s,s),void t.selection(b);S.innerHTML="<p>"+e.html()+"</p>"}if(f=t,"Region"!==t.parent().type()&&(t=t.closest((function(t){return"Region"===t.parent().type()}))),y=t.parent(),d.indexOf(c)>-1&&d.indexOf(p)>-1){for(u=S.createElement("p");S.childNodes.length>0;)u.appendChild(S.childNodes[0]);S.appendChild(u)}for(h=0,g=f,L=0,I=(k=S.childNodes).length;L<I;L++)(m=k[L])&&("#text"===m.nodeName&&""===m.textContent.trim()||((a=E.match(m.nodeName))===ContentEdit.Static&&((_=document.createElement("p")).appendChild(m),m=_,a=ContentEdit.Text),g=a.fromDOMElement(m),y.attach(g,y.children.indexOf(t)+(1+h)),h+=1));return g.focus?g.focus():g.nextSibling()?(g=g.nextSibling().previousWithTest((function(t){if(t.focus)return t})))?g.focus():void 0:(g=g.nextWithTest((function(t){if(t.focus)return t})))?g.focus():f.focus()}},e.prototype.pasteText=function(t,e){var n,i,o,r,s,a,c,h,d,u,p,g,m,f,_,y,v,b,E,w,C,T;if(m=(m="PreText"!==t.type()?e.split("\n"):[e]).filter((function(t){return""!==t.trim()}))){if(o=HTMLString.String.encode,y=!0,w=t.type(),1===m.length&&(y=!1),"PreText"===w&&(y=!1),t.can("spawn")||(y=!1),y){for("ListItemText"===w?(c=t.parent(),s=(a=t.parent().parent()).children.indexOf(c)+1):("Region"!==(c=t).parent().type()&&(c=t.closest((function(t){return"Region"===t.parent().type()}))),s=(a=c.parent()).children.indexOf(c)+1),r=C=0,T=m.length;C<T;r=++C)p=o(p=m[r]),"ListItemText"===w?(h=new ContentEdit.ListItem,d=new ContentEdit.ListItemText(p),h.attach(d),u=d):u=h=new ContentEdit.Text("p",{},p),a.attach(h,s+r);return g=u.content.length(),u.focus(),u.selection(new ContentSelect.Range(g,g))}return e=o(e),e=new HTMLString.String(e,"PreText"===w),i=(_=t.selection()).get()[0]+e.length(),E=t.content.substring(0,_.get()[0]),b=t.content.substring(_.get()[1]),(f=t.content.substring(_.get()[0],_.get()[1])).length()&&(v=(n=f.characters[0]).tags(),n.isTag()&&v.shift(),v.length>=1&&(e=e.format.apply(e,[0,e.length()].concat(l.call(v))))),t.content=E.concat(e),t.content=t.content.concat(b,!1),t.updateInnerHTML(),t.taint(),_.set(i,i),t.selection(_)}},e.prototype.revert=function(){var t;if(this.dispatchEvent(this.createEvent("revert")))return!(n.CANCEL_MESSAGE&&(t=ContentEdit._(n.CANCEL_MESSAGE),ContentEdit.Root.get().lastModified()>this._rootLastModified&&!window.confirm(t)))&&(this.revertToSnapshot(this.history.goTo(0),!1),!0)},e.prototype.revertToSnapshot=function(t,e){var n,i,o,r,s,a,c,l,h;for(i in null==e&&(e=!0),n=[],c=this._regions){for(s=0,a=(l=(o=c[i]).children).length;s<a;s++)l[s].unmount();void 0!==t.regions[i]?1===o.children.length&&o.children[0].isFixed()?((r=this.constructor.createDiv()).innerHTML=t.regions[i],n.push(r.firstElementChild),o.domElement().parentNode.replaceChild(r.firstElementChild,o.domElement())):(n.push(o.domElement()),o.domElement().innerHTML=t.regions[i]):(o.domElement().remove(),delete this._regions[i])}if(this._domRegions=n,e){for(i in ContentEdit.Root.get().focused()&&ContentEdit.Root.get().focused().blur(),this._regions={},this.syncRegions(null,!0),ContentEdit.Root.get()._modified=t.rootModified,h=this._regions)o=h[i],t.regionModifieds[i]&&(o._modified=t.regionModifieds[i]);return this.history.replaceRegions(this._regions),this.history.restoreSelection(t),this._inspector.updateTags()}},e.prototype.save=function(t){var e,n,i,o,r,s,a,c,l,h,d,u;if(this.dispatchEvent(this.createEvent("save",{passive:t}))){if((a=ContentEdit.Root.get()).focused()&&!t&&a.focused().blur(),a.lastModified()!==this._rootLastModified||!t){for(r in n=[],o={},d=this._regions){if(i=(s=d[r]).html(),1===s.children.length&&"Fixture"===!s.type()&&(e=s.children[0]).content&&!e.content.html()&&(i=""),!t){for(l=0,h=(u=s.children).length;l<h;l++)(e=u[l]).unmount();1===s.children.length&&s.children[0].isFixed()?((c=this.constructor.createDiv()).innerHTML=i,n.push(c.firstElementChild),s.domElement().parentNode.replaceChild(c.firstElementChild,s.domElement())):(n.push(s.domElement()),s.domElement().innerHTML=i)}s.lastModified()!==this._regionsLastModified[r]&&(o[r]=i,this._regionsLastModified[r]=s.lastModified())}return this._domRegions=n,this.dispatchEvent(this.createEvent("saved",{regions:o,passive:t}))}this.dispatchEvent(this.createEvent("saved",{regions:{},passive:t}))}},e.prototype.setRegionOrder=function(t){return this._orderedRegions=t.slice()},e.prototype.start=function(){if(this.dispatchEvent(this.createEvent("start")))return this.busy(!0),this.syncRegions(),this._initRegions(),this._preventEmptyRegions(),this._rootLastModified=ContentEdit.Root.get().lastModified(),this.history=new n.History(this._regions),this.history.watch(),this._state="editing",this._toolbox.show(),this._inspector.show(),this.busy(!1),this.dispatchEvent(this.createEvent("started"))},e.prototype.stop=function(t){var e;if(this.dispatchEvent(this.createEvent("stop",{save:t}))){if((e=ContentEdit.Root.get().focused())&&e.isMounted()&&void 0!==e._syncContent&&e._syncContent(),t)this.save();else if(!this.revert())return;return this.history.stopWatching(),this.history=null,this._toolbox.hide(),this._inspector.hide(),this._regions={},this._state="ready",ContentEdit.Root.get().focused()&&this._allowEmptyRegions((function(){return ContentEdit.Root.get().focused().blur()})),this.dispatchEvent(this.createEvent("stopped"))}},e.prototype.syncRegions=function(t,e){if(t&&(this._regionQuery=t),this._domRegions=[],this._regionQuery&&("string"==typeof this._regionQuery||this._regionQuery instanceof String?this._domRegions=document.querySelectorAll(this._regionQuery):this._domRegions=this._regionQuery),"editing"===this._state&&(this._initRegions(e),this._preventEmptyRegions()),this._ignition)return this._domRegions.length?this._ignition.show():this._ignition.hide()},e.prototype._addDOMEventListeners=function(){var t;return this._handleHighlightOn=(t=this,function(e){var i;if(17!==(i=e.keyCode)&&224!==i&&91!==i&&93!==i||(t._ctrlDown=!0),16===e.keyCode&&!t._ctrlDown){if(t._highlightTimeout)return;return t._shiftDown=!0,void(t._highlightTimeout=setTimeout((function(){return t.highlightRegions(!0)}),n.HIGHLIGHT_HOLD_DURATION))}return clearTimeout(t._highlightTimeout),t.highlightRegions(!1)}),this._handleHighlightOff=function(t){return function(e){var n;if(17!==(n=e.keyCode)&&224!==n&&91!==n&&93!==n)return 16===e.keyCode?(t._shiftDown=!1,t._highlightTimeout&&(clearTimeout(t._highlightTimeout),t._highlightTimeout=null),t.highlightRegions(!1)):void 0;t._ctrlDown=!1}}(this),this._handleVisibility=function(t){return function(e){if(!document.hasFocus())return clearTimeout(t._highlightTimeout),t.highlightRegions(!1)}}(this),document.addEventListener("keydown",this._handleHighlightOn),document.addEventListener("keyup",this._handleHighlightOff),document.addEventListener("visibilitychange",this._handleVisibility),this._handleBeforeUnload=function(t){return function(e){var i;if("editing"===t._state&&n.CANCEL_MESSAGE&&t.history&&t.history._snapshotIndex)return i=ContentEdit._(n.CANCEL_MESSAGE),(e||window.event).returnValue=i,i}}(this),window.addEventListener("beforeunload",this._handleBeforeUnload),this._handleUnload=function(t){return function(e){return t.destroy()}}(this),window.addEventListener("unload",this._handleUnload)},e.prototype._allowEmptyRegions=function(t){return this._emptyRegionsAllowed=!0,t(),this._emptyRegionsAllowed=!1},e.prototype._preventEmptyRegions=function(){var t,e,n,i,o,r,s,a,c,l;if(!this._emptyRegionsAllowed){for(n in l=[],a=this._regions){for(e=(o=a[n]).lastModified(),t=!1,r=0,s=(c=o.children).length;r<s;r++)if("Static"!==c[r].type()){t=!0;break}t||(i=this.createPlaceholderElement(o),o.attach(i),l.push(o._modified=e))}return l}},e.prototype._removeDOMEventListeners=function(){return document.removeEventListener("keydown",this._handleHighlightOn),document.removeEventListener("keyup",this._handleHighlightOff),window.removeEventListener("beforeunload",this._handleBeforeUnload),window.removeEventListener("unload",this._handleUnload)},e.prototype._initRegions=function(t){var e,n,i,o,r,s,a,c,l,h,d;for(null==t&&(t=!1),i={},n=[],this._orderedRegions=[],o=a=0,c=(l=this._domRegions).length;a<c;o=++a)(s=(e=l[o]).getAttribute(this._namingProp))||(s=o),i[s]=!0,this._orderedRegions.push(s),this._regions[s]&&this._regions[s].domElement()===e||(this._fixtureTest(e)?this._regions[s]=new ContentEdit.Fixture(e):this._regions[s]=new ContentEdit.Region(e),n.push(this._regions[s].domElement()),t||(this._regionsLastModified[s]=this._regions[s].lastModified()));for(s in this._domRegions=n,d=[],h=this._regions)h[s],i[s]||(delete this._regions[s],delete this._regionsLastModified[s],(r=this._orderedRegions.indexOf(s))>-1?d.push(this._orderedRegions.splice(r,1)):d.push(void 0));return d},e}(n.ComponentUI),n.EditorApp=function(){var t;function e(){}return t=null,e.get=function(){var e;return e=n.EditorApp.getCls(),null!=t?t:t=new e},e.getCls=function(){return r},e}(),n.History=function(){function t(t){this._lastSnapshotTaken=null,this._regions={},this.replaceRegions(t),this._snapshotIndex=-1,this._snapshots=[],this._store()}return t.prototype.canRedo=function(){return this._snapshotIndex<this._snapshots.length-1},t.prototype.canUndo=function(){return this._snapshotIndex>0},t.prototype.index=function(){return this._snapshotIndex},t.prototype.length=function(){return this._snapshots.length},t.prototype.snapshot=function(){return this._snapshots[this._snapshotIndex]},t.prototype.goTo=function(t){return this._snapshotIndex=Math.min(this._snapshots.length-1,Math.max(0,t)),this.snapshot()},t.prototype.redo=function(){return this.goTo(this._snapshotIndex+1)},t.prototype.replaceRegions=function(t){var e,n,i;for(e in this._regions={},i=[],t)n=t[e],i.push(this._regions[e]=n);return i},t.prototype.restoreSelection=function(t){var e;if(t.selected)return(e=this._regions[t.selected.region].descendants()[t.selected.element]).focus(),e.selection&&t.selected.selection?e.selection(t.selected.selection):void 0},t.prototype.stopWatching=function(){if(this._watchInterval&&clearInterval(this._watchInterval),this._delayedStoreTimeout)return clearTimeout(this._delayedStoreTimeout)},t.prototype.undo=function(){return this.goTo(this._snapshotIndex-1)},t.prototype.watch=function(){var t,e;return this._lastSnapshotTaken=Date.now(),e=this,t=function(){var t,n;if(null!==(n=ContentEdit.Root.get().lastModified())&&n>e._lastSnapshotTaken){if(e._delayedStoreRequested===n)return;return e._delayedStoreTimeout&&clearTimeout(e._delayedStoreTimeout),t=function(){return e._lastSnapshotTaken=n,e._store()},e._delayedStoreRequested=n,e._delayedStoreTimeout=setTimeout(t,500)}},this._watchInterval=setInterval(t,50)},t.prototype._store=function(){var t,e,n,i,o,r;for(e in i={regions:{},regionModifieds:{},rootModified:ContentEdit.Root.get().lastModified(),selected:null},o=this._regions)n=o[e],i.regions[e]=n.html(),i.regionModifieds[e]=n.lastModified();if(t=ContentEdit.Root.get().focused()){if(i.selected={},!(n=t.closest((function(t){return"Region"===t.type()||"Fixture"===t.type()}))))return;for(e in r=this._regions)if(n===r[e]){i.selected.region=e;break}i.selected.element=n.descendants().indexOf(t),t.selection&&(i.selected.selection=t.selection())}return this._snapshotIndex<this._snapshots.length-1&&(this._snapshots=this._snapshots.slice(0,this._snapshotIndex+1)),this._snapshotIndex++,this._snapshots.splice(this._snapshotIndex,0,i)},t}(),n.StylePalette=function(){function t(){}return t._styles=[],t.add=function(t){return this._styles=this._styles.concat(t)},t.styles=function(t){var e;return void 0===t?this._styles.slice():(e=t.tagName(),this._styles.filter((function(t){return!t._applicableTo||-1!==t._applicableTo.indexOf(e)})))},t}(),n.Style=function(){function t(t,e,n){this._name=t,this._cssClass=e,this._applicableTo=n||null}return t.prototype.applicableTo=function(){return this._applicableTo},t.prototype.cssClass=function(){return this._cssClass},t.prototype.name=function(){return this._name},t}(),n.ToolShelf=function(){function t(){}return t._tools={},t.stow=function(t,e){return this._tools[e]=t},t.fetch=function(t){if(!this._tools[t])throw new Error("`"+t+"` has not been stowed on the tool shelf");return this._tools[t]},t}(),n.Tool=function(){function t(){}return t.label="Tool",t.icon="tool",t.requiresElement=!0,t.canApply=function(t,e){return!1},t.isApplied=function(t,e){return!1},t.apply=function(t,e,n){throw new Error("Not implemented")},t.editor=function(){return n.EditorApp.get()},t.dispatchEditorEvent=function(t,e){return this.editor().dispatchEvent(this.editor().createEvent(t,e))},t._insertAt=function(t){var e,n;return"Region"!==(n=t).parent().type()&&(n=t.closest((function(t){return"Region"===t.parent().type()}))),e=n.parent().children.indexOf(n)+1,[n,e]},t}(),n.Tools.Bold=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"bold"),e.label="Bold",e.icon="bold",e.tagName="b",e.canApply=function(t,e){return!!t.content&&(e&&!e.isCollapsed())},e.isApplied=function(t,e){var n,i,o;return!(void 0===t.content||!t.content.length())&&((n=(o=e.get())[0])===(i=o[1])&&(i+=1),t.content.slice(n,i).hasTags(this.tagName,!0))},e.apply=function(t,e,n){var i,o,r,s;if(r={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",r))return t.storeState(),i=(s=e.get())[0],o=s[1],this.isApplied(t,e)?t.content=t.content.unformat(i,o,new HTMLString.Tag(this.tagName)):t.content=t.content.format(i,o,new HTMLString.Tag(this.tagName)),t.content.optimize(),t.updateInnerHTML(),t.taint(),t.restoreState(),n(!0),this.dispatchEditorEvent("tool-applied",r)},e}(n.Tool),n.Tools.Italic=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"italic"),e.label="Italic",e.icon="italic",e.tagName="i",e}(n.Tools.Bold),n.Tools.Link=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"link"),e.label="Link",e.icon="link",e.tagName="a",e.getAttr=function(t,e,n){var i,o,r,s,a,c,l,h,d,u,p;if("Image"===e.type()){if(e.a)return e.a[t]}else{if(e.isFixed()&&"a"===e.tagName())return e.attr(t);for(o=(d=n.get())[0],s=d[1],a=0,l=(u=e.content.slice(o,s).characters).length;a<l;a++)if((i=u[a]).hasTags("a"))for(c=0,h=(p=i.tags()).length;c<h;c++)if("a"===(r=p[c]).name())return r.attr(t)}return""},e.canApply=function(t,e){var n;return"Image"===t.type()||(!(!t.isFixed()||"a"!==t.tagName())||!!t.content&&(!!e&&!!(!e.isCollapsed()||(n=t.content.characters[e.get()[0]])&&n.hasTags("a"))))},e.isApplied=function(t,n){return"Image"===t.type()?t.a:!(!t.isFixed()||"a"!==t.tagName())||e.__super__.constructor.isApplied.call(this,t,n)},e.apply=function(t,e,i){var o,r,s,a,c,l,h,d,u,p,g,m,f,_,y,v;if(_={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",_)){if(r=!1,"Image"===t.type())d=t.domElement().getBoundingClientRect();else if(t.isFixed()&&"a"===t.tagName())d=t.domElement().getBoundingClientRect();else{if(e.isCollapsed()){for(s=t.content.characters,c=m=e.get(0)[0];m>0&&s[m-1].hasTags("a");)m-=1;for(;c<s.length&&s[c].hasTags("a");)c+=1;(e=new ContentSelect.Range(m,c)).select(t.domElement())}t.storeState(),g=new HTMLString.Tag("span",{class:"ct--pseudo-select"}),y=e.get(),l=y[0],f=y[1],t.content=t.content.format(l,f,g),t.updateInnerHTML(),d=t.domElement().getElementsByClassName("ct--pseudo-select")[0].getBoundingClientRect()}return o=n.EditorApp.get(),(h=new n.ModalUI(!0,!0)).addEventListener("click",(function(){if(this.unmount(),a.hide(),t.content&&(t.content=t.content.unformat(l,f,g),t.updateInnerHTML(),t.restoreState()),i(r),r)return n.Tools.Link.dispatchEditorEvent("tool-applied",_)})),a=new n.LinkDialog(this.getAttr("href",t,e),this.getAttr("target",t,e)),u=(v=n.getScrollPosition())[0],p=v[1],a.position([d.left+d.width/2+u,d.top+d.height/2+p]),a.addEventListener("save",(function(e){var n,i,o,s,a,c,d,u,p;if(s=e.detail(),r=!0,"Image"===t.type()){if(i=["align-center","align-left","align-right"],s.href){for(t.a={href:s.href},t.a&&(t.a.class=t.a.class),s.target&&(t.a.target=s.target),c=0,u=i.length;c<u;c++)if(o=i[c],t.hasCSSClass(o)){t.removeCSSClass(o),t.a.class=o;break}}else{for(a=[],t.a.class&&(a=t.a.class.split(" ")),d=0,p=i.length;d<p;d++)if(o=i[d],a.indexOf(o)>-1){t.addCSSClass(o);break}t.a=null}t.unmount(),t.mount()}else t.isFixed()&&"a"===t.tagName()?t.attr("href",s.href):(t.content=t.content.unformat(l,f,"a"),s.href&&(n=new HTMLString.Tag("a",s),t.content=t.content.format(l,f,n),t.content.optimize()),t.updateInnerHTML());return t.taint(),h.dispatchEvent(h.createEvent("click"))})),o.attach(h),o.attach(a),h.show(),a.show()}},e}(n.Tools.Bold),n.Tools.Heading=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"heading"),e.label="Heading",e.icon="heading",e.tagName="h1",e.canApply=function(t,e){return!t.isFixed()&&(void 0!==t.content&&-1!==["Text","PreText"].indexOf(t.type()))},e.isApplied=function(t,e){return!!t.content&&(-1!==["Text","PreText"].indexOf(t.type())&&t.tagName()===this.tagName)},e.apply=function(t,e,n){var i,o,r,s,a;if(a={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",a))return t.storeState(),"PreText"===t.type()?(i=t.content.html().replace(/&nbsp;/g," "),s=new ContentEdit.Text(this.tagName,{},i),o=(r=t.parent()).children.indexOf(t),r.detach(t),r.attach(s,o),t.blur(),s.focus(),s.selection(e)):(t.removeAttr("class"),t.tagName()===this.tagName?t.tagName("p"):t.tagName(this.tagName),t.restoreState()),this.dispatchEditorEvent("tool-applied",a),n(!0)},e}(n.Tool),n.Tools.Subheading=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"subheading"),e.label="Subheading",e.icon="subheading",e.tagName="h2",e}(n.Tools.Heading),n.Tools.Paragraph=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"paragraph"),e.label="Paragraph",e.icon="paragraph",e.tagName="p",e.canApply=function(t,e){return!t.isFixed()&&void 0!==t},e.apply=function(t,i,o){var r,s,a,c;return r=this.editor().ctrlDown(),n.Tools.Heading.canApply(t)&&!r?e.__super__.constructor.apply.call(this,t,i,o):(c={tool:this,element:t,selection:i},this.dispatchEditorEvent("tool-apply",c)?("Region"!==t.parent().type()&&(t=t.closest((function(t){return"Region"===t.parent().type()}))),a=t.parent(),s=new ContentEdit.Text("p"),a.attach(s,a.children.indexOf(t)+1),s.focus(),o(!0),this.dispatchEditorEvent("tool-applied",c)):void 0)},e}(n.Tools.Heading),n.Tools.Preformatted=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"preformatted"),e.label="Preformatted",e.icon="preformatted",e.tagName="pre",e.apply=function(t,e,i){var o,r,s,a,c;if(c={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",c)){if("PreText"!==t.type())return a=t.content.text(),s=new ContentEdit.PreText("pre",{},HTMLString.String.encode(a)),o=(r=t.parent()).children.indexOf(t),r.detach(t),r.attach(s,o),t.blur(),s.focus(),s.selection(e),i(!0),this.dispatchEditorEvent("tool-applied",c);n.Tools.Paragraph.apply(t,e,i)}},e}(n.Tools.Heading),n.Tools.AlignLeft=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"align-left"),e.label="Align left",e.icon="align-left",e.className="text-left",e.canApply=function(t,e){return void 0!==t.content},e.isApplied=function(t,e){var n;return!!this.canApply(t)&&("ListItemText"!==(n=t.type())&&"TableCellText"!==n||(t=t.parent()),t.hasCSSClass(this.className))},e.apply=function(t,e,i){var o,r,s,a,c,l;if(s={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",s)){for("ListItemText"!==(l=t.type())&&"TableCellText"!==l||(t=t.parent()),a=0,c=(o=[n.Tools.AlignLeft.className,n.Tools.AlignCenter.className,n.Tools.AlignRight.className]).length;a<c;a++)if(r=o[a],t.hasCSSClass(r)&&(t.removeCSSClass(r),r===this.className))return i(!0);return t.addCSSClass(this.className),i(!0),this.dispatchEditorEvent("tool-applied",s)}},e}(n.Tool),n.Tools.AlignCenter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"align-center"),e.label="Align center",e.icon="align-center",e.className="text-center",e}(n.Tools.AlignLeft),n.Tools.AlignRight=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"align-right"),e.label="Align right",e.icon="align-right",e.className="text-right",e}(n.Tools.AlignLeft),n.Tools.UnorderedList=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"unordered-list"),e.label="Bullet list",e.icon="unordered-list",e.listTag="ul",e.canApply=function(t,e){var n;return!t.isFixed()&&(void 0!==t.content&&("Region"===(n=t.parent().type())||"ListItem"===n))},e.apply=function(t,e,n){var i,o,r,s,a,c;if(c={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",c))return"ListItem"===t.parent().type()?(t.storeState(),(o=t.closest((function(t){return"List"===t.type()}))).tagName(this.listTag),t.restoreState()):(s=new ContentEdit.ListItemText(t.content.copy()),(r=new ContentEdit.ListItem).attach(s),(o=new ContentEdit.List(this.listTag,{})).attach(r),i=(a=t.parent()).children.indexOf(t),a.detach(t),a.attach(o,i),s.focus(),s.selection(e)),n(!0),this.dispatchEditorEvent("tool-applied",c)},e}(n.Tool),n.Tools.OrderedList=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"ordered-list"),e.label="Numbers list",e.icon="ordered-list",e.listTag="ol",e}(n.Tools.UnorderedList),n.Tools.Table=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"table"),e.label="Table",e.icon="table",e.canApply=function(t,e){return!t.isFixed()&&void 0!==t},e.apply=function(t,e,i){var o,r,s,a,c,l;if(c={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",c))return t.storeState&&t.storeState(),o=n.EditorApp.get(),s=new n.ModalUI,a=t.closest((function(t){return t&&"Table"===t.type()})),(r=new n.TableDialog(a)).addEventListener("cancel",(function(){return s.hide(),r.hide(),t.restoreState&&t.restoreState(),i(!1)})),r.addEventListener("save",(l=this,function(e){var n,o,h,d,u;return d=e.detail(),o=!0,a?(l._updateTable(d,a),o=t.closest((function(t){return t&&"Table"===t.type()}))):(a=l._createTable(d),h=(u=l._insertAt(t))[0],n=u[1],h.parent().attach(a,n),o=!1),o?t.restoreState():a.firstSection().children[0].children[0].children[0].focus(),s.hide(),r.hide(),i(!0),l.dispatchEditorEvent("tool-applied",c)})),o.attach(s),o.attach(r),s.show(),r.show()},e._adjustColumns=function(t,e){var n,i,o,r,s,a,c,l,h,d;for(d=[],c=0,l=(h=t.children).length;c<l;c++)a=h[c],i=a.children[0].tagName(),r=a.children.length,(s=e-r)<0?d.push(function(){var t,e;for(e=[],t=s;s<=0?t<0:t>0;s<=0?++t:--t)n=a.children[a.children.length-1],e.push(a.detach(n));return e}()):s>0?d.push(function(){var t,e;for(e=[],t=0;0<=s?t<s:t>s;0<=s?++t:--t)n=new ContentEdit.TableCell(i),a.attach(n),o=new ContentEdit.TableCellText(""),e.push(n.attach(o));return e}()):d.push(void 0);return d},e._createTable=function(t){var e,n,i,o;return o=new ContentEdit.Table,t.head&&(i=this._createTableSection("thead","th",t.columns),o.attach(i)),e=this._createTableSection("tbody","td",t.columns),o.attach(e),t.foot&&(n=this._createTableSection("tfoot","td",t.columns),o.attach(n)),o},e._createTableSection=function(t,e,n){var i,o,r,s,a;for(s=new ContentEdit.TableSection(t),r=new ContentEdit.TableRow,s.attach(r),a=0;0<=n?a<n:a>n;0<=n?++a:--a)i=new ContentEdit.TableCell(e),r.attach(i),o=new ContentEdit.TableCellText(""),i.attach(o);return s},e._updateTable=function(t,e){var n,i,o,r,s,a,c;if(!t.head&&e.thead()&&e.detach(e.thead()),!t.foot&&e.tfoot()&&e.detach(e.tfoot()),n=e.firstSection().children[0].children.length,t.columns!==n)for(s=0,a=(c=e.children).length;s<a;s++)r=c[s],this._adjustColumns(r,t.columns);if(t.head&&!e.thead()&&(o=this._createTableSection("thead","th",t.columns),e.attach(o,0)),t.foot&&!e.tfoot())return i=this._createTableSection("tfoot","td",t.columns),e.attach(i)},e}(n.Tool),n.Tools.Indent=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"indent"),e.label="Indent",e.icon="indent",e.canApply=function(t,e){return"ListItem"===t.parent().type()&&t.parent().parent().children.indexOf(t.parent())>0},e.apply=function(t,e,n){var i;if(i={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",i))return t.parent().indent(),n(!0),this.dispatchEditorEvent("tool-applied",i)},e}(n.Tool),n.Tools.Unindent=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"unindent"),e.label="Unindent",e.icon="unindent",e.canApply=function(t,e){return"ListItem"===t.parent().type()},e.apply=function(t,e,n){var i;if(i={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",i))return t.parent().unindent(),n(!0),this.dispatchEditorEvent("tool-applied",i)},e}(n.Tool),n.Tools.LineBreak=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"line-break"),e.label="Line break",e.icon="line-break",e.canApply=function(t,e){return t.content},e.apply=function(t,e,n){var i,o,r,s,a;if(a={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",a))return o=e.get()[0]+1,s=t.content.substring(0,e.get()[0]),r=t.content.substring(e.get()[1]),i=new HTMLString.String("<br>",t.content.preserveWhitespace()),t.content=s.concat(i,r),t.updateInnerHTML(),t.taint(),e.set(o,o),t.selection(e),n(!0),this.dispatchEditorEvent("tool-applied",a)},e}(n.Tool),n.Tools.Image=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"image"),e.label="Image",e.icon="image",e.canApply=function(t,e){return!t.isFixed()||"ImageFixture"===t.type()},e.apply=function(t,e,i){var o,r,s,a,c;if(a={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",a))return t.storeState&&t.storeState(),o=n.EditorApp.get(),s=new n.ModalUI,(r=new n.ImageDialog).addEventListener("cancel",(function(){return s.hide(),r.hide(),t.restoreState&&t.restoreState(),i(!1)})),r.addEventListener("save",(c=this,function(e){var n,o,l,h,d,u,p,g;return d=(n=e.detail()).imageURL,h=n.imageSize,(l=n.imageAttrs)||(l={}),l.height=h[1],l.src=d,l.width=h[0],"ImageFixture"===t.type()?t.src(d):(o=new ContentEdit.Image(l),p=(g=c._insertAt(t))[0],u=g[1],p.parent().attach(o,u),o.focus()),s.hide(),r.hide(),i(!0),c.dispatchEditorEvent("tool-applied",a)})),o.attach(s),o.attach(r),s.show(),r.show()},e}(n.Tool),n.Tools.Video=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"video"),e.label="Video",e.icon="video",e.canApply=function(t,e){return!t.isFixed()},e.apply=function(t,e,i){var o,r,s,a,c;if(a={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",a))return t.storeState&&t.storeState(),o=n.EditorApp.get(),s=new n.ModalUI,(r=new n.VideoDialog).addEventListener("cancel",(function(){return s.hide(),r.hide(),t.restoreState&&t.restoreState(),i(!1)})),r.addEventListener("save",(c=this,function(e){var o,l,h,d,u,p;if((d=e.detail().url)?(u=new ContentEdit.Video("iframe",{frameborder:0,height:n.DEFAULT_VIDEO_HEIGHT,src:d,width:n.DEFAULT_VIDEO_WIDTH}),h=(p=c._insertAt(t))[0],l=p[1],h.parent().attach(u,l),u.focus()):t.restoreState&&t.restoreState(),s.hide(),r.hide(),i(o=""!==d),o)return c.dispatchEditorEvent("tool-applied",a)})),o.attach(s),o.attach(r),s.show(),r.show()},e}(n.Tool),n.Tools.Undo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"undo"),e.label="Undo",e.icon="undo",e.requiresElement=!1,e.canApply=function(t,e){var i;return(i=n.EditorApp.get()).history&&i.history.canUndo()},e.apply=function(t,e,n){var i,o,r;if(r={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",r))return(i=this.editor()).history.stopWatching(),o=i.history.undo(),i.revertToSnapshot(o),i.history.watch(),this.dispatchEditorEvent("tool-applied",r)},e}(n.Tool),n.Tools.Redo=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"redo"),e.label="Redo",e.icon="redo",e.requiresElement=!1,e.canApply=function(t,e){var i;return(i=n.EditorApp.get()).history&&i.history.canRedo()},e.apply=function(t,e,i){var o,r,s;if(s={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",s))return(o=n.EditorApp.get()).history.stopWatching(),r=o.history.redo(),o.revertToSnapshot(r),o.history.watch(),this.dispatchEditorEvent("tool-applied",s)},e}(n.Tool),n.Tools.Remove=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"remove"),e.label="Remove",e.icon="remove",e.canApply=function(t,e){return!t.isFixed()},e.apply=function(t,e,n){var i,o,r,s,a;if(a={tool:this,element:t,selection:e},this.dispatchEditorEvent("tool-apply",a)){if(i=this.editor(),t.blur(),t.nextContent()?t.nextContent().focus():t.previousContent()&&t.previousContent().focus(),!t.isMounted())return n(!0),void this.dispatchEditorEvent("tool-applied",a);switch(t.type()){case"ListItemText":i.ctrlDown()?(o=t.closest((function(t){return"Region"===t.parent().type()}))).parent().detach(o):t.parent().parent().detach(t.parent());break;case"TableCellText":i.ctrlDown()?(s=t.closest((function(t){return"Table"===t.type()}))).parent().detach(s):(r=t.parent().parent()).parent().detach(r);break;default:t.parent().detach(t)}return n(!0),this.dispatchEditorEvent("tool-applied",a)}},e}(n.Tool),n.Tools.H3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"h3"),e.label="Heading 3",e.icon="subheading",e.tagName="h3",e}(n.Tools.Heading),n.Tools.Blockquote=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"blockquote"),e.label="Blockquote",e.icon="blockquote",e.tagName="blockquote",e}(n.Tools.Heading),n.Tools.Viz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"viz"),e.label="Visualization",e.icon="viz",e.tagName="viz",e}(n.Tools.Heading),n.Tools.Gallery=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"gallery"),e.label="Gallery",e.icon="gallery",e.tagName="gallery",e}(n.Tools.Heading),n.Tools.Sup=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"sup"),e.label="Superscript",e.icon="superscript",e.tagName="sup",e}(n.Tools.Bold),n.Tools.Sub=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),n.ToolShelf.stow(e,"sub"),e.label="Subscript",e.icon="subscript",e.tagName="sub",e}(n.Tools.Bold),n.DEFAULT_TOOLS[1]=["heading","subheading","h3","paragraph","unordered-list","ordered-list","sub","sup","table","indent","unindent","blockquote","gallery","viz","line-break"]}.call(this)},3:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(s=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([o]).join("\n")}var s,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);i&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},4:function(t,e,n){var i,o,r={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),a=function(t){return document.querySelector(t)},c=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=a.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,h=0,d=[],u=n(7);function p(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(v(i.parts[s],e))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(v(i.parts[s],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function g(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function m(t,e){var n=c(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function _(t){var e=document.createElement("style");return t.attrs.type="text/css",y(e,t.attrs),m(t,e),e}function y(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function v(t,e){var n,i,o,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var s=h++;n=l||(l=_(e)),i=w.bind(null,n,s,!1),o=w.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",y(e,t.attrs),m(t,e),e}(e),i=T.bind(null,n,e),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=_(e),i=C.bind(null,n),o=function(){f(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=g(t,e);return p(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var s=n[o];(a=r[s.id]).refs--,i.push(a)}t&&p(g(t,e),e);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete r[a.id]}}}};var b,E=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=E(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function C(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function T(t,e,n){var i=n.css,o=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(i=u(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},7:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},8:function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}}});